/*
 Satisfy - made to satisfy CSS selectors
 Copyright (c) 2009 James Padolsey
 -------------------------------------------------------
 Dual licensed under the MIT and GPL licenses.
    - http://www.opensource.org/licenses/mit-license.php
    - http://www.gnu.org/copyleft/gpl.html
 -------------------------------------------------------
 Version: 0.3
 -------------------------------------------------------
 (most) Regular Expressions are Copyright (c) John Resig,
 from the Sizzle Selector Engine.
 FastClick: polyfill to remove click delays on browsers with touch UIs.

 @version 0.6.11
 @codingstandard ftlabs-jsv2
 @copyright The Financial Times Limited [All Rights Reserved]
 @license MIT License (see LICENSE.txt)
*/
var Badoo=Badoo||{};(function(a){a.Utils&&a.Utils.Timing&&a.Utils.Timing.getInstance().startupEvent("load-js-end").startupEvent("execute-js-start")})(Badoo);
(function(a){String.prototype.trim===a&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});Array.prototype.reduce===a&&(Array.prototype.reduce=function(f){if(void 0===this||null===this)throw new TypeError;var g=Object(this),d=g.length>>>0,b=0,c;if("function"!=typeof f)throw new TypeError;if(0==d&&1==arguments.length)throw new TypeError;if(2<=arguments.length)c=arguments[1];else{do{if(b in g){c=g[b++];break}if(++b>=d)throw new TypeError;}while(1)}for(;b<d;)b in g&&(c=f.call(a,
c,g[b],b,g)),b++;return c})})();
var Zepto=function(){function a(a){return null==a?String(a):K[Q.call(a)]||"object"}function f(b){return"function"==a(b)}function g(a){return null!=a&&a==a.window}function d(a){return null!=a&&a.nodeType==a.DOCUMENT_NODE}function b(b){return"object"==a(b)}function c(a){return b(a)&&!g(a)&&a.__proto__==Object.prototype}function h(a){return a instanceof Array}function e(a){return"number"==typeof a.length}function j(a){return a.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,
"$1_$2").replace(/_/g,"-").toLowerCase()}function i(a){return a in F?F[a]:F[a]=RegExp("(^|\\s)"+a+"(\\s|$)")}function l(a){return"children"in a?x.call(a.children):q.map(a.childNodes,function(a){if(1==a.nodeType)return a})}function o(a,b,e){for(t in b)e&&(c(b[t])||h(b[t]))?(c(b[t])&&!c(a[t])&&(a[t]={}),h(b[t])&&!h(a[t])&&(a[t]=[]),o(a[t],b[t],e)):b[t]!==w&&(a[t]=b[t])}function p(a,b){return b===w?q(a):q(a).filter(b)}function n(a,b,e,c){return f(b)?b.call(a,e,c):b}function r(a,b){var e=a.className,
c=e&&e.baseVal!==w;if(b===w)return c?e.baseVal:e;c?e.baseVal=b:a.className=b}function s(a){var b;try{return a?"true"==a||("false"==a?!1:"null"==a?null:!isNaN(b=Number(a))?b:/^[\[\{]/.test(a)?q.parseJSON(a):a):a}catch(e){return a}}function u(a,b){b(a);for(var e in a.childNodes)u(a.childNodes[e],b)}var w,t,q,v,k=[],x=k.slice,D=k.filter,y=window.document,A={},F={},E=y.defaultView.getComputedStyle,B={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},G=/^\s*<(\w+|!)[^>]*>/,
H=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,C=/^(?:body|html)$/i,L="val css html text data width height offset".split(" "),I=y.createElement("table"),N=y.createElement("tr"),O={tr:y.createElement("tbody"),tbody:I,thead:I,tfoot:I,td:N,th:N,"*":y.createElement("div")},R=/complete|loaded|interactive/,S=/^\.([\w-]+)$/,T=/^#([\w-]*)$/,U=/^[\w-]+$/,K={},Q=K.toString,z={},M,J,P=y.createElement("div");z.matches=function(a,b){if(!a||1!==a.nodeType)return!1;var e=a.webkitMatchesSelector||
a.mozMatchesSelector||a.oMatchesSelector||a.matchesSelector;if(e)return e.call(a,b);var c;c=a.parentNode;(e=!c)&&(c=P).appendChild(a);c=~z.qsa(c,b).indexOf(a);e&&P.removeChild(a);return c};M=function(a){return a.replace(/-+(.)?/g,function(a,b){return b?b.toUpperCase():""})};J=function(a){return D.call(a,function(b,e){return a.indexOf(b)==e})};z.fragment=function(a,b,e){a.replace&&(a=a.replace(H,"<$1></$2>"));b===w&&(b=G.test(a)&&RegExp.$1);b in O||(b="*");var d,h=O[b];h.innerHTML=""+a;a=q.each(x.call(h.childNodes),
function(){h.removeChild(this)});c(e)&&(d=q(a),q.each(e,function(a,b){if(-1<L.indexOf(a))d[a](b);else d.attr(a,b)}));return a};z.Z=function(a,b){a=a||[];a.__proto__=q.fn;a.selector=b||"";return a};z.isZ=function(a){return a instanceof z.Z};z.init=function(a,e){if(a){if(f(a))return q(y).ready(a);if(z.isZ(a))return a;var d;if(h(a))d=D.call(a,function(a){return null!=a});else if(b(a))d=[c(a)?q.extend({},a):a],a=null;else if(G.test(a))d=z.fragment(a.trim(),RegExp.$1,e),a=null;else{if(e!==w)return q(e).find(a);
d=z.qsa(y,a)}return z.Z(d,a)}return z.Z()};q=function(a,b){return z.init(a,b)};q.extend=function(a){var b,e=x.call(arguments,1);"boolean"==typeof a&&(b=a,a=e.shift());e.forEach(function(e){o(a,e,b)});return a};z.qsa=function(a,b){var e;return d(a)&&T.test(b)?(e=a.getElementById(RegExp.$1))?[e]:[]:1!==a.nodeType&&9!==a.nodeType?[]:x.call(S.test(b)?a.getElementsByClassName(RegExp.$1):U.test(b)?a.getElementsByTagName(b):a.querySelectorAll(b))};q.contains=function(a,b){return a!==b&&a.contains(b)};q.type=
a;q.isFunction=f;q.isWindow=g;q.isArray=h;q.isPlainObject=c;q.isEmptyObject=function(a){for(var b in a)return!1;return!0};q.inArray=function(a,b,e){return k.indexOf.call(b,a,e)};q.camelCase=M;q.trim=function(a){return a.trim()};q.uuid=0;q.support={};q.expr={};q.map=function(a,b){var c,d=[],h;if(e(a))for(h=0;h<a.length;h++)c=b(a[h],h),null!=c&&d.push(c);else for(h in a)c=b(a[h],h),null!=c&&d.push(c);return 0<d.length?q.fn.concat.apply([],d):d};q.each=function(a,b){var c;if(e(a))for(c=0;c<a.length&&
!1!==b.call(a[c],c,a[c]);c++);else for(c in a)if(!1===b.call(a[c],c,a[c]))break;return a};q.grep=function(a,b){return D.call(a,b)};window.JSON&&(q.parseJSON=JSON.parse);q.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){K["[object "+b+"]"]=b.toLowerCase()});q.fn={forEach:k.forEach,reduce:k.reduce,push:k.push,sort:k.sort,indexOf:k.indexOf,concat:k.concat,map:function(a){return q(q.map(this,function(b,e){return a.call(b,e,b)}))},slice:function(){return q(x.apply(this,
arguments))},ready:function(a){R.test(y.readyState)?a(q):y.addEventListener("DOMContentLoaded",function(){a(q)},!1);return this},get:function(a){return a===w?x.call(this):this[0<=a?a:a+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(a){k.every.call(this,function(b,e){return!1!==a.call(b,e,b)});return this},filter:function(a){return f(a)?this.not(this.not(a)):
q(D.call(this,function(b){return z.matches(b,a)}))},add:function(a,b){return q(J(this.concat(q(a,b))))},is:function(a){return 0<this.length&&z.matches(this[0],a)},not:function(a){var b=[];if(f(a)&&a.call!==w)this.each(function(e){a.call(this,e)||b.push(this)});else{var c="string"==typeof a?this.filter(a):e(a)&&f(a.item)?x.call(a):q(a);this.forEach(function(a){0>c.indexOf(a)&&b.push(a)})}return q(b)},has:function(a){return this.filter(function(){return b(a)?q.contains(this,a):q(this).find(a).size()})},
eq:function(a){return-1===a?this.slice(a):this.slice(a,+a+1)},first:function(){var a=this[0];return a&&!b(a)?a:q(a)},last:function(){var a=this[this.length-1];return a&&!b(a)?a:q(a)},find:function(a){var b=this;return"object"==typeof a?q(a).filter(function(){var a=this;return k.some.call(b,function(b){return q.contains(b,a)})}):1==this.length?q(z.qsa(this[0],a)):this.map(function(){return z.qsa(this,a)})},closest:function(a,b){var e=this[0],c=!1;for("object"==typeof a&&(c=q(a));e&&!(c?0<=c.indexOf(e):
z.matches(e,a));)e=e!==b&&!d(e)&&e.parentNode;return q(e)},parents:function(a){for(var b=[],e=this;0<e.length;)e=q.map(e,function(a){if((a=a.parentNode)&&!d(a)&&0>b.indexOf(a))return b.push(a),a});return p(b,a)},parent:function(a){return p(J(this.pluck("parentNode")),a)},children:function(a){return p(this.map(function(){return l(this)}),a)},contents:function(){return this.map(function(){return x.call(this.childNodes)})},siblings:function(a){return p(this.map(function(a,b){return D.call(l(b.parentNode),
function(a){return a!==b})}),a)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(a){return q.map(this,function(b){return b[a]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=null);if("none"==E(this,"").getPropertyValue("display")){var a=this.style,b=this.nodeName,e,c;A[b]||(e=y.createElement(b),y.body.appendChild(e),c=E(e,"").getPropertyValue("display"),e.parentNode.removeChild(e),"none"==c&&(c="block"),A[b]=c);a.display=
A[b]}})},replaceWith:function(a){return this.before(a).remove()},wrap:function(a){var b=f(a);if(this[0]&&!b)var e=q(a).get(0),c=e.parentNode||1<this.length;return this.each(function(d){q(this).wrapAll(b?a.call(this,d):c?e.cloneNode(!0):e)})},wrapAll:function(a){if(this[0]){q(this[0]).before(a=q(a));for(var b;(b=a.children()).length;)a=b.first();q(a).append(this)}return this},wrapInner:function(a){var b=f(a);return this.each(function(e){var c=q(this),d=c.contents(),e=b?a.call(this,e):a;d.length?d.wrapAll(e):
c.append(e)})},unwrap:function(){this.parent().each(function(){q(this).replaceWith(q(this).children())});return this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(a){return this.each(function(){var b=q(this);(a===w?"none"==b.css("display"):a)?b.show():b.hide()})},prev:function(a){return q(this.pluck("previousElementSibling")).filter(a||"*")},next:function(a){return q(this.pluck("nextElementSibling")).filter(a||
"*")},html:function(a){return a===w?0<this.length?this[0].innerHTML:null:this.each(function(b){var e=this.innerHTML;q(this).empty().append(n(this,a,b,e))})},text:function(a){return a===w?0<this.length?this[0].textContent:null:this.each(function(){this.textContent=a})},attr:function(a,e){var c;return"string"==typeof a&&e===w?0==this.length||1!==this[0].nodeType?w:"value"==a&&"INPUT"==this[0].nodeName?this.val():!(c=this[0].getAttribute(a))&&a in this[0]?this[0][a]:c:this.each(function(c){if(1===this.nodeType)if(b(a))for(t in a){var c=
t,d=a[t];null==d?this.removeAttribute(c):this.setAttribute(c,d)}else c=n(this,e,c,this.getAttribute(a)),null==c?this.removeAttribute(a):this.setAttribute(a,c)})},removeAttr:function(a){return this.each(function(){1===this.nodeType&&this.removeAttribute(a)})},prop:function(a,b){return b===w?this[0]&&this[0][a]:this.each(function(e){this[a]=n(this,b,e,this[a])})},data:function(a,b){var e=this.attr("data-"+j(a),b);return null!==e?s(e):w},val:function(a){return a===w?this[0]&&(this[0].multiple?q(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):
this[0].value):this.each(function(b){this.value=n(this,a,b,this.value)})},offset:function(a){if(a)return this.each(function(b){var e=q(this),b=n(this,a,b,e.offset()),c=e.offsetParent().offset(),b={top:b.top-c.top,left:b.left-c.left};"static"==e.css("position")&&(b.position="relative");e.css(b)});if(0==this.length)return null;var b=this[0].getBoundingClientRect();return{left:b.left+window.pageXOffset,top:b.top+window.pageYOffset,width:Math.round(b.width),height:Math.round(b.height)}},css:function(b,
e){if(2>arguments.length&&"string"==typeof b)return this[0]&&(this[0].style[M(b)]||E(this[0],"").getPropertyValue(b));var c="";if("string"==a(b))!e&&0!==e?this.each(function(){this.style.removeProperty(j(b))}):c=j(b)+":"+("number"==typeof e&&!B[j(b)]?e+"px":e);else for(t in b)!b[t]&&0!==b[t]?this.each(function(){this.style.removeProperty(j(t))}):c+=j(t)+":"+("number"==typeof b[t]&&!B[j(t)]?b[t]+"px":b[t])+";";return this.each(function(){this.style.cssText+=";"+c})},index:function(a){return a?this.indexOf(q(a)[0]):
this.parent().children().indexOf(this[0])},hasClass:function(a){return k.some.call(this,function(a){return this.test(r(a))},i(a))},addClass:function(a){return this.each(function(b){v=[];var e=r(this);n(this,a,b,e).split(/\s+/g).forEach(function(a){q(this).hasClass(a)||v.push(a)},this);v.length&&r(this,e+(e?" ":"")+v.join(" "))})},removeClass:function(a){return this.each(function(b){if(a===w)return r(this,"");v=r(this);n(this,a,b,v).split(/\s+/g).forEach(function(a){v=v.replace(i(a)," ")});r(this,
v.trim())})},toggleClass:function(a,b){return this.each(function(e){var c=q(this);n(this,a,e,r(this)).split(/\s+/g).forEach(function(a){(b===w?!c.hasClass(a):b)?c.addClass(a):c.removeClass(a)})})},scrollTop:function(){if(this.length)return"scrollTop"in this[0]?this[0].scrollTop:this[0].scrollY},position:function(){if(this.length){var a=this[0],b=this.offsetParent(),e=this.offset(),c=C.test(b[0].nodeName)?{top:0,left:0}:b.offset();e.top-=parseFloat(q(a).css("margin-top"))||0;e.left-=parseFloat(q(a).css("margin-left"))||
0;c.top+=parseFloat(q(b[0]).css("border-top-width"))||0;c.left+=parseFloat(q(b[0]).css("border-left-width"))||0;return{top:e.top-c.top,left:e.left-c.left}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||y.body;a&&!C.test(a.nodeName)&&"static"==q(a).css("position");)a=a.offsetParent;return a})}};q.fn.detach=q.fn.remove;["width","height"].forEach(function(a){q.fn[a]=function(b){var e,c=this[0],h=a.replace(/./,function(a){return a[0].toUpperCase()});return b===w?g(c)?
c["inner"+h]:d(c)?c.documentElement["offset"+h]:(e=this.offset())&&e[a]:this.each(function(e){c=q(this);c.css(a,n(this,b,e,c[a]()))})}});["after","prepend","before","append"].forEach(function(b,e){var c=e%2;q.fn[b]=function(){var b,d=q.map(arguments,function(e){b=a(e);return"object"==b||"array"==b||null==e?e:z.fragment(e)}),h,g=1<this.length;return 1>d.length?this:this.each(function(a,b){h=c?b:b.parentNode;b=0==e?b.nextSibling:1==e?b.firstChild:2==e?b:null;d.forEach(function(a){if(g)a=a.cloneNode(!0);
else if(!h)return q(a).remove();u(h.insertBefore(a,b),function(a){null!=a.nodeName&&("SCRIPT"===a.nodeName.toUpperCase()&&(!a.type||"text/javascript"===a.type)&&!a.src)&&window.eval.call(window,a.innerHTML)})})})};q.fn[c?b+"To":"insert"+(e?"Before":"After")]=function(a){q(a)[b](this);return this}});z.Z.prototype=q.fn;z.uniq=J;z.deserializeValue=s;q.zepto=z;return q}();window.Zepto=Zepto;"$"in window||(window.$=Zepto);
(function(a){function f(a){var d=this.os={},b=this.browser={},c=a.match(/WebKit\/([\d.]+)/),h=a.match(/(Android)\s+([\d.]+)/),e=a.match(/(iPad).*OS\s([\d_]+)/),f=!e&&a.match(/(iPhone\sOS)\s([\d_]+)/),i=a.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),l=i&&a.match(/TouchPad/),o=a.match(/Kindle\/([\d.]+)/),p=a.match(/Silk\/([\d._]+)/),n=a.match(/(BlackBerry).*Version\/([\d.]+)/),r=a.match(/(BB10).*Version\/([\d.]+)/),s=a.match(/(RIM\sTablet\sOS)\s([\d.]+)/),u=a.match(/PlayBook/),w=a.match(/Chrome\/([\d.]+)/)||
a.match(/CriOS\/([\d.]+)/),t=a.match(/Firefox\/([\d.]+)/);if(b.webkit=!!c)b.version=c[1];h&&(d.android=!0,d.version=h[2]);f&&(d.ios=d.iphone=!0,d.version=f[2].replace(/_/g,"."));e&&(d.ios=d.ipad=!0,d.version=e[2].replace(/_/g,"."));i&&(d.webos=!0,d.version=i[2]);l&&(d.touchpad=!0);n&&(d.blackberry=!0,d.version=n[2]);r&&(d.bb10=!0,d.version=r[2]);s&&(d.rimtabletos=!0,d.version=s[2]);u&&(b.playbook=!0);o&&(d.kindle=!0,d.version=o[1]);p&&(b.silk=!0,b.version=p[1]);!p&&(d.android&&a.match(/Kindle Fire/))&&
(b.silk=!0);w&&(b.chrome=!0,b.version=w[1]);t&&(b.firefox=!0,b.version=t[1]);d.tablet=!(!e&&!u&&!(h&&!a.match(/Mobile/)||t&&a.match(/Tablet/)));d.phone=!(d.tablet||!h&&!f&&!i&&!n&&!r&&!(w&&a.match(/Android/)||w&&a.match(/CriOS\/([\d.]+)/)||t&&a.match(/Mobile/)))}f.call(a,navigator.userAgent);a.__detect=f})(Zepto);
(function(a){function f(a){return a._zid||(a._zid=i++)}function g(a,b,e,c){b=d(b);if(b.ns)var h=RegExp("(?:^| )"+b.ns.replace(" "," .* ?")+"(?: |$)");return(j[f(a)]||[]).filter(function(a){return a&&(!b.e||a.e==b.e)&&(!b.ns||h.test(a.ns))&&(!e||f(a.fn)===f(e))&&(!c||a.sel==c)})}function d(a){a=(""+a).split(".");return{e:a[0],ns:a.slice(1).sort().join(" ")}}function b(b,e,c){"string"!=a.type(b)?a.each(b,c):b.split(/\s/).forEach(function(a){c(a,e)})}function c(e,c,h,g,i,l){var r=f(e),n=j[r]||(j[r]=
[]);b(c,h,function(b,c){var h=d(b);h.fn=c;h.sel=g;h.e in o&&(c=function(b){var e=b.relatedTarget;if(!e||e!==this&&!a.contains(this,e))return h.fn.apply(this,arguments)});h.del=i&&i(c,b);var f=h.del||c;h.proxy=function(a){var b=f.apply(e,[a].concat(a.data));!1===b&&(a.preventDefault(),a.stopPropagation());return b};h.i=n.length;n.push(h);e.addEventListener(o[h.e]||h.e,h.proxy,h.del&&("focus"==h.e||"blur"==h.e)||!!l)})}function h(a,e,c,d,h){var i=f(a);b(e||"",c,function(b,e){g(a,b,e,d).forEach(function(b){delete j[i][b.i];
a.removeEventListener(o[b.e]||b.e,b.proxy,b.del&&("focus"==b.e||"blur"==b.e)||!!h)})})}function e(b){var e,c={originalEvent:b};for(e in b)!r.test(e)&&void 0!==b[e]&&(c[e]=b[e]);a.each(s,function(a,e){c[a]=function(){this[e]=p;return b[a].apply(b,arguments)};c[e]=n});return c}var j={},i=1,l={},o={mouseenter:"mouseover",mouseleave:"mouseout"};l.click=l.mousedown=l.mouseup=l.mousemove="MouseEvents";a.event={add:c,remove:h};a.proxy=function(b,e){if(a.isFunction(b)){var c=function(){return b.apply(e,arguments)};
c._zid=f(b);return c}if("string"==typeof e)return a.proxy(b[e],b);throw new TypeError("expected function");};a.fn.bind=function(a,b){return this.each(function(){c(this,a,b)})};a.fn.unbind=function(a,b){return this.each(function(){h(this,a,b)})};a.fn.one=function(a,b){return this.each(function(e,d){c(this,a,b,null,function(a,b){return function(){var e=a.apply(d,arguments);h(d,b,a);return e}})})};var p=function(){return!0},n=function(){return!1},r=/^([A-Z]|layer[XY]$)/,s={preventDefault:"isDefaultPrevented",
stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};a.fn.delegate=function(b,d,h){return this.each(function(g,f){c(f,d,h,b,function(c){return function(d){var h,g=a(d.target).closest(b,f).get(0);if(g)return h=a.extend(e(d),{currentTarget:g,liveFired:f}),c.apply(g,[h].concat([].slice.call(arguments,1)))}})})};a.fn.undelegate=function(a,b,e){return this.each(function(){h(this,b,e,a)})};a.fn.live=function(b,e){a(document.body).delegate(this.selector,b,e);return this};
a.fn.die=function(b,e){a(document.body).undelegate(this.selector,b,e);return this};a.fn.on=function(b,e,c){return!e||a.isFunction(e)?this.bind(b,e||c):this.delegate(e,b,c)};a.fn.off=function(b,e,c){return!e||a.isFunction(e)?this.unbind(b,e||c):this.undelegate(e,b,c)};a.fn.trigger=function(b,e){if("string"==typeof b||a.isPlainObject(b))b=a.Event(b);var c=b;if(!("defaultPrevented"in c)){c.defaultPrevented=!1;var d=c.preventDefault;c.preventDefault=function(){this.defaultPrevented=!0;d.call(this)}}b.data=
e;return this.each(function(){"dispatchEvent"in this&&this.dispatchEvent(b)})};a.fn.triggerHandler=function(b,c){var d,h;this.each(function(f,i){d=e("string"==typeof b?a.Event(b):b);d.data=c;d.target=i;a.each(g(i,b.type||b),function(a,b){h=b.proxy(d);if(d.isImmediatePropagationStopped())return!1})});return h};"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(b){a.fn[b]=
function(a){return a?this.bind(b,a):this.trigger(b)}});["focus","blur"].forEach(function(b){a.fn[b]=function(a){a?this.bind(b,a):this.each(function(){try{this[b]()}catch(a){}});return this}});a.Event=function(a,b){"string"!=typeof a&&(b=a,a=b.type);var e=document.createEvent(l[a]||"Events"),c=!0;if(b)for(var d in b)"bubbles"==d?c=!!b[d]:e[d]=b[d];e.initEvent(a,c,!0,null,null,null,null,null,null,null,null,null,null,null,null);e.isDefaultPrevented=function(){return this.defaultPrevented};return e}})(Zepto);
(function(a){function f(b,e,c,d){if(b.global)return b=e||p,c=a.Event(c),a(b).trigger(c,d),!c.defaultPrevented}function g(a,b){var e=b.context;if(!1===b.beforeSend.call(e,a,b)||!1===f(b,e,"ajaxBeforeSend",[a,b]))return!1;f(b,e,"ajaxSend",[a,b])}function d(a,b,e){var d=e.context;e.success.call(d,a,"success",b);f(e,d,"ajaxSuccess",[b,e,a]);c("success",b,e)}function b(a,b,e,d){var h=d.context;d.error.call(h,e,b,a);f(d,h,"ajaxError",[e,d,a]);c(b,e,d)}function c(b,e,c){var d=c.context;c.complete.call(d,
e,b);f(c,d,"ajaxComplete",[e,c]);c.global&&!--a.active&&f(c,null,"ajaxStop")}function h(){}function e(a){a&&(a=a.split(";",2)[0]);return a&&(a==q?"html":a==t?"json":u.test(a)?"script":w.test(a)&&"xml")||"text"}function j(a,b){return(a+"&"+b).replace(/[&?]{1,2}/,"?")}function i(b,e,c,d){var h=!a.isFunction(e);return{url:b,data:h?e:void 0,success:!h?e:a.isFunction(c)?c:void 0,dataType:h?d||c:c}}function l(b,e,c,d){var h,g=a.isArray(e);a.each(e,function(e,f){h=a.type(f);d&&(e=c?d:d+"["+(g?"":e)+"]");
!d&&g?b.add(f.name,f.value):"array"==h||!c&&"object"==h?l(b,f,c,e):b.add(e,f)})}var o=0,p=window.document,n,r,s=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,u=/^(?:text|application)\/javascript/i,w=/^(?:text|application)\/xml/i,t="application/json",q="text/html",v=/^\s*$/;a.active=0;a.ajaxJSONP=function(e){if(!("type"in e))return a.ajax(e);var c="jsonp"+ ++o,f=p.createElement("script"),i=function(){clearTimeout(r);a(f).remove();delete window[c]},j=function(a){i();if(!a||"timeout"==a)window[c]=
h;b(null,a||"abort",l,e)},l={abort:j},r;if(!1===g(l,e))return j("abort"),!1;window[c]=function(a){i();d(a,l,e)};f.onerror=function(){j("error")};f.src=e.url.replace(/=\?/,"="+c);a("head").append(f);0<e.timeout&&(r=setTimeout(function(){j("timeout")},e.timeout));return l};a.ajaxSettings={type:"GET",beforeSend:h,success:h,error:h,complete:h,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript",json:t,xml:"application/xml, text/xml",
html:q,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0};a.ajax=function(c){var i=a.extend({},c||{});for(n in a.ajaxSettings)void 0===i[n]&&(i[n]=a.ajaxSettings[n]);i.global&&0===a.active++&&f(i,null,"ajaxStart");i.crossDomain||(i.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(i.url)&&RegExp.$2!=window.location.host);i.url||(i.url=window.location.toString());i.processData&&(i.data&&"string"!=a.type(i.data))&&(i.data=a.param(i.data,i.traditional));if(i.data&&(!i.type||"GET"==i.type.toUpperCase()))i.url=
j(i.url,i.data);!1===i.cache&&(i.url=j(i.url,"_="+Date.now()));var l=i.dataType,c=/=\?/.test(i.url);if("jsonp"==l||c)return c||(i.url=j(i.url,"callback=?")),a.ajaxJSONP(i);var c=i.accepts[l],o={},p=/^([\w-]+:)\/\//.test(i.url)?RegExp.$1:window.location.protocol,s=i.xhr(),k;i.crossDomain||(o["X-Requested-With"]="XMLHttpRequest");c&&(o.Accept=c,-1<c.indexOf(",")&&(c=c.split(",",2)[0]),s.overrideMimeType&&s.overrideMimeType(c));if(i.contentType||!1!==i.contentType&&i.data&&"GET"!=i.type.toUpperCase())o["Content-Type"]=
i.contentType||"application/x-www-form-urlencoded";i.headers=a.extend(o,i.headers||{});s.onreadystatechange=function(){if(4==s.readyState){s.onreadystatechange=h;clearTimeout(k);var c,g=!1;if(200<=s.status&&300>s.status||304==s.status||0==s.status&&"file:"==p){l=l||e(s.getResponseHeader("content-type"));c=s.responseText;try{"script"==l?(0,eval)(c):"xml"==l?c=s.responseXML:"json"==l&&(c=v.test(c)?null:a.parseJSON(c))}catch(f){g=f}g?b(g,"parsererror",s,i):d(c,s,i)}else b(null,s.status?"error":"abort",
s,i)}};s.open(i.type,i.url,"async"in i?i.async:!0);for(r in i.headers)s.setRequestHeader(r,i.headers[r]);if(!1===g(s,i))return s.abort(),!1;0<i.timeout&&(k=setTimeout(function(){s.onreadystatechange=h;s.abort();b(null,"timeout",s,i)},i.timeout));s.send(i.data?i.data:null);return s};a.get=function(b,e,c,d){return a.ajax(i.apply(null,arguments))};a.post=function(b,e,c,d){var h=i.apply(null,arguments);h.type="POST";return a.ajax(h)};a.getJSON=function(b,e,c){var d=i.apply(null,arguments);d.dataType=
"json";return a.ajax(d)};a.fn.load=function(b,e,c){if(!this.length)return this;var d=this,h=b.split(/\s/),g,b=i(b,e,c),f=b.success;1<h.length&&(b.url=h[0],g=h[1]);b.success=function(b){d.html(g?a("<div>").html(b.replace(s,"")).find(g):b);f&&f.apply(d,arguments)};a.ajax(b);return this};var k=encodeURIComponent;a.param=function(a,b){var e=[];e.add=function(a,b){this.push(k(a)+"="+k(b))};l(e,a,b);return e.join("&").replace(/%20/g,"+")}})(Zepto);
(function(a){a.fn.serializeArray=function(){var f=[],g;a(Array.prototype.slice.call(this.get(0).elements)).each(function(){g=a(this);var d=g.attr("type");"fieldset"!=this.nodeName.toLowerCase()&&(!this.disabled&&"submit"!=d&&"reset"!=d&&"button"!=d&&("radio"!=d&&"checkbox"!=d||this.checked))&&f.push({name:g.attr("name"),value:g.val()})});return f};a.fn.serialize=function(){var a=[];this.serializeArray().forEach(function(g){a.push(encodeURIComponent(g.name)+"="+encodeURIComponent(g.value))});return a.join("&")};
a.fn.submit=function(f){f?this.bind("submit",f):this.length&&(f=a.Event("submit"),this.eq(0).trigger(f),f.defaultPrevented||this.get(0).submit());return this}})(Zepto);
(function(a,f){function g(a){return a.toLowerCase()}var d="",b,c=window.document.createElement("div"),h=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,e,j,i,l,o,p,n,r={};a.each({Webkit:"webkit",Moz:"",O:"o",ms:"MS"},function(a,e){if(c.style[a+"TransitionProperty"]!==f)return d="-"+g(a)+"-",b=e,!1});e=d+"transform";r[j=d+"transition-property"]=r[i=d+"transition-duration"]=r[l=d+"transition-timing-function"]=r[o=d+"animation-name"]=r[p=d+"animation-duration"]=r[n=d+"animation-timing-function"]=
"";a.fx={off:b===f&&c.style.transitionProperty===f,speeds:{_default:400,fast:200,slow:600},cssPrefix:d,transitionEnd:b?b+"TransitionEnd":g("TransitionEnd"),animationEnd:b?b+"AnimationEnd":g("AnimationEnd")};a.fn.animate=function(b,e,c,d){a.isPlainObject(e)&&(c=e.easing,d=e.complete,e=e.duration);e&&(e=("number"==typeof e?e:a.fx.speeds[e]||a.fx.speeds._default)/1E3);return this.anim(b,e,c,d)};a.fn.anim=function(b,c,d,t){var q,v={},k,x="",D=this,y,A=a.fx.transitionEnd;c===f&&(c=0.4);a.fx.off&&(c=0);
if("string"==typeof b)v[o]=b,v[p]=c+"s",v[n]=d||"linear",A=a.fx.animationEnd;else{k=[];for(q in b)h.test(q)?x+=q+"("+b[q]+") ":(v[q]=b[q],k.push(g(q.replace(/([a-z])([A-Z])/,"$1-$2"))));x&&(v[e]=x,k.push(e));0<c&&"object"===typeof b&&(v[j]=k.join(", "),v[i]=c+"s",v[l]=d||"linear")}y=function(b){if("undefined"!==typeof b){if(b.target!==b.currentTarget)return;a(b.target).unbind(A,y)}a(this).css(r);t&&t.call(this)};0<c&&this.bind(A,y);this.size()&&this.get(0).clientLeft;this.css(v);0>=c&&setTimeout(function(){D.each(function(){y.call(this)})},
0);return this};c=null})(Zepto);
(function(a){function f(){i=null;c.last&&(c.el.trigger("longTap"),c={})}function g(){h&&clearTimeout(h);e&&clearTimeout(e);j&&clearTimeout(j);i&&clearTimeout(i);h=e=j=i=null;c={}}function d(a){return("touch"==a.pointerType||a.pointerType==a.MSPOINTER_TYPE_TOUCH)&&a.isPrimary}function b(a,b){return a.type=="pointer"+b||a.type.toLowerCase()=="mspointer"+b}var c={},h,e,j,i,l;a(document).ready(function(){var o,p,n=0,r=0,s,u;"MSGesture"in window&&(l=new MSGesture,l.target=document.body);a(document).bind("MSGestureEnd",
function(a){if(a=1<a.velocityX?"Right":-1>a.velocityX?"Left":1<a.velocityY?"Down":-1>a.velocityY?"Up":null)c.el.trigger("swipe"),c.el.trigger("swipe"+a)}).on("touchstart MSPointerDown pointerdown",function(e){if(!(u=b(e,"down"))||d(e))s=u?e:e.touches[0],e.touches&&(1===e.touches.length&&c.x2)&&(c.x2=void 0,c.y2=void 0),o=Date.now(),p=o-(c.last||o),c.el=a("tagName"in s.target?s.target:s.target.parentNode),h&&clearTimeout(h),c.x1=s.pageX,c.y1=s.pageY,0<p&&250>=p&&(c.isDoubleTap=!0),c.last=o,i=setTimeout(f,
750),l&&u&&l.addPointer(e.pointerId)}).on("touchmove MSPointerMove pointermove",function(a){if(!(u=b(a,"move"))||d(a))s=u?a:a.touches[0],i&&clearTimeout(i),i=null,c.x2=s.pageX,c.y2=s.pageY,n+=Math.abs(c.x1-c.x2),r+=Math.abs(c.y1-c.y2)}).on("touchend MSPointerUp pointerup",function(f){if(!(u=b(f,"up"))||d(f))i&&clearTimeout(i),i=null,c.x2&&30<Math.abs(c.x1-c.x2)||c.y2&&30<Math.abs(c.y1-c.y2)?j=setTimeout(function(){c.el.trigger("swipe");c.el.trigger("swipe"+(Math.abs(c.x1-c.x2)>=Math.abs(c.y1-c.y2)?
0<c.x1-c.x2?"Left":"Right":0<c.y1-c.y2?"Up":"Down"));c={}},0):"last"in c&&(30>n&&30>r?e=setTimeout(function(){var b=a.Event("tap");b.cancelTouch=g;c.el.trigger(b);c.isDoubleTap?(c.el&&c.el.trigger("doubleTap"),c={}):h=setTimeout(function(){h=null;c.el&&c.el.trigger("singleTap");c={}},250)},0):c={}),n=r=0}).on("touchcancel MSPointerCancel pointercancel",g)});"swipe swipeLeft swipeRight swipeUp swipeDown doubleTap tap singleTap longTap".split(" ").forEach(function(b){a.fn[b]=function(a){return this.on(b,
a)}})})(Zepto);
(function(){var a=this,f=a._,g={},d=Array.prototype,b=Object.prototype,c=d.push,h=d.slice,e=d.concat,j=b.toString,i=b.hasOwnProperty,l=d.forEach,o=d.map,p=d.reduce,n=d.reduceRight,r=d.filter,s=d.every,u=d.some,w=d.indexOf,t=d.lastIndexOf,b=Array.isArray,q=Object.keys,v=Function.prototype.bind,k=function(a){if(a instanceof k)return a;if(!(this instanceof k))return new k(a);this._wrapped=a};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=k),exports._=
k):a._=k;k.VERSION="1.4.4";var x=k.each=k.forEach=function(a,b,e){if(null!=a)if(l&&a.forEach===l)a.forEach(b,e);else if(a.length===+a.length)for(var c=0,d=a.length;c<d&&b.call(e,a[c],c,a)!==g;c++);else for(c in a)if(k.has(a,c)&&b.call(e,a[c],c,a)===g)break};k.map=k.collect=function(a,b,e){var c=[];if(null==a)return c;if(o&&a.map===o)return a.map(b,e);x(a,function(a,d,h){c[c.length]=b.call(e,a,d,h)});return c};k.reduce=k.foldl=k.inject=function(a,b,e,c){var d=2<arguments.length;null==a&&(a=[]);if(p&&
a.reduce===p)return c&&(b=k.bind(b,c)),d?a.reduce(b,e):a.reduce(b);x(a,function(a,h,g){d?e=b.call(c,e,a,h,g):(e=a,d=!0)});if(!d)throw new TypeError("Reduce of empty array with no initial value");return e};k.reduceRight=k.foldr=function(a,b,e,c){var d=2<arguments.length;null==a&&(a=[]);if(n&&a.reduceRight===n)return c&&(b=k.bind(b,c)),d?a.reduceRight(b,e):a.reduceRight(b);var h=a.length;if(h!==+h)var g=k.keys(a),h=g.length;x(a,function(f,i,j){i=g?g[--h]:--h;d?e=b.call(c,e,a[i],i,j):(e=a[i],d=!0)});
if(!d)throw new TypeError("Reduce of empty array with no initial value");return e};k.find=k.detect=function(a,b,e){var c;D(a,function(a,d,h){if(b.call(e,a,d,h))return c=a,!0});return c};k.filter=k.select=function(a,b,e){var c=[];if(null==a)return c;if(r&&a.filter===r)return a.filter(b,e);x(a,function(a,d,h){b.call(e,a,d,h)&&(c[c.length]=a)});return c};k.reject=function(a,b,e){return k.filter(a,function(a,c,d){return!b.call(e,a,c,d)},e)};k.every=k.all=function(a,b,e){b||(b=k.identity);var c=!0;if(null==
a)return c;if(s&&a.every===s)return a.every(b,e);x(a,function(a,d,h){if(!(c=c&&b.call(e,a,d,h)))return g});return!!c};var D=k.some=k.any=function(a,b,e){b||(b=k.identity);var c=!1;if(null==a)return c;if(u&&a.some===u)return a.some(b,e);x(a,function(a,d,h){if(c||(c=b.call(e,a,d,h)))return g});return!!c};k.contains=k.include=function(a,b){return null==a?!1:w&&a.indexOf===w?-1!=a.indexOf(b):D(a,function(a){return a===b})};k.invoke=function(a,b){var e=h.call(arguments,2),c=k.isFunction(b);return k.map(a,
function(a){return(c?b:a[b]).apply(a,e)})};k.pluck=function(a,b){return k.map(a,function(a){return a[b]})};k.where=function(a,b,e){return k.isEmpty(b)?e?null:[]:k[e?"find":"filter"](a,function(a){for(var e in b)if(b[e]!==a[e])return!1;return!0})};k.findWhere=function(a,b){return k.where(a,b,!0)};k.max=function(a,b,e){if(!b&&k.isArray(a)&&a[0]===+a[0]&&65535>a.length)return Math.max.apply(Math,a);if(!b&&k.isEmpty(a))return-Infinity;var c={computed:-Infinity,value:-Infinity};x(a,function(a,d,h){d=b?
b.call(e,a,d,h):a;d>=c.computed&&(c={value:a,computed:d})});return c.value};k.min=function(a,b,e){if(!b&&k.isArray(a)&&a[0]===+a[0]&&65535>a.length)return Math.min.apply(Math,a);if(!b&&k.isEmpty(a))return Infinity;var c={computed:Infinity,value:Infinity};x(a,function(a,d,h){d=b?b.call(e,a,d,h):a;d<c.computed&&(c={value:a,computed:d})});return c.value};k.shuffle=function(a){var b,e=0,c=[];x(a,function(a){b=k.random(e++);c[e-1]=c[b];c[b]=a});return c};var y=function(a){return k.isFunction(a)?a:function(b){return b[a]}};
k.sortBy=function(a,b,e){var c=y(b);return k.pluck(k.map(a,function(a,b,d){return{value:a,index:b,criteria:c.call(e,a,b,d)}}).sort(function(a,b){var e=a.criteria,c=b.criteria;if(e!==c){if(e>c||void 0===e)return 1;if(e<c||void 0===c)return-1}return a.index<b.index?-1:1}),"value")};var A=function(a,b,e,c){var d={},h=y(b||k.identity);x(a,function(b,g){var f=h.call(e,b,g,a);c(d,f,b)});return d};k.groupBy=function(a,b,e){return A(a,b,e,function(a,b,e){(k.has(a,b)?a[b]:a[b]=[]).push(e)})};k.countBy=function(a,
b,e){return A(a,b,e,function(a,b){k.has(a,b)||(a[b]=0);a[b]++})};k.sortedIndex=function(a,b,e,c){for(var e=null==e?k.identity:y(e),b=e.call(c,b),d=0,h=a.length;d<h;){var g=d+h>>>1;e.call(c,a[g])<b?d=g+1:h=g}return d};k.toArray=function(a){return!a?[]:k.isArray(a)?h.call(a):a.length===+a.length?k.map(a,k.identity):k.values(a)};k.size=function(a){return null==a?0:a.length===+a.length?a.length:k.keys(a).length};k.first=k.head=k.take=function(a,b,e){return null==a?void 0:null!=b&&!e?h.call(a,0,b):a[0]};
k.initial=function(a,b,e){return h.call(a,0,a.length-(null==b||e?1:b))};k.last=function(a,b,e){return null==a?void 0:null!=b&&!e?h.call(a,Math.max(a.length-b,0)):a[a.length-1]};k.rest=k.tail=k.drop=function(a,b,e){return h.call(a,null==b||e?1:b)};k.compact=function(a){return k.filter(a,k.identity)};var F=function(a,b,e){x(a,function(a){k.isArray(a)?b?c.apply(e,a):F(a,b,e):e.push(a)});return e};k.flatten=function(a,b){return F(a,b,[])};k.without=function(a){return k.difference(a,h.call(arguments,1))};
k.uniq=k.unique=function(a,b,e,c){k.isFunction(b)&&(c=e,e=b,b=!1);var e=e?k.map(a,e,c):a,d=[],h=[];x(e,function(e,c){if(b?!c||h[h.length-1]!==e:!k.contains(h,e))h.push(e),d.push(a[c])});return d};k.union=function(){return k.uniq(e.apply(d,arguments))};k.intersection=function(a){var b=h.call(arguments,1);return k.filter(k.uniq(a),function(a){return k.every(b,function(b){return 0<=k.indexOf(b,a)})})};k.difference=function(a){var b=e.apply(d,h.call(arguments,1));return k.filter(a,function(a){return!k.contains(b,
a)})};k.zip=function(){for(var a=h.call(arguments),b=k.max(k.pluck(a,"length")),e=Array(b),c=0;c<b;c++)e[c]=k.pluck(a,""+c);return e};k.object=function(a,b){if(null==a)return{};for(var e={},c=0,d=a.length;c<d;c++)b?e[a[c]]=b[c]:e[a[c][0]]=a[c][1];return e};k.indexOf=function(a,b,e){if(null==a)return-1;var c=0,d=a.length;if(e)if("number"==typeof e)c=0>e?Math.max(0,d+e):e;else return c=k.sortedIndex(a,b),a[c]===b?c:-1;if(w&&a.indexOf===w)return a.indexOf(b,e);for(;c<d;c++)if(a[c]===b)return c;return-1};
k.lastIndexOf=function(a,b,e){if(null==a)return-1;var c=null!=e;if(t&&a.lastIndexOf===t)return c?a.lastIndexOf(b,e):a.lastIndexOf(b);for(e=c?e:a.length;e--;)if(a[e]===b)return e;return-1};k.range=function(a,b,e){1>=arguments.length&&(b=a||0,a=0);for(var e=arguments[2]||1,c=Math.max(Math.ceil((b-a)/e),0),d=0,h=Array(c);d<c;)h[d++]=a,a+=e;return h};k.bind=function(a,b){if(a.bind===v&&v)return v.apply(a,h.call(arguments,1));var e=h.call(arguments,2);return function(){return a.apply(b,e.concat(h.call(arguments)))}};
k.partial=function(a){var b=h.call(arguments,1);return function(){return a.apply(this,b.concat(h.call(arguments)))}};k.bindAll=function(a){var b=h.call(arguments,1);0===b.length&&(b=k.functions(a));x(b,function(b){a[b]=k.bind(a[b],a)});return a};k.memoize=function(a,b){var e={};b||(b=k.identity);return function(){var c=b.apply(this,arguments);return k.has(e,c)?e[c]:e[c]=a.apply(this,arguments)}};k.delay=function(a,b){var e=h.call(arguments,2);return setTimeout(function(){return a.apply(null,e)},b)};
k.defer=function(a){return k.delay.apply(k,[a,1].concat(h.call(arguments,1)))};k.throttle=function(a,b){var e,c,d,h,g=0,f=function(){g=new Date;d=null;h=a.apply(e,c)};return function(){var i=new Date,j=b-(i-g);e=this;c=arguments;0>=j?(clearTimeout(d),d=null,g=i,h=a.apply(e,c)):d||(d=setTimeout(f,j));return h}};k.debounce=function(a,b,e){var c,d;return function(){var h=this,g=arguments,f=e&&!c;clearTimeout(c);c=setTimeout(function(){c=null;e||(d=a.apply(h,g))},b);f&&(d=a.apply(h,g));return d}};k.once=
function(a){var b=!1,e;return function(){if(b)return e;b=!0;e=a.apply(this,arguments);a=null;return e}};k.wrap=function(a,b){return function(){var e=[a];c.apply(e,arguments);return b.apply(this,e)}};k.compose=function(){var a=arguments;return function(){for(var b=arguments,e=a.length-1;0<=e;e--)b=[a[e].apply(this,b)];return b[0]}};k.after=function(a,b){return 0>=a?b():function(){if(1>--a)return b.apply(this,arguments)}};k.keys=q||function(a){if(a!==Object(a))throw new TypeError("Invalid object");
var b=[],e;for(e in a)k.has(a,e)&&(b[b.length]=e);return b};k.values=function(a){var b=[],e;for(e in a)k.has(a,e)&&b.push(a[e]);return b};k.pairs=function(a){var b=[],e;for(e in a)k.has(a,e)&&b.push([e,a[e]]);return b};k.invert=function(a){var b={},e;for(e in a)k.has(a,e)&&(b[a[e]]=e);return b};k.functions=k.methods=function(a){var b=[],e;for(e in a)k.isFunction(a[e])&&b.push(e);return b.sort()};k.extend=function(a){x(h.call(arguments,1),function(b){if(b)for(var e in b)a[e]=b[e]});return a};k.pick=
function(a){var b={},c=e.apply(d,h.call(arguments,1));x(c,function(e){e in a&&(b[e]=a[e])});return b};k.omit=function(a){var b={},c=e.apply(d,h.call(arguments,1)),g;for(g in a)k.contains(c,g)||(b[g]=a[g]);return b};k.defaults=function(a){x(h.call(arguments,1),function(b){if(b)for(var e in b)null==a[e]&&(a[e]=b[e])});return a};k.clone=function(a){return!k.isObject(a)?a:k.isArray(a)?a.slice():k.extend({},a)};k.tap=function(a,b){b(a);return a};var E=function(a,b,e,c){if(a===b)return 0!==a||1/a==1/b;
if(null==a||null==b)return a===b;a instanceof k&&(a=a._wrapped);b instanceof k&&(b=b._wrapped);var d=j.call(a);if(d!=j.call(b))return!1;switch(d){case "[object String]":return a==String(b);case "[object Number]":return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case "[object Date]":case "[object Boolean]":return+a==+b;case "[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if("object"!=typeof a||"object"!=typeof b)return!1;for(var h=e.length;h--;)if(e[h]==
a)return c[h]==b;e.push(a);c.push(b);var h=0,g=!0;if("[object Array]"==d){if(h=a.length,g=h==b.length)for(;h--&&(g=E(a[h],b[h],e,c)););}else{var d=a.constructor,f=b.constructor;if(d!==f&&(!k.isFunction(d)||!(d instanceof d&&k.isFunction(f)&&f instanceof f)))return!1;for(var i in a)if(k.has(a,i)&&(h++,!(g=k.has(b,i)&&E(a[i],b[i],e,c))))break;if(g){for(i in b)if(k.has(b,i)&&!h--)break;g=!h}}e.pop();c.pop();return g};k.isEqual=function(a,b){return E(a,b,[],[])};k.isEmpty=function(a){if(null==a)return!0;
if(k.isArray(a)||k.isString(a))return 0===a.length;for(var b in a)if(k.has(a,b))return!1;return!0};k.isElement=function(a){return!!(a&&1===a.nodeType)};k.isArray=b||function(a){return"[object Array]"==j.call(a)};k.isObject=function(a){return a===Object(a)};x("Arguments Function String Number Date RegExp".split(" "),function(a){k["is"+a]=function(b){return j.call(b)=="[object "+a+"]"}});k.isArguments(arguments)||(k.isArguments=function(a){return!(!a||!k.has(a,"callee"))});"function"!==typeof/./&&(k.isFunction=
function(a){return"function"===typeof a});k.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))};k.isNaN=function(a){return k.isNumber(a)&&a!=+a};k.isBoolean=function(a){return!0===a||!1===a||"[object Boolean]"==j.call(a)};k.isNull=function(a){return null===a};k.isUndefined=function(a){return void 0===a};k.has=function(a,b){return i.call(a,b)};k.noConflict=function(){a._=f;return this};k.identity=function(a){return a};k.times=function(a,b,e){for(var c=Array(a),d=0;d<a;d++)c[d]=b.call(e,
d);return c};k.random=function(a,b){null==b&&(b=a,a=0);return a+Math.floor(Math.random()*(b-a+1))};var B={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};B.unescape=k.invert(B.escape);var G={escape:RegExp("["+k.keys(B.escape).join("")+"]","g"),unescape:RegExp("("+k.keys(B.unescape).join("|")+")","g")};k.each(["escape","unescape"],function(a){k[a]=function(b){return null==b?"":(""+b).replace(G[a],function(b){return B[a][b]})}});k.result=function(a,b){if(null==a)return null;
var e=a[b];return k.isFunction(e)?e.call(a):e};k.mixin=function(a){x(k.functions(a),function(b){var e=k[b]=a[b];k.prototype[b]=function(){var a=[this._wrapped];c.apply(a,arguments);a=e.apply(k,a);return this._chain?k(a).chain():a}})};var H=0;k.uniqueId=function(a){var b=++H+"";return a?a+b:b};k.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var C=/(.)^/,L={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},I=/\\|'|\r|\n|\t|\u2028|\u2029/g;
k.template=function(a,b,e){var c,e=k.defaults({},e,k.templateSettings),d=RegExp([(e.escape||C).source,(e.interpolate||C).source,(e.evaluate||C).source].join("|")+"|$","g"),h=0,g="__p+='";a.replace(d,function(b,e,c,d,f){g+=a.slice(h,f).replace(I,function(a){return"\\"+L[a]});e&&(g+="'+\n((__t=("+e+"))==null?'':_.escape(__t))+\n'");c&&(g+="'+\n((__t=("+c+"))==null?'':__t)+\n'");d&&(g+="';\n"+d+"\n__p+='");h=f+b.length;return b});g+="';\n";e.variable||(g="with(obj||{}){\n"+g+"}\n");g="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+
g+"return __p;\n";try{c=new Function(e.variable||"obj","_",g)}catch(f){throw f.source=g,f;}if(b)return c(b,k);b=function(a){return c.call(this,a,k)};b.source="function("+(e.variable||"obj")+"){\n"+g+"}";return b};k.chain=function(a){return k(a).chain()};k.mixin(k);x("pop push reverse shift sort splice unshift".split(" "),function(a){var b=d[a];k.prototype[a]=function(){var e=this._wrapped;b.apply(e,arguments);("shift"==a||"splice"==a)&&0===e.length&&delete e[0];return this._chain?k(e).chain():e}});
x(["concat","join","slice"],function(a){var b=d[a];k.prototype[a]=function(){var a=b.apply(this._wrapped,arguments);return this._chain?k(a).chain():a}});k.extend(k.prototype,{chain:function(){this._chain=!0;return this},value:function(){return this._wrapped}})}).call(this);var SCALE_FACTOR=0.25,MAX_WIDTH=400,MIN_WIDTH=320;(function(a){a=a(document.body);var f=a.width();0===f&&(f=parseInt($this.css("width"),10));0!==f&&a.css("font-size",Math.max(Math.min(f,MAX_WIDTH),MIN_WIDTH)*SCALE_FACTOR+"%")})(Zepto);
Badoo=Badoo||{};(function(a){a.Utils=a.Utils||{};a.Utils.Logger={getLogger:function(){return{debug:function(a){return console.debug?console.debug(a):console.log(a)},info:function(a){return console.info?console.info(a):console.log(a)},warn:function(a){return console.warn?console.warn(a):console.log(a)},error:function(a){return console.error?console.error(a):console.log(a)}}},config:function(){},dump:function(){},isProductionLogger:!0}})(Badoo);
(function(a,f){function g(a){if(""===c)return a;a=a.charAt(0).toUpperCase()+a.substr(1);return c+a}var d=Math,b=f.createElement("div").style,c;a:{for(var h=["t","webkitT","MozT","msT","OT"],e,j=0,i=h.length;j<i;j++)if(e=h[j]+"ransform",e in b){c=h[j].substr(0,h[j].length-1);break a}c=!1}var l=c?"-"+c.toLowerCase()+"-":"",o=g("transform"),p=g("transitionProperty"),n=g("transitionDuration"),r=g("transformOrigin"),s=g("transitionTimingFunction"),u=g("transitionDelay"),w=/android/gi.test(navigator.appVersion),
t=/iphone|ipad/gi.test(navigator.appVersion),h=/hp-tablet/gi.test(navigator.appVersion),q=g("perspective")in b,v="ontouchstart"in a&&!h,k=!1!==c,x=g("transition")in b,D="onorientationchange"in a?"orientationchange":"resize",y=v?"touchstart":"mousedown",A=v?"touchmove":"mousemove",F=v?"touchend":"mouseup",E=v?"touchcancel":"mouseup",B;B=!1===c?!1:{"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"otransitionend",ms:"MSTransitionEnd"}[c];var G=a.requestAnimationFrame||a.webkitRequestAnimationFrame||
a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||function(a){return setTimeout(a,1)},H=a.cancelRequestAnimationFrame||a.webkitCancelAnimationFrame||a.webkitCancelRequestAnimationFrame||a.mozCancelRequestAnimationFrame||a.oCancelRequestAnimationFrame||a.msCancelRequestAnimationFrame||clearTimeout,C=q?" translateZ(0)":"",h=function(b,e){var c=this,d;c.wrapper="object"==typeof b?b:f.getElementById(b);c.wrapper.style.overflow="hidden";c.scroller=c.wrapper.children[0];c.options=
{hScroll:!0,vScroll:!0,x:0,y:0,bounce:!0,bounceLock:!1,momentum:!0,lockDirection:!0,useTransform:!0,useTransition:!1,topOffset:0,checkDOMChanges:!1,handleClick:!0,hScrollbar:!0,vScrollbar:!0,fixedScrollbar:w,hideScrollbar:t,fadeScrollbar:t&&q,scrollbarClass:"",zoom:!1,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:"scroll",snap:!1,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(a){a.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,
onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null,deceleration:t?0.003:6E-4};for(d in e)c.options[d]=e[d];c.x=c.options.x;c.y=c.options.y;c.options.useTransform=k&&c.options.useTransform;c.options.hScrollbar=c.options.hScroll&&c.options.hScrollbar;c.options.vScrollbar=c.options.vScroll&&c.options.vScrollbar;c.options.zoom=c.options.useTransform&&c.options.zoom;c.options.useTransition=x&&c.options.useTransition;c.options.zoom&&w&&(C="");c.scroller.style[p]=
c.options.useTransform?l+"transform":"top left";c.scroller.style[n]="0";c.scroller.style[r]="0 0";c.options.useTransition&&(c.scroller.style[s]="cubic-bezier(0.33,0.66,0.66,1)");c.options.useTransform?c.scroller.style[o]="translate("+c.x+"px,"+c.y+"px)"+C:c.scroller.style.cssText+=";position:absolute;top:"+c.y+"px;left:"+c.x+"px";c.options.useTransition&&(c.options.fixedScrollbar=!0);c.refresh();c._bind(D,a);c._bind(y);!v&&"none"!=c.options.wheelAction&&(c._bind("DOMMouseScroll"),c._bind("mousewheel"));
c.options.checkDOMChanges&&(c.checkDOMTime=setInterval(function(){c._checkDOMChanges()},500))};h.prototype={enabled:!0,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(a){switch(a.type){case y:if(!v&&0!==a.button)break;this._start(a);break;case A:this._move(a);break;case F:case E:this._end(a);break;case D:this._resize();break;case "DOMMouseScroll":case "mousewheel":this._wheel(a);break;case B:this._transitionEnd(a)}},_checkDOMChanges:function(){!this.moved&&
(!this.zoomed&&!(this.animating||this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale))&&this.refresh()},_scrollbar:function(a){var b;this[a+"Scrollbar"]?(this[a+"ScrollbarWrapper"]||(b=f.createElement("div"),this.options.scrollbarClass?b.className=this.options.scrollbarClass+a.toUpperCase():b.style.cssText="position:absolute;z-index:100;"+("h"==a?"height:7px;bottom:1px;left:2px;right:"+(this.vScrollbar?"7":"2")+"px":"width:7px;bottom:"+(this.hScrollbar?
"7":"2")+"px;top:2px;right:1px"),b.style.cssText+=";pointer-events:none;"+l+"transition-property:opacity;"+l+"transition-duration:"+(this.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(this.options.hideScrollbar?"0":"1"),this.wrapper.appendChild(b),this[a+"ScrollbarWrapper"]=b,b=f.createElement("div"),this.options.scrollbarClass||(b.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);"+l+"background-clip:padding-box;"+l+"box-sizing:border-box;"+
("h"==a?"height:100%":"width:100%")+";"+l+"border-radius:3px;border-radius:3px"),b.style.cssText+=";pointer-events:none;"+l+"transition-property:"+l+"transform;"+l+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);"+l+"transition-duration:0;"+l+"transform: translate(0,0)"+C,this.options.useTransition&&(b.style.cssText+=";"+l+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)"),this[a+"ScrollbarWrapper"].appendChild(b),this[a+"ScrollbarIndicator"]=b),"h"==a?(this.hScrollbarSize=this.hScrollbarWrapper.clientWidth,
this.hScrollbarIndicatorSize=d.max(d.round(this.hScrollbarSize*this.hScrollbarSize/this.scrollerW),8),this.hScrollbarIndicator.style.width=this.hScrollbarIndicatorSize+"px",this.hScrollbarMaxScroll=this.hScrollbarSize-this.hScrollbarIndicatorSize,this.hScrollbarProp=this.hScrollbarMaxScroll/this.maxScrollX):(this.vScrollbarSize=this.vScrollbarWrapper.clientHeight,this.vScrollbarIndicatorSize=d.max(d.round(this.vScrollbarSize*this.vScrollbarSize/this.scrollerH),8),this.vScrollbarIndicator.style.height=
this.vScrollbarIndicatorSize+"px",this.vScrollbarMaxScroll=this.vScrollbarSize-this.vScrollbarIndicatorSize,this.vScrollbarProp=this.vScrollbarMaxScroll/this.maxScrollY),this._scrollbarPos(a,!0)):this[a+"ScrollbarWrapper"]&&(k&&(this[a+"ScrollbarIndicator"].style[o]=""),this[a+"ScrollbarWrapper"].parentNode.removeChild(this[a+"ScrollbarWrapper"]),this[a+"ScrollbarWrapper"]=null,this[a+"ScrollbarIndicator"]=null)},_resize:function(){var a=this;setTimeout(function(){a.refresh()},w?200:0)},_pos:function(a,
b){this.zoomed||(a=this.hScroll?a:0,b=this.vScroll?b:0,this.options.useTransform?this.scroller.style[o]="translate("+a+"px,"+b+"px) scale("+this.scale+")"+C:(a=d.round(a),b=d.round(b),this.scroller.style.left=a+"px",this.scroller.style.top=b+"px"),this.x=a,this.y=b,this._scrollbarPos("h"),this._scrollbarPos("v"))},_scrollbarPos:function(a,b){var e="h"==a?this.x:this.y;this[a+"Scrollbar"]&&(e*=this[a+"ScrollbarProp"],0>e?(this.options.fixedScrollbar||(e=this[a+"ScrollbarIndicatorSize"]+d.round(3*e),
8>e&&(e=8),this[a+"ScrollbarIndicator"].style["h"==a?"width":"height"]=e+"px"),e=0):e>this[a+"ScrollbarMaxScroll"]&&(this.options.fixedScrollbar?e=this[a+"ScrollbarMaxScroll"]:(e=this[a+"ScrollbarIndicatorSize"]-d.round(3*(e-this[a+"ScrollbarMaxScroll"])),8>e&&(e=8),this[a+"ScrollbarIndicator"].style["h"==a?"width":"height"]=e+"px",e=this[a+"ScrollbarMaxScroll"]+(this[a+"ScrollbarIndicatorSize"]-e))),this[a+"ScrollbarWrapper"].style[u]="0",this[a+"ScrollbarWrapper"].style.opacity=b&&this.options.hideScrollbar?
"0":"1",this[a+"ScrollbarIndicator"].style[o]="translate("+("h"==a?e+"px,0)":"0,"+e+"px)")+C)},_start:function(b){var e=v?b.touches[0]:b,c,h;if(!(e.target.className&&-1!==e.target.className.indexOf("needsclick"))&&!("SELECT"===e.target.tagName||"INPUT"===e.target.tagName||"TEXTAREA"===e.target.tagName)&&this.enabled){this.options.onBeforeScrollStart&&this.options.onBeforeScrollStart.call(this,b);(this.options.useTransition||this.options.zoom)&&this._transitionTime(0);this.zoomed=this.animating=this.moved=
!1;this.dirY=this.dirX=this.absDistY=this.absDistX=this.distY=this.distX=0;this.options.zoom&&(v&&1<b.touches.length)&&(h=d.abs(b.touches[0].pageX-b.touches[1].pageX),c=d.abs(b.touches[0].pageY-b.touches[1].pageY),this.touchesDistStart=d.sqrt(h*h+c*c),this.originX=d.abs(b.touches[0].pageX+b.touches[1].pageX-2*this.wrapperOffsetLeft)/2-this.x,this.originY=d.abs(b.touches[0].pageY+b.touches[1].pageY-2*this.wrapperOffsetTop)/2-this.y,this.options.onZoomStart&&this.options.onZoomStart.call(this,b));if(this.options.momentum&&
(this.options.useTransform?(c=getComputedStyle(this.scroller,null)[o].replace(/[^0-9\-.,]/g,"").split(","),h=+(c[12]||c[4]),c=+(c[13]||c[5])):(h=+getComputedStyle(this.scroller,null).left.replace(/[^0-9-]/g,""),c=+getComputedStyle(this.scroller,null).top.replace(/[^0-9-]/g,"")),h!=this.x||c!=this.y))this.options.useTransition?this._unbind(B):H(this.aniTime),this.steps=[],this._pos(h,c),this.options.onScrollEnd&&this.options.onScrollEnd.call(this);this.absStartX=this.x;this.absStartY=this.y;this.startX=
this.x;this.startY=this.y;this.pointX=e.pageX;this.pointY=e.pageY;this.startTime=b.timeStamp||Date.now();this.options.onScrollStart&&this.options.onScrollStart.call(this,b);this._bind(A,a);this._bind(F,a);this._bind(E,a)}},_move:function(a){var b=v?a.touches[0]:a,e=b.pageX-this.pointX,c=b.pageY-this.pointY,h=this.x+e,g=this.y+c,f=a.timeStamp||Date.now();this.options.onBeforeScrollMove&&this.options.onBeforeScrollMove.call(this,a);if(this.options.zoom&&v&&1<a.touches.length)h=d.abs(a.touches[0].pageX-
a.touches[1].pageX),g=d.abs(a.touches[0].pageY-a.touches[1].pageY),this.touchesDist=d.sqrt(h*h+g*g),this.zoomed=!0,b=1/this.touchesDistStart*this.touchesDist*this.scale,b<this.options.zoomMin?b=0.5*this.options.zoomMin*Math.pow(2,b/this.options.zoomMin):b>this.options.zoomMax&&(b=2*this.options.zoomMax*Math.pow(0.5,this.options.zoomMax/b)),this.lastScale=b/this.scale,h=this.originX-this.originX*this.lastScale+this.x,g=this.originY-this.originY*this.lastScale+this.y,this.scroller.style[o]="translate("+
h+"px,"+g+"px) scale("+b+")"+C,this.options.onZoom&&this.options.onZoom.call(this,a);else{this.pointX=b.pageX;this.pointY=b.pageY;if(0<h||h<this.maxScrollX)h=this.options.bounce?this.x+e/2:0<=h||0<=this.maxScrollX?0:this.maxScrollX;if(g>this.minScrollY||g<this.maxScrollY)g=this.options.bounce?this.y+c/2:g>=this.minScrollY||0<=this.maxScrollY?this.minScrollY:this.maxScrollY;this.distX+=e;this.distY+=c;this.absDistX=d.abs(this.distX);this.absDistY=d.abs(this.distY);6>this.absDistX&&6>this.absDistY||
(this.options.lockDirection&&(this.absDistX>this.absDistY+5?(g=this.y,c=0):this.absDistY>this.absDistX+5&&(h=this.x,e=0)),this.moved=!0,this._pos(h,g),this.dirX=0<e?-1:0>e?1:0,this.dirY=0<c?-1:0>c?1:0,300<f-this.startTime&&(this.startTime=f,this.startX=this.x,this.startY=this.y),this.options.onScrollMove&&this.options.onScrollMove.call(this,a))}},_end:function(b){if(!(v&&0!==b.touches.length)){var e=this,c=v?b.changedTouches[0]:b,h,g,i={dist:0,time:0},j={dist:0,time:0},l=(b.timeStamp||Date.now())-
e.startTime,r=e.x,p=e.y;e._unbind(A,a);e._unbind(F,a);e._unbind(E,a);e.options.onBeforeScrollEnd&&e.options.onBeforeScrollEnd.call(e,b);if(e.zoomed)r=e.scale*e.lastScale,r=Math.max(e.options.zoomMin,r),r=Math.min(e.options.zoomMax,r),e.lastScale=r/e.scale,e.scale=r,e.x=e.originX-e.originX*e.lastScale+e.x,e.y=e.originY-e.originY*e.lastScale+e.y,e.scroller.style[n]="200ms",e.scroller.style[o]="translate("+e.x+"px,"+e.y+"px) scale("+e.scale+")"+C,e.zoomed=!1,e.refresh(),e.options.onZoomEnd&&e.options.onZoomEnd.call(e,
b);else{if(e.moved){if(300>l&&e.options.momentum){i=r?e._momentum(r-e.startX,l,-e.x,e.scrollerW-e.wrapperW+e.x,e.options.bounce?e.wrapperW:0):i;j=p?e._momentum(p-e.startY,l,-e.y,0>e.maxScrollY?e.scrollerH-e.wrapperH+e.y-e.minScrollY:0,e.options.bounce?e.wrapperH:0):j;r=e.x+i.dist;p=e.y+j.dist;if(0<e.x&&0<r||e.x<e.maxScrollX&&r<e.maxScrollX)i={dist:0,time:0};if(e.y>e.minScrollY&&p>e.minScrollY||e.y<e.maxScrollY&&p<e.maxScrollY)j={dist:0,time:0}}i.dist||j.dist?(i=d.max(d.max(i.time,j.time),10),e.options.snap&&
(j=r-e.absStartX,l=p-e.absStartY,d.abs(j)<e.options.snapThreshold&&d.abs(l)<e.options.snapThreshold?e.scrollTo(e.absStartX,e.absStartY,200):(j=e._snap(r,p),r=j.x,p=j.y,i=d.max(j.time,i))),e.scrollTo(d.round(r),d.round(p),i)):e.options.snap?(j=r-e.absStartX,l=p-e.absStartY,d.abs(j)<e.options.snapThreshold&&d.abs(l)<e.options.snapThreshold?e.scrollTo(e.absStartX,e.absStartY,200):(j=e._snap(e.x,e.y),(j.x!=e.x||j.y!=e.y)&&e.scrollTo(j.x,j.y,j.time))):e._resetPos(200)}else v&&(e.doubleTapTimer&&e.options.zoom?
(clearTimeout(e.doubleTapTimer),e.doubleTapTimer=null,e.options.onZoomStart&&e.options.onZoomStart.call(e,b),e.zoom(e.pointX,e.pointY,1==e.scale?e.options.doubleTapZoom:1),e.options.onZoomEnd&&setTimeout(function(){e.options.onZoomEnd.call(e,b)},200)):this.options.handleClick&&(e.doubleTapTimer=setTimeout(function(){e.doubleTapTimer=null;for(h=c.target;1!=h.nodeType;)h=h.parentNode;"SELECT"!=h.tagName&&("INPUT"!=h.tagName&&"TEXTAREA"!=h.tagName)&&(g=f.createEvent("MouseEvents"),g.initMouseEvent("click",
!0,!0,b.view,1,c.screenX,c.screenY,c.clientX,c.clientY,b.ctrlKey,b.altKey,b.shiftKey,b.metaKey,0,null),g._fake=!0,h.dispatchEvent(g))},e.options.zoom?250:0))),e._resetPos(400);e.options.onTouchEnd&&e.options.onTouchEnd.call(e,b)}}},_resetPos:function(a){var b=0<=this.x?0:this.x<this.maxScrollX?this.maxScrollX:this.x,e=this.y>=this.minScrollY||0<this.maxScrollY?this.minScrollY:this.y<this.maxScrollY?this.maxScrollY:this.y;b==this.x&&e==this.y?(this.moved&&(this.moved=!1,this.options.onScrollEnd&&this.options.onScrollEnd.call(this)),
this.hScrollbar&&this.options.hideScrollbar&&("webkit"==c&&(this.hScrollbarWrapper.style[u]="300ms"),this.hScrollbarWrapper.style.opacity="0"),this.vScrollbar&&this.options.hideScrollbar&&("webkit"==c&&(this.vScrollbarWrapper.style[u]="300ms"),this.vScrollbarWrapper.style.opacity="0")):this.scrollTo(b,e,a||0)},_wheel:function(a){var b=this,e,c;if("wheelDeltaX"in a)e=a.wheelDeltaX/12,c=a.wheelDeltaY/12;else if("wheelDelta"in a)e=c=a.wheelDelta/12;else if("detail"in a)e=c=3*-a.detail;else return;"zoom"==
b.options.wheelAction?(c=b.scale*Math.pow(2,1/3*(c?c/Math.abs(c):0)),c<b.options.zoomMin&&(c=b.options.zoomMin),c>b.options.zoomMax&&(c=b.options.zoomMax),c!=b.scale&&(!b.wheelZoomCount&&b.options.onZoomStart&&b.options.onZoomStart.call(b,a),b.wheelZoomCount++,b.zoom(a.pageX,a.pageY,c,400),setTimeout(function(){b.wheelZoomCount--;!b.wheelZoomCount&&b.options.onZoomEnd&&b.options.onZoomEnd.call(b,a)},400))):(e=b.x+e,c=b.y+c,0<e?e=0:e<b.maxScrollX&&(e=b.maxScrollX),c>b.minScrollY?c=b.minScrollY:c<b.maxScrollY&&
(c=b.maxScrollY),0>b.maxScrollY&&b.scrollTo(e,c,0))},_transitionEnd:function(a){a.target==this.scroller&&(this._unbind(B),this._startAni())},_startAni:function(){var a=this,b=a.x,e=a.y,c=Date.now(),h,g,f;a.animating||(a.steps.length?(h=a.steps.shift(),h.x==b&&h.y==e&&(h.time=0),a.animating=!0,a.moved=!0,a.options.useTransition?(a._transitionTime(h.time),a._pos(h.x,h.y),a.animating=!1,h.time?a._bind(B):a._resetPos(0)):(f=function(){var i=Date.now(),j;i>=c+h.time?(a._pos(h.x,h.y),a.animating=!1,a.options.onAnimationEnd&&
a.options.onAnimationEnd.call(a),a._startAni()):(i=(i-c)/h.time-1,g=d.sqrt(1-i*i),i=(h.x-b)*g+b,j=(h.y-e)*g+e,a._pos(i,j),a.animating&&(a.aniTime=G(f)))},f())):a._resetPos(400))},_transitionTime:function(a){a+="ms";this.scroller.style[n]=a;this.hScrollbar&&(this.hScrollbarIndicator.style[n]=a);this.vScrollbar&&(this.vScrollbarIndicator.style[n]=a)},_momentum:function(a,b,e,c,h){var g=this.options.deceleration,b=d.abs(a)/b,f=b*b/(2*g);0<a&&f>e?(e+=h/(6/(f/b*g)),b=b*e/f,f=e):0>a&&f>c&&(c+=h/(6/(f/b*
g)),b=b*c/f,f=c);return{dist:f*(0>a?-1:1),time:d.round(b/g)}},_offset:function(a){for(var b=-a.offsetLeft,e=-a.offsetTop;a=a.offsetParent;)b-=a.offsetLeft,e-=a.offsetTop;a!=this.wrapper&&(b*=this.scale,e*=this.scale);return{left:b,top:e}},_snap:function(a,b){var e,c,h;h=this.pagesX.length-1;e=0;for(c=this.pagesX.length;e<c;e++)if(a>=this.pagesX[e]){h=e;break}h==this.currPageX&&(0<h&&0>this.dirX)&&h--;a=this.pagesX[h];c=(c=d.abs(a-this.pagesX[this.currPageX]))?500*(d.abs(this.x-a)/c):0;this.currPageX=
h;h=this.pagesY.length-1;for(e=0;e<h;e++)if(b>=this.pagesY[e]){h=e;break}h==this.currPageY&&(0<h&&0>this.dirY)&&h--;b=this.pagesY[h];e=(e=d.abs(b-this.pagesY[this.currPageY]))?500*(d.abs(this.y-b)/e):0;this.currPageY=h;h=d.round(d.max(c,e))||200;return{x:a,y:b,time:h}},_bind:function(a,b,e){(b||this.scroller).addEventListener(a,this,!!e)},_unbind:function(a,b,e){(b||this.scroller).removeEventListener(a,this,!!e)},destroy:function(){this.scroller.style[o]="";this.vScrollbar=this.hScrollbar=!1;this._scrollbar("h");
this._scrollbar("v");this._unbind(D,a);this._unbind(y);this._unbind(A,a);this._unbind(F,a);this._unbind(E,a);this.options.hasTouch||(this._unbind("DOMMouseScroll"),this._unbind("mousewheel"));this.options.useTransition&&this._unbind(B);this.options.checkDOMChanges&&clearInterval(this.checkDOMTime);this.options.onDestroy&&this.options.onDestroy.call(this)},refresh:function(){var a,b,e,c=0;b=0;this.scale<this.options.zoomMin&&(this.scale=this.options.zoomMin);this.wrapperW=this.wrapper.clientWidth||
1;this.wrapperH=this.wrapper.clientHeight||1;this.minScrollY=-this.options.topOffset||0;this.scrollerW=d.round(this.scroller.offsetWidth*this.scale);this.scrollerH=d.round((this.scroller.offsetHeight+this.minScrollY)*this.scale);this.maxScrollX=this.wrapperW-this.scrollerW;this.maxScrollY=this.wrapperH-this.scrollerH+this.minScrollY;this.dirY=this.dirX=0;this.options.onRefresh&&this.options.onRefresh.call(this);this.hScroll=this.options.hScroll&&0>this.maxScrollX;this.vScroll=this.options.vScroll&&
(!this.options.bounceLock&&!this.hScroll||this.scrollerH>this.wrapperH);this.hScrollbar=this.hScroll&&this.options.hScrollbar;this.vScrollbar=this.vScroll&&this.options.vScrollbar&&this.scrollerH>this.wrapperH;a=this._offset(this.wrapper);this.wrapperOffsetLeft=-a.left;this.wrapperOffsetTop=-a.top;if("string"==typeof this.options.snap){this.pagesX=[];this.pagesY=[];e=this.scroller.querySelectorAll(this.options.snap);a=0;for(b=e.length;a<b;a++)c=this._offset(e[a]),c.left+=this.wrapperOffsetLeft,c.top+=
this.wrapperOffsetTop,this.pagesX[a]=c.left<this.maxScrollX?this.maxScrollX:c.left*this.scale,this.pagesY[a]=c.top<this.maxScrollY?this.maxScrollY:c.top*this.scale}else if(this.options.snap){for(this.pagesX=[];c>=this.maxScrollX;)this.pagesX[b]=c,c-=this.wrapperW,b++;this.maxScrollX%this.wrapperW&&(this.pagesX[this.pagesX.length]=this.maxScrollX-this.pagesX[this.pagesX.length-1]+this.pagesX[this.pagesX.length-1]);b=c=0;for(this.pagesY=[];c>=this.maxScrollY;)this.pagesY[b]=c,c-=this.wrapperH,b++;this.maxScrollY%
this.wrapperH&&(this.pagesY[this.pagesY.length]=this.maxScrollY-this.pagesY[this.pagesY.length-1]+this.pagesY[this.pagesY.length-1])}this._scrollbar("h");this._scrollbar("v");this.zoomed||(this.scroller.style[n]="0",this._resetPos(400))},scrollTo:function(a,b,e,c){var d=a;this.stop();d.length||(d=[{x:a,y:b,time:e,relative:c}]);a=0;for(b=d.length;a<b;a++)d[a].relative&&(d[a].x=this.x-d[a].x,d[a].y=this.y-d[a].y),this.steps.push({x:d[a].x,y:d[a].y,time:d[a].time||0});this._startAni()},scrollToElement:function(a,
b){var e;if(a=a.nodeType?a:this.scroller.querySelector(a))e=this._offset(a),e.left+=this.wrapperOffsetLeft,e.top+=this.wrapperOffsetTop,e.left=0<e.left?0:e.left<this.maxScrollX?this.maxScrollX:e.left,e.top=e.top>this.minScrollY?this.minScrollY:e.top<this.maxScrollY?this.maxScrollY:e.top,b=void 0===b?d.max(2*d.abs(e.left),2*d.abs(e.top)):b,this.scrollTo(e.left,e.top,b)},scrollToPage:function(a,b,e){e=void 0===e?400:e;this.options.onScrollStart&&this.options.onScrollStart.call(this);this.options.snap?
(a="next"==a?this.currPageX+1:"prev"==a?this.currPageX-1:a,b="next"==b?this.currPageY+1:"prev"==b?this.currPageY-1:b,a=0>a?0:a>this.pagesX.length-1?this.pagesX.length-1:a,b=0>b?0:b>this.pagesY.length-1?this.pagesY.length-1:b,this.currPageX=a,this.currPageY=b,a=this.pagesX[a],b=this.pagesY[b]):(a*=-this.wrapperW,b*=-this.wrapperH,a<this.maxScrollX&&(a=this.maxScrollX),b<this.maxScrollY&&(b=this.maxScrollY));this.scrollTo(a,b,e)},disable:function(){this.stop();this._resetPos(0);this.enabled=!1;this._unbind(A,
a);this._unbind(F,a);this._unbind(E,a)},enable:function(){this.enabled=!0},stop:function(){this.options.useTransition?this._unbind(B):H(this.aniTime);this.steps=[];this.animating=this.moved=!1},zoom:function(a,b,e,c){var d=e/this.scale;this.options.useTransform&&(this.zoomed=!0,c=void 0===c?200:c,a=a-this.wrapperOffsetLeft-this.x,b=b-this.wrapperOffsetTop-this.y,this.x=a-a*d+this.x,this.y=b-b*d+this.y,this.scale=e,this.refresh(),this.x=0<this.x?0:this.x<this.maxScrollX?this.maxScrollX:this.x,this.y=
this.y>this.minScrollY?this.minScrollY:this.y<this.maxScrollY?this.maxScrollY:this.y,this.scroller.style[n]=c+"ms",this.scroller.style[o]="translate("+this.x+"px,"+this.y+"px) scale("+e+")"+C,this.zoomed=!1)},isReady:function(){return!this.moved&&!this.zoomed&&!this.animating}};b=null;"undefined"!==typeof exports?exports.iScroll=h:a.iScroll=h})(window,document);var dust={};function getGlobal(){return function(){return this.dust}.call(null)}
(function(a){function f(a,b,e){this.stack=a;this.global=b;this.blocks=e}function g(b,e,c,d){this.tail=e;this.isObject=!a.isArray(b)&&b&&"object"===typeof b;this.head=b;this.index=c;this.of=d}function d(a){this.head=new c(this);this.callback=a;this.out=""}function b(){this.head=new c(this)}function c(a,b,e){this.root=a;this.next=b;this.data="";this.flushable=!1;this.taps=e}function h(a,b){this.head=a;this.tail=b}a.cache={};a.register=function(b,e){b&&(a.cache[b]=e)};a.render=function(b,e,c){c=(new d(c)).head;
a.load(b,c,f.wrap(e)).end()};a.stream=function(e,c){var d=new b;a.nextTick(function(){a.load(e,d.head,f.wrap(c)).end()});return d};a.renderSource=function(b,e,c){return a.compileFn(b)(e,c)};a.compileFn=function(e,c){var h=a.loadSource(a.compile(e,c));return function(e,c){var g=c?new d(c):new b;a.nextTick(function(){h(g.head,f.wrap(e)).end()});return g}};a.load=function(b,e,c){var d=a.cache[b];return d?d(e,c):a.onLoad?e.map(function(e){a.onLoad(b,function(d,h){if(d)return e.setError(d);a.cache[b]||
a.loadSource(a.compile(h,b));a.cache[b](e,c).end()})}):e.setError(Error("Template Not Found: "+b))};a.loadSource=function(a){return eval(a)};a.isArray=Array.isArray?Array.isArray:function(a){return"[object Array]"==Object.prototype.toString.call(a)};var e;e="undefined"!==typeof process?process.nextTick:function(a){setTimeout(a,0)};a.nextTick=e;a.isEmpty=function(b){return a.isArray(b)&&!b.length?!0:0===b?!1:!b};a.filter=function(b,e,c){if(c)for(var d=0,h=c.length;d<h;d++){var g=c[d];"s"===g?e=null:
"function"===typeof a.filters[g]&&(b=a.filters[g](b))}e&&(b=a.filters[e](b));return b};a.filters={h:function(b){return a.escapeHtml(b)},j:function(b){return a.escapeJs(b)},u:encodeURI,uc:encodeURIComponent,js:function(a){return!JSON?a:JSON.stringify(a)},jp:function(a){return!JSON?a:JSON.parse(a)}};a.makeBase=function(a){return new f(new g,a)};f.wrap=function(a){return a instanceof f?a:new f(new g(a))};f.prototype.get=function(a){for(var b=this.stack,e;b;){if(b.isObject&&(e=b.head[a],void 0!==e))return e;
b=b.tail}return this.global?this.global[a]:void 0};f.prototype.getPath=function(a,b){var e=this.stack,c=b.length;if(a&&0===c)return e.head;for(var e=e.head,d=0;e&&d<c;)e=e[b[d]],d++;return e};f.prototype.push=function(a,b,e){return new f(new g(a,this.stack,b,e),this.global,this.blocks)};f.prototype.rebase=function(a){return new f(new g(a),this.global,this.blocks)};f.prototype.current=function(){return this.stack.head};f.prototype.getBlock=function(a,b,e){"function"===typeof a&&(a=a(b,e).data,b.data=
"");if(b=this.blocks)for(var e=b.length,c;e--;)if(c=b[e][a])return c};f.prototype.shiftBlocks=function(a){var b=this.blocks;return a?(a=b?b.concat([a]):[a],new f(this.stack,this.global,a)):this};d.prototype.flush=function(){for(var a=this.head;a;){if(a.flushable)this.out+=a.data;else{a.error&&(this.callback(a.error),this.flush=function(){});return}this.head=a=a.next}this.callback(null,this.out)};b.prototype.flush=function(){for(var a=this.head;a;){if(a.flushable)this.emit("data",a.data);else{a.error&&
(this.emit("error",a.error),this.flush=function(){});return}this.head=a=a.next}this.emit("end")};b.prototype.emit=function(a,b){if(!this.events)return!1;var e=this.events[a];if(!e)return!1;if("function"==typeof e)e(b);else for(var e=e.slice(0),c=0,d=e.length;c<d;c++)e[c](b)};b.prototype.on=function(a,b){this.events||(this.events={});this.events[a]?"function"===typeof this.events[a]?this.events[a]=[this.events[a],b]:this.events[a].push(b):this.events[a]=b;return this};b.prototype.pipe=function(a){this.on("data",
function(b){a.write(b,"utf8")}).on("end",function(){a.end()}).on("error",function(b){a.error(b)});return this};c.prototype.write=function(a){var b=this.taps;b&&(a=b.go(a));this.data+=a;return this};c.prototype.end=function(a){a&&this.write(a);this.flushable=!0;this.root.flush();return this};c.prototype.map=function(a){var b=new c(this.root,this.next,this.taps),e=new c(this.root,b,this.taps);this.next=e;this.flushable=!0;a(e);return b};c.prototype.tap=function(a){var b=this.taps;this.taps=b?b.push(a):
new h(a);return this};c.prototype.untap=function(){this.taps=this.taps.tail;return this};c.prototype.render=function(a,b){return a(this,b)};c.prototype.reference=function(b,e,d,h){return"function"===typeof b&&(b.isFunction=!0,b=b.apply(e.current(),[this,e,null,{auto:d,filters:h}]),b instanceof c)?b:a.isEmpty(b)?this:this.write(a.filter(b,d,h))};c.prototype.section=function(b,e,d,h){if("function"===typeof b&&(b=b.apply(e.current(),[this,e,d,h]),b instanceof c))return b;var g=d.block,d=d["else"];h&&
(e=e.push(h));if(a.isArray(b)){if(g){var h=b.length,f=this;if(0<h){e.stack.head&&(e.stack.head.$len=h);for(d=0;d<h;d++)e.stack.head&&(e.stack.head.$idx=d),f=g(f,e.push(b[d],d,h));e.stack.head&&(e.stack.head.$idx=void 0,e.stack.head.$len=void 0);return f}if(d)return d(this,e)}}else if(!0===b){if(g)return g(this,e)}else if(b||0===b){if(g)return g(this,e.push(b))}else if(d)return d(this,e);return this};c.prototype.exists=function(b,e,c){var d=c.block,c=c["else"];if(a.isEmpty(b)){if(c)return c(this,e)}else if(d)return d(this,
e);return this};c.prototype.notexists=function(b,e,c){var d=c.block,c=c["else"];if(a.isEmpty(b)){if(d)return d(this,e)}else if(c)return c(this,e);return this};c.prototype.block=function(a,b,e){e=e.block;a&&(e=a);return e?e(this,b):this};c.prototype.partial=function(b,e,c){var d;c?(d=a.makeBase(e.global),d.blocks=e.blocks,e.stack&&e.stack.tail&&(d.stack=e.stack.tail),d=d.push(c),d=d.push(e.stack.head)):d=e;return"function"===typeof b?this.capture(b,d,function(b,e){a.load(b,e,d).end()}):a.load(b,this,
d)};c.prototype.helper=function(b,e,c,d){if(a.helpers[b])return a.helpers[b](this,e,c,d)};c.prototype.capture=function(a,b,e){return this.map(function(c){var h=new d(function(a,b){a?c.setError(a):e(b,c)});a(h.head,b).end()})};c.prototype.setError=function(a){this.error=a;this.root.flush();return this};h.prototype.push=function(a){return new h(a,this)};h.prototype.go=function(a){for(var b=this;b;)a=b.head(a),b=b.tail;return a};var j=RegExp(/[&<>\"\']/),i=/&/g,l=/</g,o=/>/g,p=/\"/g,n=/\'/g;a.escapeHtml=
function(a){return"string"===typeof a?!j.test(a)?a:a.replace(i,"&amp;").replace(l,"&lt;").replace(o,"&gt;").replace(p,"&quot;").replace(n,"&#39;"):a};var r=/\\/g,s=/\r/g,u=/\u2028/g,w=/\u2029/g,t=/\n/g,q=/\f/g,v=/'/g,k=/"/g,x=/\t/g;a.escapeJs=function(a){return"string"===typeof a?a.replace(r,"\\\\").replace(k,'\\"').replace(v,"\\'").replace(s,"\\r").replace(u,"\\u2028").replace(w,"\\u2029").replace(t,"\\n").replace(q,"\\f").replace(x,"\\t"):a}})(dust);
"undefined"!==typeof exports&&("undefined"!==typeof process&&require("./server")(dust),module.exports=dust);
(function(a){function f(a){a=a.current();return"object"===typeof a&&!0===a.isSelect}function g(a,b){return"function"===typeof b?b.toString():b}function d(d,e,g,i,l){var i=i||{},o=g.block,p,n,r=i.filterOpType||"";if("undefined"!==typeof i.key)p=a.helpers.tap(i.key,d,e);else if(f(e))p=e.current().selectKey,e.current().isResolved&&(l=function(){return!1});else return c.log("No key specified for filter in:"+r+" helper "),d;n=a.helpers.tap(i.value,d,e);if(l(b(n,i.type,e),b(p,i.type,e))){f(e)&&(e.current().isResolved=
!0);if(o)return d.render(o,e);c.log("Missing body block in the "+r+" helper ")}else if(g["else"])return d.render(g["else"],e);return d}function b(a,b,c){if(a)switch(b||typeof a){case "number":return+a;case "string":return String(a);case "boolean":return Boolean("false"===a?!1:a);case "date":return new Date(a);case "context":return c.get(a)}return a}var c="undefined"!==typeof console?console:{log:function(){}};a.helpers={tap:function(a,b,c){var d=a;"function"===typeof a&&(!0===a.isFunction?d=a():(d=
"",b.tap(function(a){d+=a;return""}).render(a,c).untap(),""===d&&(d=!1)));return d},sep:function(a,b,c){return b.stack.index===b.stack.of-1?a:c.block?c.block(a,b):a},idx:function(a,b,c){return c.block?c.block(a,b.push(b.stack.index)):a},contextDump:function(b,e,d,f){f=f||{};d=f.to||"output";f=f.key||"current";d=a.helpers.tap(d,b,e);f=a.helpers.tap(f,b,e);e="full"===f?JSON.stringify(e.stack,g,2):JSON.stringify(e.stack.head,g,2);return"console"===d?(c.log(e),b):b.write(e)},"if":function(b,e,d,g){var f=
d.block,o=d["else"];if(g&&g.cond){g=g.cond;g=a.helpers.tap(g,b,e);if(eval(g)){if(f)return b.render(d.block,e);c.log("Missing body block in the if helper!");return b}if(o)return b.render(d["else"],e)}else c.log("No condition given in the if helper!");return b},math:function(b,e,d,g){if(g&&"undefined"!==typeof g.key&&g.method){var f=g.key,o=g.method,p=g.operand,g=g.round,n=null,f=a.helpers.tap(f,b,e),p=a.helpers.tap(p,b,e);switch(o){case "mod":(0===p||-0===p)&&c.log("operand for divide operation is 0/-0: expect Nan!");
n=parseFloat(f)%parseFloat(p);break;case "add":n=parseFloat(f)+parseFloat(p);break;case "subtract":n=parseFloat(f)-parseFloat(p);break;case "multiply":n=parseFloat(f)*parseFloat(p);break;case "divide":(0===p||-0===p)&&c.log("operand for divide operation is 0/-0: expect Nan/Infinity!");n=parseFloat(f)/parseFloat(p);break;case "ceil":n=Math.ceil(parseFloat(f));break;case "floor":n=Math.floor(parseFloat(f));break;case "round":n=Math.round(parseFloat(f));break;case "abs":n=Math.abs(parseFloat(f));break;
default:c.log("method passed is not supported")}if(null!==n)return g&&(n=Math.round(n)),d&&d.block?b.render(d.block,e.push({isSelect:!0,isResolved:!1,selectKey:n})):b.write(n)}else c.log("Key is a required parameter for math helper along with method/operand!");return b},select:function(b,e,d,g){var f=d.block;if(g&&"undefined"!==typeof g.key){g=a.helpers.tap(g.key,b,e);if(f)return b.render(d.block,e.push({isSelect:!0,isResolved:!1,selectKey:g}));c.log("Missing body block in the select helper ")}else c.log("No key given in the select helper!");
return b},eq:function(a,b,c,g){g&&(g.filterOpType="eq");return d(a,b,c,g,function(a,b){return b===a})},ne:function(a,b,c,g){return g?(g.filterOpType="ne",d(a,b,c,g,function(a,b){return b!==a})):a},lt:function(a,b,c,g){if(g)return g.filterOpType="lt",d(a,b,c,g,function(a,b){return b<a})},lte:function(a,b,c,g){return g?(g.filterOpType="lte",d(a,b,c,g,function(a,b){return b<=a})):a},gt:function(a,b,c,g){return g?(g.filterOpType="gt",d(a,b,c,g,function(a,b){return b>a})):a},gte:function(a,b,c,g){return g?
(g.filterOpType="gte",d(a,b,c,g,function(a,b){return b>=a})):a},"default":function(a,b,c,g){g&&(g.filterOpType="default");return d(a,b,c,g,function(){return!0})},size:function(b,e,c,d){var e=0,g,d=d||{},d=d.key;if(!d||!0===d)e=0;else if(a.isArray(d))e=d.length;else if(!isNaN(parseFloat(d))&&isFinite(d))e=d;else if("object"===typeof d)for(g in e=0,d)Object.hasOwnProperty.call(d,g)&&e++;else e=(d+"").length;return b.write(e)}}})("undefined"!==typeof exports?module.exports=require("dustjs-linkedin"):
dust);
function FastClick(a){var f,g=this;this.trackingClick=!1;this.trackingClickStart=0;this.targetElement=null;this.lastTouchIdentifier=this.touchStartY=this.touchStartX=0;this.touchBoundary=10;this.layer=a;if(!a||!a.nodeType)throw new TypeError("Layer must be a document node");this.onClick=function(){return FastClick.prototype.onClick.apply(g,arguments)};this.onMouse=function(){return FastClick.prototype.onMouse.apply(g,arguments)};this.onTouchStart=function(){return FastClick.prototype.onTouchStart.apply(g,arguments)};
this.onTouchMove=function(){return FastClick.prototype.onTouchMove.apply(g,arguments)};this.onTouchEnd=function(){return FastClick.prototype.onTouchEnd.apply(g,arguments)};this.onTouchCancel=function(){return FastClick.prototype.onTouchCancel.apply(g,arguments)};FastClick.notNeeded(a)||(this.deviceIsAndroid&&(a.addEventListener("mouseover",this.onMouse,!0),a.addEventListener("mousedown",this.onMouse,!0),a.addEventListener("mouseup",this.onMouse,!0)),a.addEventListener("click",this.onClick,!0),a.addEventListener("touchstart",
this.onTouchStart,!1),a.addEventListener("touchmove",this.onTouchMove,!1),a.addEventListener("touchend",this.onTouchEnd,!1),a.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(a.removeEventListener=function(d,b,c){var h=Node.prototype.removeEventListener;"click"===d?h.call(a,d,b.hijacked||b,c):h.call(a,d,b,c)},a.addEventListener=function(d,b,c){var h=Node.prototype.addEventListener;"click"===d?h.call(a,d,b.hijacked||(b.hijacked=function(a){a.propagationStopped||
b(a)}),c):h.call(a,d,b,c)}),"function"===typeof a.onclick&&(f=a.onclick,a.addEventListener("click",function(a){f(a)},!1),a.onclick=null))}FastClick.prototype.deviceIsAndroid=0<navigator.userAgent.indexOf("Android");FastClick.prototype.deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent);FastClick.prototype.deviceIsIOS4=FastClick.prototype.deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent);FastClick.prototype.deviceIsIOSWithBadTarget=FastClick.prototype.deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent);
FastClick.prototype.needsClick=function(a){switch(a.nodeName.toLowerCase()){case "button":case "select":case "textarea":if(a.disabled)return!0;break;case "input":if(this.deviceIsIOS&&"file"===a.type||a.disabled)return!0;break;case "label":case "video":return!0}return/\bneedsclick\b/.test(a.className)};
FastClick.prototype.needsFocus=function(a){switch(a.nodeName.toLowerCase()){case "textarea":return!0;case "select":return!this.deviceIsAndroid;case "input":switch(a.type){case "button":case "checkbox":case "file":case "image":case "radio":case "submit":return!1}return!a.disabled&&!a.readOnly;default:return/\bneedsfocus\b/.test(a.className)}};
FastClick.prototype.sendClick=function(a,f){var g,d;document.activeElement&&document.activeElement!==a&&document.activeElement.blur();d=f.changedTouches[0];g=document.createEvent("MouseEvents");g.initMouseEvent(this.determineEventType(a),!0,!0,window,1,d.screenX,d.screenY,d.clientX,d.clientY,!1,!1,!1,!1,0,null);g.forwardedTouchEvent=!0;a.dispatchEvent(g)};FastClick.prototype.determineEventType=function(a){return this.deviceIsAndroid&&"select"===a.tagName.toLowerCase()?"mousedown":"click"};
FastClick.prototype.focus=function(a){var f;this.deviceIsIOS&&a.setSelectionRange&&0!==a.type.indexOf("date")&&"time"!==a.type?(f=a.value.length,a.setSelectionRange(f,f)):a.focus()};FastClick.prototype.updateScrollParent=function(a){var f,g;f=a.fastClickScrollParent;if(!f||!f.contains(a)){g=a;do{if(g.scrollHeight>g.offsetHeight){f=g;a.fastClickScrollParent=g;break}g=g.parentElement}while(g)}f&&(f.fastClickLastScrollTop=f.scrollTop)};
FastClick.prototype.getTargetElementFromEventTarget=function(a){return a.nodeType===Node.TEXT_NODE?a.parentNode:a};
FastClick.prototype.onTouchStart=function(a){var f,g,d;if(1<a.targetTouches.length)return!0;f=this.getTargetElementFromEventTarget(a.target);g=a.targetTouches[0];if(this.deviceIsIOS){d=window.getSelection();if(d.rangeCount&&!d.isCollapsed)return!0;if(!this.deviceIsIOS4){if(g.identifier===this.lastTouchIdentifier)return a.preventDefault(),!1;this.lastTouchIdentifier=g.identifier;this.updateScrollParent(f)}}this.trackingClick=!0;this.trackingClickStart=a.timeStamp;this.targetElement=f;this.touchStartX=
g.pageX;this.touchStartY=g.pageY;200>a.timeStamp-this.lastClickTime&&a.preventDefault();return!0};FastClick.prototype.touchHasMoved=function(a){var a=a.changedTouches[0],f=this.touchBoundary;return Math.abs(a.pageX-this.touchStartX)>f||Math.abs(a.pageY-this.touchStartY)>f?!0:!1};FastClick.prototype.onTouchMove=function(a){if(!this.trackingClick)return!0;if(this.targetElement!==this.getTargetElementFromEventTarget(a.target)||this.touchHasMoved(a))this.trackingClick=!1,this.targetElement=null;return!0};
FastClick.prototype.findControl=function(a){return void 0!==a.control?a.control:a.htmlFor?document.getElementById(a.htmlFor):a.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")};
FastClick.prototype.onTouchEnd=function(a){var f,g,d=this.targetElement;if(!this.trackingClick)return!0;if(200>a.timeStamp-this.lastClickTime)return this.cancelNextClick=!0;this.cancelNextClick=!1;this.lastClickTime=a.timeStamp;f=this.trackingClickStart;this.trackingClick=!1;this.trackingClickStart=0;this.deviceIsIOSWithBadTarget&&(g=a.changedTouches[0],d=document.elementFromPoint(g.pageX-window.pageXOffset,g.pageY-window.pageYOffset)||d,d.fastClickScrollParent=this.targetElement.fastClickScrollParent);
g=d.tagName.toLowerCase();if("label"===g){if(f=this.findControl(d)){this.focus(d);if(this.deviceIsAndroid)return!1;d=f}}else if(this.needsFocus(d)){if(100<a.timeStamp-f||this.deviceIsIOS&&window.top!==window&&"input"===g)return this.targetElement=null,!1;this.focus(d);if(!this.deviceIsIOS4||"select"!==g)this.targetElement=null,a.preventDefault();return!1}if(this.deviceIsIOS&&!this.deviceIsIOS4&&(f=d.fastClickScrollParent)&&f.fastClickLastScrollTop!==f.scrollTop)return!0;this.needsClick(d)||(a.preventDefault(),
this.sendClick(d,a));return!1};FastClick.prototype.onTouchCancel=function(){this.trackingClick=!1;this.targetElement=null};FastClick.prototype.onMouse=function(a){return!this.targetElement||a.forwardedTouchEvent||!a.cancelable?!0:!this.needsClick(this.targetElement)||this.cancelNextClick?(a.stopImmediatePropagation?a.stopImmediatePropagation():a.propagationStopped=!0,a.stopPropagation(),a.preventDefault(),!1):!0};
FastClick.prototype.onClick=function(a){if(this.trackingClick)return this.targetElement=null,this.trackingClick=!1,!0;if("submit"===a.target.type&&0===a.detail)return!0;a=this.onMouse(a);a||(this.targetElement=null);return a};
FastClick.prototype.destroy=function(){var a=this.layer;this.deviceIsAndroid&&(a.removeEventListener("mouseover",this.onMouse,!0),a.removeEventListener("mousedown",this.onMouse,!0),a.removeEventListener("mouseup",this.onMouse,!0));a.removeEventListener("click",this.onClick,!0);a.removeEventListener("touchstart",this.onTouchStart,!1);a.removeEventListener("touchmove",this.onTouchMove,!1);a.removeEventListener("touchend",this.onTouchEnd,!1);a.removeEventListener("touchcancel",this.onTouchCancel,!1)};
FastClick.notNeeded=function(a){var f,g;if("undefined"===typeof window.ontouchstart)return!0;if(g=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1])if(FastClick.prototype.deviceIsAndroid){if((f=document.querySelector("meta[name=viewport]"))&&(-1!==f.content.indexOf("user-scalable=no")||31<g&&window.innerWidth<=window.screen.width))return!0}else return!0;return"none"===a.style.msTouchAction?!0:!1};FastClick.attach=function(a){return new FastClick(a)};
"undefined"!==typeof define&&define.amd?define(function(){return FastClick}):"undefined"!==typeof module&&module.exports?(module.exports=FastClick.attach,module.exports.FastClick=FastClick):window.FastClick=FastClick;
(function(){for(var a=0,f=["webkit","moz"],g=0;g<f.length&&!window.requestAnimationFrame;++g)window.requestAnimationFrame=window[f[g]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[f[g]+"CancelAnimationFrame"]||window[f[g]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(d){var b=(new Date).getTime(),c=Math.max(0,16-(b-a)),h=window.setTimeout(function(){d(b+c)},c);a=b+c;return h});window.cancelAnimationFrame||(window.cancelAnimationFrame=
function(a){clearTimeout(a)});window.inFrame=!1;window.limitedAnimationFrame=function(a){window.inFrame||(window.inFrame=!0,window.requestAnimationFrame.call(window,function(){a.call(window);window.inFrame=!1}))}})();
(function(a){var f=a();"object"===typeof exports?module.exports=f:"function"===typeof define&&define.amd?define(a):window.satisfy=f;void 0!==window.jQuery&&jQuery.fn&&(jQuery.satisfy=function(a){return jQuery(f(a))})})(function(){function a(a){if(a in b)return b[a].cloneNode(!0).childNodes;for(var c=[],l=d.createDocumentFragment(),o,p,n,r=1,s=0,u=!1,w;null!==(m=f.exec(a));)++s,c.push(m[1]);for(;s--;)if(n=c[s],g.COMBINATOR.test(n))u="~"===n||"+"===n;else{r=(w=n.match(g.CLONE))?~~w[1]:1;p=o;o=n;n=g.TAG.exec(o);
n=d.createElement(n&&"*"!==n[1]?n[1]:"div");for(var t=d.createDocumentFragment(),q=h.length,v=void 0,k=void 0,x=void 0;q--;)if(k=g[h[q]],x=e[h[q]],k.global)for(;null!==(v=k.exec(o));)x(v,n);else(v=k.exec(o))&&x(v,n);for(;r--;)t.appendChild(n.cloneNode(!0));o=t;if(p)if(u)o.appendChild(p),u=!1;else{r=o;r=r.childNodes;n=r.length;for(t=void 0;n--;)t=r[n],"table"===t.nodeName.toLowerCase()&&t.appendChild(t=d.createElement("tbody")),t.appendChild(p.cloneNode(!0))}}l.appendChild(o);b[a]=l.cloneNode(!0);
return l.childNodes}var f=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^[\]]*\]|['"][^'"]*['"]|[^[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?/g,g={ID:/#((?:[\w\u00c0-\uFFFF_-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF_-]|\\.)+)(?![^[\]]+])/g,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF_-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF_-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/g,TAG:/^((?:[\w\u00c0-\uFFFF\*_-]|\\.)+)/,CLONE:/\:(\d+)(?=$|[:[])/,COMBINATOR:/^[>~+]$/},d=document,b={},c={"for":"htmlFor","class":"className",
html:"innerHTML",text:"textContent"},h=["ID","CLASS","NAME","ATTR"],e={ID:function(a,b){b.id=a[1]},CLASS:function(a,b){var e=b.className.replace(/^\s+$/,"");b.className=e?e+" "+a[1]:a[1]},NAME:function(a,b){b.name=a[1]},ATTR:function(a,b){var e=a[1],d=a[4]||!0;"innerHTML"===e||("text"===e||"html"===e)||(!0===d||"innerHTML"===e||c.hasOwnProperty(e)?b[c[e]||e]=d:b.setAttribute(e,d))}};a.cache=b;return a});
(function(a){var f=navigator.userAgent;a.os={};a.os.webkit=!!f.match(/WebKit\/([\d.]+)/);a.os.android=!!f.match(/(Android)\s+([\d.]+)/)||!!f.match(/Silk-Accelerated/);a.os.oldAndroid=a.os.android&&!f.match(/(Android)\s4/);a.os.supports3d=!a.os.oldAndroid;a.os.supportsTransitions=!a.os.oldAndroid;a.os.ipad=!!f.match(/(iPad).*OS\s([\d_]+)/);a.os.iphone=!a.os.ipad&&!!f.match(/(iPhone\sOS)\s([\d_]+)/);a.os.ios=a.os.ipad||a.os.iphone;a.os.ios6=a.os.ios&&!!f.match(/(OS)\s([6])/);a.os.chrome=!!f.match(/Chrome/);
a.os.iosChrome=a.os.ios&&!!f.match(/CriOS/);a.os.bb10=!!f.match(/BB10/);a.os.supportsTouch=window.DocumentTouch&&document instanceof window.DocumentTouch||"ontouchstart"in window;var f=a.os,g=document.createElement("input");g.type="file";f.supportsFileApi="undefined"!==typeof g.files&&window.File&&window.FileList&&window.FileReader;a=a.os;navigator.userAgent.match(/(Android (1.0|1.1|1.5|1.6|2.0|2.1))|(Windows Phone (OS 7|8.0))|(XBLWP)|(ZuneWP)|(w(eb)?OSBrowser)|(webOS)|(Kindle\/(1.0|2.0|2.5|3.0))/)?
f=!1:(f=document.createElement("input"),f.type="file",f=!f.disabled);a.supportsFileInput=f})(Zepto);
(function(a){var f=["Webkit","Moz","O","ms"],g=f.map(function(a){return a.toLowerCase()}),d=function(a){var b=document.createElement("div");b.style.background=a;return-1!==b.style.background.indexOf("gradient")},b=function(b,e){if(d(e))return e;var c=e.match(/.*?\(([a-z ]+?),(.+?)\)/);if(!c||3>c.length)return e;var h=a.trim(c[1]),c=a.trim(c[2]),f,j;for(j=0;j<g.length;j++){f=g[j];var s=b,u=h,w=c,u="linear"===s?"to bottom"===u?"top":"left":-1!==u.indexOf("ellipse")?"center, ellispe cover":"center, circle cover";
f="-"+f+"-"+s+"-gradient("+u+","+w+")";if(d(f))return f}h="linear"===b?"to bottom"===h?"left top, left bottom":"left top, right top":"center center, 0px, center center, 100%";j=[];c=c.split(",");for(s=0;s<c.length;s++)f=a.trim(c[s]).split(" "),j.push("color-stop("+f[1]+","+f[0]+")");c="-webkit-gradient("+b+", "+h+", "+j.join(",")+")";return d(c)?c:e},c={},h=function(b){if(c[b])return c[b];var e;a:{e=b.replace(/-+(.)?/g,function(a,b){return b?b.toUpperCase():""});for(var d=document.createElement("div").style,
h=e.charAt(0).toUpperCase()+e.substring(1),j=0;j<f.length;j++)if(f[j]+h in d){e=f[j]+h;break a}e=e in d?e:null}if(!e)return"";e=e.replace(/([a-z\d])([A-Z])/g,"$1-$2").toLowerCase();e=-1!==a.inArray(e.split("-")[0],g)?"-"+e:e;return c[b]=e},e=function(a,e){return"display"===a&&"box"===e?h("box-flex").replace("-flex",""):("transition"===a||"transition-property"===a)&&null!==e&&-1!==e.indexOf("transform")?e.replace("transform",h("transform")):"transform"===a&&-1!==e.indexOf("translate3d(")?""!==h("perspective")?
e:e.replace("translate3d(","translate(").replace(/(.*?,.*?)(,.*)/,"$1)"):"background-image"===a&&-1!==e.indexOf("linear-gradient(")?b("linear",e):"background-image"===a&&-1!==e.indexOf("radial-gradient(")?b("radial",e):e},j=a.fn.css;a.fn.css=function(a,b){var c=Array.prototype.slice.call(arguments);if("string"===typeof c[0])return c[0]=h(c[0]),"string"===typeof c[1]&&(c[1]=e(c[0],c[1])),j.apply(this,c);for(var d in a)a[h(d)]=e(d,a[d]);return j.call(this,a)};a.css=a.css||{};a.css.getProp=h;a.css.getValue=
e})(Zepto);(function(){})(Zepto);
(function(a,f){f.fn.carousel=function(a){var b=Array.prototype.slice.call(arguments,1),e=null;this.each(function(){var d=f(this).data("carousel");d||(d=new g(this,_.isObject(a)?a:{}),f(this).data("carousel",d));_.isString(a)&&_.isFunction(d[a])&&(e=d[a].apply(d,b))});return _.isNull(e)?this:e};var g=function(b,d){this.options=d||{};this.scroller=new iScroll(f(b).get(0),{vScroll:!1,momentum:!1,hScrollbar:!1,vScrollbar:!1,useTransition:!0,onTouchEnd:f.proxy(this.onTouchEnd,this),onScrollMove:f.proxy(this.onScrollMove,
this),onScrollEnd:f.proxy(this.onScrollEnd,this),onScrollStart:f.proxy(this.onScrollStart,this),snap:this.options.snap||!0,snapThreshold:this.options.snapThreshold||1,handleClick:!1});var e=_.bind(this.refresh,this);a.GlobalEvents.on("page-animation-complete",e);a.UI.on("resize",e);e()};g.prototype={recycleInProgress:!1,getSlides:function(a){return"number"===typeof a?this.scroller.scroller.childNodes[a]:this.scroller.scroller.childNodes},getNumSlides:function(){return this.getSlides().length},getCurrentSlide:function(){return this.getSlides(this.getIndex())},
getPreviousSlide:function(){return this.getSlides(Math.max(0,this.getIndex()-1))},getIndex:function(){return this.scroller.currPageX},onTouchEnd:function(a){if(_.isFunction(this.options.onTouchEnd))return this.options.onTouchEnd.call(this,a)},disable:function(){this.scroller.disable()},enable:function(){this.scroller.enable()},next:function(a){"number"!==typeof a&&(a=150);this.getIndex()===this.getNumSlides()-1?this.scrollToPage(0,a):this.scrollToPage(this.getIndex()+1,a)},back:function(a){"number"!==
typeof a&&(a=150);0===this.getIndex()?this.scrollToPage(this.getNumSlides(),a):this.scrollToPage(this.getIndex()-1,a)},getMovementStats_:function(){var a=this.scroller,b=this.getSlides(),e=b[this.getIndex()],d=a.dirX,a=100*(a.absDistX/a.wrapperW),g;g=b[Math.min(this.getIndex()+1,this.getNumSlides()-1)];b=b[Math.max(0,this.getIndex()-1)];if(1!==d){var f=g;g=b;b=f}return{current:e,previous:b,next:g,percentMoved:a,direction:d}},onScrollMove:function(a){if(_.isFunction(this.options.onScrollMove)){var b=
this.getMovementStats_();return this.options.onScrollMove.call(this,b.current,b.previous,b.next,b.percentMoved,b.direction,a)}},onScrollEnd:function(a){if(this.recycleInProgress)this.recycleInProgress=!1;else{var b=this.getMovementStats_();!0===this.options.recycle&&(b.next?this.moveLastToFirst():this.moveFirstToLast());if(_.isFunction(this.options.onScrollEnd))return this.options.onScrollEnd.call(this,b.current,b.previous,b.next,b.percentMoved,b.direction,a)}},onScrollStart:function(a){if(_.isFunction(this.options.onScrollStart))return this.options.onScrollStart.call(this,
a)},removeAt:function(a){a=this.getSlides()[a];this.scroller.scroller.removeChild(a);this.refresh()},moveFirstToLast:function(){this.recycleInProgress=!0;var a=this.getSlides()[0];this.scroller.scroller.appendChild(a);this.back(0)},moveLastToFirst:function(){this.recycleInProgress=!0;var a=this.getSlides(this.getNumSlides()-1);this.scroller.scroller.insertBefore(a,this.scroller.scroller.firstChild);this.next(0)},empty:function(){0<this.getNumSlides()&&this.scrollToPage(0,0);f(this.scroller.scroller).empty();
this.refresh();return this},append:function(a){f(this.scroller.scroller).append(a);this.refresh();return this},prepend:function(a){f(this.scroller.scroller).prepend(a);this.refresh();return this},scrollToPage:function(a,b){this.iScroll.scrollToPage(a,0,b)},refresh:function(){var a=this.scroller,h=this.scroller.wrapper.clientWidth,e=function(a){var e=getComputedStyle(a,null),c=h,g=parseInt(e.marginLeft,10),e=parseInt(e.marginRight,10),g=(isNaN(g)?0:g)+(isNaN(e)?0:e),e=a.getAttribute("data-slide-width");
d.test(e)?(e=(c=e.match(d))&&parseInt(c[1],10),c=h*(e/100)):b.test(e)&&(c=(c=e.match(b))&&parseInt(c[1],10));a.style.width=c-g+"px";return c};isNaN(parseInt(this.options.slideWidth,10))||(h=this.options.slideWidth);_.isFunction(this.options.slideWidth)&&(e=this.options.slideWidth);e=_.reduce(_.map(this.getSlides(),e),function(a,b){return a+b},0);a.scroller.style.width=e+"px";setTimeout(function(){a.refresh();0<a.pagesX.length&&a.scrollToPage(a.currPageX,0,0)},0)},destroy:function(){this.scroller.destroy()}};
var d=/^(\d+?)%$/,b=/^(\d+?)px$/})(Badoo,Zepto);(function(a){var f=[],g=[],d=[];a.asap=function(b,c,h){if(!a.isFunction(b))throw"$.asap - argument is not a valid function";f.push(b);g.push(c?c:window);d.push(h?h:[]);window.postMessage("badoo-asap","*")};window.addEventListener("message",function(a){a.source===window&&"badoo-asap"===a.data&&(a.stopPropagation(),0<f.length&&f.shift().apply(g.shift(),d.shift()))},!0)})(Zepto);
(function(a){var f,g=navigator.userAgent;f=!(!g.match(/(Android)\s+([\d.]+)/)&&!g.match(/Silk-Accelerated/))&&!g.match(/(Android)\s4/);a.fn.selectBox=function(){if(f){for(var b=0;b<this.length;b++){var c=a(this[b]).data("select-box-plugin");c||(c=new d(this[b]),a(this[b]).data("select-box-plugin",c))}return this}};var d=function(b){var c=this,d=window.getComputedStyle(b),h={};this.id=b.id;this.el=b;this.fakeInput=document.createElement("div");for(var g in d)!1===/^[0-9]*$/.test(g)&&(h[g]=d[g]);h.zIndex=
"1";h.backgroundColor="white";h.backgroundSize="contain";h.border="1px solid gray";h.color="#333";h.textIndent="3px";h.fontSize="12px";a(this.fakeInput).css(h);this.fakeInput.className="select-box-plugin-input "+b.className;this.fakeInput.id=b.id+"select-box-plugin";b.value&&(this.fakeInput.innerHTML=b.options[b.selectedIndex].text);this.fakeInput.addEventListener("click",function(){c.open()},!1);b.parentNode.appendChild(this.fakeInput);b.style.display="none";b.style.webkitAppearance="none";for(d=
0;d<b.options.length;d++)b.options[d].selected&&(this.fakeInput.value=b.options[d].text),b.options[d].watch("selected",function(a,d,h){!0===h&&(c.update(),b.value=this.value);return h});b.watch("selectedIndex",function(a,b,e){this.options[e]&&(c.update(e),this.value=this.options[e].value);return e})},b={position:"relative",padding:"0 10px","font-size":"16px","line-height":"48px","border-bottom":"1px solid #ccc","background-color":"white",color:"black"},c={margin:"10px","background-color":"#FFF"},
h={position:"absolute",top:"0px",bottom:"0px",left:"0px",right:"0px","z-index":"9999","background-color":"rgba(0,0,0,0.7)"};d.prototype={open:function(){var e=a("<div></div>");e.css(h).css("height",window.innerHeight);var d=a("<ul></ul>");d.css(c);var g,f=this.el.options;g=a('<li id="select-box-plugin-close">&times;</li>');g.css(b).css("text-align","right");d.append(g);for(var o=0;o<f.length;o++)g=a('<li id="'+o+'">'+f[o].innerHTML+"</li>"),g.css(b),f[o].value===this.el.value&&g.css("background-color",
"rgba(78,139,13,0.5)"),d.append(g);e.append(d);e.on("click",a.proxy(this.onClick,this));this.popup=e;a("body").append(this.popup);e.scroller({checkDOMChanges:!0})},close:function(){this.popup&&(this.popup.remove(),this.popup=null)},onClick:function(b){b=a(b.target).attr("id");"select-box-plugin-close"!==b&&(this.el.selectedIndex=b);this.close()},update:function(b){this.fakeInput.innerHTML=this.el.options[b].innerHTML;for(var c=0;c<this.el.options.length;c++)this.el.options[c].selected=c===b?"true":
"false";var d=this;setTimeout(function(){a(d.el).trigger("change")},50)}};HTMLElement.prototype.watch||(HTMLElement.prototype.watch=function(a,b){var c=this[a],d=c,h=function(){return d},g=function(h){c=d;return d=b.call(this,a,c,h)};delete this[a]&&(HTMLElement.defineProperty?HTMLElement.defineProperty(this,a,{get:h,set:g,enumerable:!1,configurable:!0}):HTMLElement.prototype.__defineGetter__&&HTMLElement.prototype.__defineSetter__&&(HTMLElement.prototype.__defineGetter__.call(this,a,h),HTMLElement.prototype.__defineSetter__.call(this,
a,g)))});HTMLElement.prototype.unwatch||(HTMLElement.prototype.unwatch=function(a){var b=this[a];delete this[a];this[a]=b})})(Zepto);(function(a){a.fn.serializeForm=function(){for(var a=this.serializeArray(),g={},d=0;d<a.length;d++)g[a[d].name]=a[d].value;return g}})(Zepto);
var _t={__format__:function(a,f){return a.replace(/{(\d+)}/g,function(a,d){return"undefined"!=typeof f["_"+d]||"undefined"!=typeof f[d]?dust.escapeHtml(f["_"+d]||f[d]):a})},WindowsPhone_Photos_Add_You:"Add photos with only you in them, that show your face clearly.",WindowsPhone_Settings_About_Version:function(a,f,g,d){var b=_t.__format__("version: {0}",1<arguments.length?d:a);1<arguments.length&&a.write(b);return b},about_description:"<strong>Want to meet new people? Of course you do</strong><p>The concept of Hot or Not is simple, we show you who likes you nearby.</p><p>At home, in the office, on the street, you can get to know new people!</p><p>We'll show you some people nearby, you can see if you like them, if they like you too, we'll connect you. The rest, we leave up to you.</p><p>And the best part? They'll never know you like them unless they like you too.</p><strong>Who are we?</strong><p>Hot or Not, the Original, was created over a decade ago, and now, it's back on mobile. Created by a group of young innovative minds, reminiscing about the fun they used to have on Hot or Not, they got together to produce Hot or Not for 2013. We all need solutions to the age old questions, \"How do I tell them I like them\", \"what if they say no when I ask them out\", \"how do I meet someone new\". Hot or Not has provided the answer...let us do the work for you.</p><strong>Suddenly everyone's talking about Hot or Not again...shouldn't you be too?</strong>",
account_delete_account_reason:"Sorry to see you go, please tell us your reason for leaving.",appirater_message:function(a,f,g,d){var b=_t.__format__("If you find {0} useful, please rate it in the App Store, to encourage others to download and use it!",1<arguments.length?d:a);1<arguments.length&&a.write(b);return b},appirater_message_android:"Love Hot or Not? Rate us on the Google Play Store to encourage others to download it too!",appirater_nothanks:"No thanks",appirater_rate:"Rate Hot or Not 5 stars!",
appirater_title:"Recommend us!",awards_landing_facebook_connect:"Get your rating now !",btn_chatnow:"Chat now",btn_getApp:"Get App",btn_notNow:"Not now",btn_ok:"OK",btn_skip:"Skip",chat_initial_message:"Make a good impression, why not talk about something you have in common?",chat_location_downloadapp:"Download the app!",chat_message_placeholder:"Message",chat_not_interested:"Not interested",chat_reply_now:"Reply now!",chat_sent_you_a_message:function(a,f,g,d){var b=_t.__format__("{0} sent you a message.",
1<arguments.length?d:a);1<arguments.length&&a.write(b);return b},cmd_add_comments:"Add Comments",cmd_cancel:"Cancel",cmd_confirm_delete:"Confirm Delete",cmd_confirm_profile_photo:"Set as profile photo?",cmd_continue:"Continue",cmd_delete:"Delete",cmd_deselectall:"Deselect all",cmd_done:"Done",cmd_edit:"Edit",cmd_filter:"Filter",cmd_filter_all:"All",cmd_filter_search:"Search",cmd_filter_unread:"Unread",cmd_finish:"Finish",cmd_or:"OR",cmd_save:"Save",cmd_search:"Search",cmd_selectall:"Select all",cmd_send:"Send",
connections_filter_chats:"Chats",device_not_supported:"Sorry, your device is not supported",device_not_supported_more_details:"Check hotornot.com for more details",encounters_add_photos_description:"Add photos of you to be shown to other users of the Hot or Not game:",encounters_add_photos_title:"Let's Play!",encounters_come_back_soon:"<strong>People are joining all the time!</strong><br />Come back soon to find hot new people.",encounters_finding_people:"Finding people you might like",encounters_friends_in_common:"SHARED\nFRIENDS",
encounters_interests_in_common:"INTERESTS\nIN COMMON",encounters_mutual_keep_playing:"Keep playing",encounters_mutual_send_message:"Send a message",encounters_mutual_subtitle:function(a,f,g,d){var b=_t.__format__("You and {0} have liked each other",1<arguments.length?d:a);1<arguments.length&&a.write(b);return b},encounters_mutual_title:"You found a match!",encounters_overall_score:"OVERALL\nSCORE",encounters_profile_button_no:"No",encounters_profile_button_yes:"Yes!",encounters_score:"Score",encounters_sub_text:"Secretly like people around you",
error_connection_badooUnavailable:"Unable to reach Hot or Not server. Please try again later.",error_connection_non_modal_no_internet:"No internet connection",error_oops:"Oops!",facebook_photo_import_move:"Move and scale",facebook_photo_import_title:"Albums",fb_login_appremove:"The app was removed. Please log in again.",fb_login_failure:"Error. Please try again later.",fb_login_invalidsession:"Your current session is no longer valid. Please log in again.",feedback_alert_done:"Thanks for your feedback, we'll act on it shortly.",
feedback_listitem_billing:"Billing questions",feedback_listitem_business:"Business matters",feedback_listitem_bussines:"Business matters",feedback_listitem_error_bug:"Errors/Bugs",feedback_listitem_ideas:"Ideas",feedback_listitem_questions:"Questions",feedback_str_help:"<html><center>For more information tap <a href='screen://help'>here</a> to visit our Help section.</center></html>",filter_age_range_text:function(a,f,g,d){var b=_t.__format__("Show me people aged <b>{0} to {1}</b>",1<arguments.length?
d:a);1<arguments.length&&a.write(b);return b},folder_pulldowntorefresh:"Pull down to refresh",folder_releasetorefresh:"Release to refresh",gallery_import_facebook:"Add from Facebook",gallery_import_title:"Add photos",gallery_photo_viewer_deleteConfirmMsg:"Are you sure you want to delete this photo?",game_title:"Hot or Not?",hotornot_loading_encounters:"Locating hot people near you",iPhone_btn_photo_chooseExisting:"Use existing photo",import_friends_fail_message:"Try searching another contact list",
import_friends_fail_title:"No contacts were found",import_friends_providers_more:"More",incomplete_profile_girl:"Girl",incomplete_profile_guy:"Guy",incomplete_profile_location:"Location",incomplete_profile_location_placeholder:"Start typing city name",incomplete_profile_subtitle:"Please add some details about you:",incomplete_profile_title:"Almost done!",interests_profile_sectionHeadingWithNumber:function(a,f,g,d){var b=_t.__format__("Interests ({0})",1<arguments.length?d:a);1<arguments.length&&a.write(b);
return b},interets_your_edit_delete_btn:"Delete selected",invites_email_title:"Connect",iphone_reconnect_button:"Try again",landing_screen1_description:"Check out how <b>Hot</b> you are. Get your score!",landing_screen1_title:"Hot or Not?",landing_screen2_description:"Like your Facebook <b>friends</b> and their friends!",landing_screen3_description:"Find out who is <b>Hot</b> around you!",landing_screen4_description:"<strong>We will never post anything to Facebook without your permission</strong><br/><br/>It's a secret, people will only know you have liked them if they like you too.",
landing_screen4_title:"<b>Chat</b> with interesting people around you.",landing_useFacebook:"Sign in with Facebook",landing_use_email:"<u>Use your email address</u>",lang:"en",lbl_birthday:"Birthday",lbl_name:"Name",messages_filter_conversations:"Conversations",native_app_prompt_text:function(a,f,g,d){var b=_t.__format__("Find out straight away when people you like also think you're hot. Download the official <strong>Hot or Not</strong> app for {0}.",1<arguments.length?d:a);1<arguments.length&&a.write(b);
return b},partnerId:"52787",people_filter_age:"Age",people_filter_profile_title:"I'm here to",people_filter_wish:"I'm here to",people_filter_with:"With who?",personal_info_no_answer:"No answer",personal_info_personal_info:"Personal info",personal_info_personal_settings:"Settings",photos_cmd_capture:"Take a new photo",photos_str_camera_loading:"Please wait...",photos_str_upload_disclaimer:"Please respect our rules. Note that all photos are moderated.",photos_str_upload_failed:"Sorry, a problem occurred whilst you were uploading your photo.",
please_rotate_your_phone:"Please rotate your phone",profile_account_basicinfo_title:"Basic Info",profile_account_message_facebook:"This will sign your Facebook account out of Hot or Not. You can sign back in using your Facebook account or the password we emailed you.",profile_account_signout:"Sign out",profile_basicInfo_requiredMessage:"One last step! There are details missing from your profile. Please fill them in and you're good to go!",profile_basicinfo_gender_female:"Female",profile_basicinfo_gender_male:"Male",
profile_feedback_noconnection_message:"You can\u2019t send feedback because you aren't connected to the Internet.",profile_filter_title:"Matching",profile_languages_label_language:"Language",profile_notifications_connections:"Connections",profile_notifications_messages:"Messages",profile_password_confirm_msg:function(a,f,g,d){var b=_t.__format__("To get your password, check your email {0} and click the link in the email that we sent you.",1<arguments.length?d:a);1<arguments.length&&a.write(b);return b},
profile_password_invalidEmail:"Please enter a valid email address.",profile_settings_about:"About",profile_settings_account:"Account",profile_settings_feedback:"Feedback",profile_settings_notifications:"Notifications",profile_settings_password:"Get password",profile_toolbar_Chat:"Chat",profile_toolbar_Profile:"Profile",rate_app_ios_message:"Please share the love by rating us 5 stars on the App Store",rate_app_later_button:"Ask me later",rate_app_no_button:"No, I don't like Hot or Not",rate_app_title:"Love Hot or Not?",
rate_app_yes_button:"Rate 5 stars",reset_password_button:"Set password",reset_password_confirmed:"Password set. Use it to sign in online or by mobile",reset_password_description:"Choose a password now, so you can sign into Hot or Not",reset_password_error_empty:"Please type your new password",reset_password_error_match:"Passwords do not match, please retype",reset_password_error_retype:"Please retype your password",reset_password_retype_password:"Retype password",reset_password_type_password:"Type password",
see_new_messages:"See new!",select_friends_source_howitworks:function(a,f,g,d){var b=_t.__format__('For more information about the Connect service, please read <a class="{0}" href="{1}">How it works</a>',1<arguments.length?d:a);1<arguments.length&&a.write(b);return b},settings_account_deleted_description:"Your account has been deleted.",settings_confirm_delete_account_description:"Are you sure you want to delete your Hot or Not account?",settings_confirm_signout:"Are you sure you want to sign out? If you sign out now, you will need to re-enter your password to sign in again.",
settings_delete_account:"Delete account",settings_delete_account_description:"You will no longer be seen by other users in the App. Any information about you, your messages and matches will be deleted.",settings_notifications_likes:"New Likes",settings_notifications_matches:"New Matches",settings_notifications_messages:"New Messages",signin_existing_account:"User",signin_existing_email:"Email",signin_existing_emailorphone:"Email or cell phone",signin_existing_forgot_password:"Forgot password?",signin_existing_password:"Password",
signin_existing_required:"Required",signin_existing_signin:"Sign in",signin_forgot_password_alert_message:"Instructions for creating a new password have been sent.",signin_forgot_password_overview_html_format_android:"<html><center>Please enter the same contact details you used to create your profile, so we can send you instructions to create a new password.</center></html>",signin_forgot_password_title:"Forgot Password",signin_new_back:"Back",signin_new_birthday:"Birthday",signin_new_dd_mm_yyyy:"DD Month YYYY",
signin_new_enter_valid_address:"Enter valid email",signin_new_gender:"Gender",signin_new_name_or_nickname:"Name or Nickname",signin_new_signup:"Sign up!",signin_new_signup2:"Sign up",signin_not_a_member:'Not a member yet? <a href="#sign-up">Sign up here</a>',signup_already_member:'Already a member? <a href="#sign-in">Sign in here</a>',signup_tos_privacy:'By continuing, you accept the <a href="#legal/terms">Terms of use</a>. <br/> We will never share your <a target="_blank" href="//hotornot.com/privacy">private contact info.</a>',
str_launcher_connections:"Connections",str_launcher_hot_or_not:"Hot or Not",str_loading:"Loading\u2026",str_month_01:"January",str_month_02:"February",str_month_03:"March",str_month_04:"April",str_month_05:"May",str_month_06:"June",str_month_07:"July",str_month_08:"August",str_month_09:"September",str_month_10:"October",str_month_11:"November",str_month_12:"December",str_num_photos:function(a,f,g,d){var b=_t.__format__("{0} Photos",1<arguments.length?d:a);1<arguments.length&&a.write(b);return b},
str_privacy_policy:"Privacy Policy",str_terms_of_service:"Terms of Service",superpowers_alert_problem_message:"The server is taking longer than expected to respond, there may be a problem.",title_basic_info:"Basic info",title_confirm:"Confirm",title_done:"Done!",title_messages:"Messages",title_your_network:"Your Network",trusted_network_build_network_unavailable:"<b>Your Hot or Not network is temporarily unavailable.</b> You'll be able to use this service in a few minutes.",trusted_network_chat_blocked_female:function(a,
f,g,d){var b=_t.__format__("{0} only wants to chat with people who are in her network",1<arguments.length?d:a);1<arguments.length&&a.write(b);return b},trusted_network_chat_blocked_male:function(a,f,g,d){var b=_t.__format__("{0} only wants to chat with people who are in his network",1<arguments.length?d:a);1<arguments.length&&a.write(b);return b},trusted_network_connections_friends_of_friends:"Friends of friends",trusted_network_like_explanation_female:"If she likes you too, you can chat freely.",
trusted_network_like_explanation_male:"If he likes you too, you can chat freely.",trusted_network_like_her:"Like her!",trusted_network_like_him:"Like him!",trusted_network_profile_title_number:function(a,f,g,d){var b=_t.__format__("Shared friends ({0})",1<arguments.length?d:a);1<arguments.length&&a.write(b);return b},trusted_network_their_name_network:function(a,f,g,d){var b=_t.__format__("{0}'s Network",1<arguments.length?d:a);1<arguments.length&&a.write(b);return b},verification_mobile_title:"Verify your mobile",
verification_sms_confirm_title:"Confirm your cell phone number",verification_sms_didntgetorwrongnumber:"Didn\u2019t get the text or entered the wrong number?",verification_sms_entercellforpincode:"Enter your cell phone number and we'll text you to confirm it.",verification_sms_entermobilenumber:"Enter cell phone number",verification_sms_enterpincode:function(a,f,g,d){var b=_t.__format__("Please enter the pin code from the text message we\u2019ve sent you to number <b>{0}</b>.",1<arguments.length?
d:a);1<arguments.length&&a.write(b);return b},verification_sms_pincode_placeholder:"Enter pin code",verification_sms_willnotshare:"<b>Note:</b> This is only to get Verified Status. We will not share your number with anyone.",wap_oops_500:"Oops! Something went wrong",wap_photo_uploading:"Thanks! Your photo will appear in your album soon.",wap_pwd_req_failed:"Sorry, your contact details have not been recognized",wap_reg_facebook_failed:"Sorry, Facebook didn't respond",wap_reg_ifemale:"Girls",wap_reg_imale:"Guys",
wap_signin_email_or_mobile:"Email or cell phone",web_landing_description:"Find out who is Hot around you! Check out how Hot you are!",web_landing_description_awards:"Are you hot.. or not? Rate photos, share your rating, oh, and if someone really likes you, we'll let you know.",web_landing_download:"Download the free app!",web_landing_facebook_description:"We will never post anything on Facebook without your permission",web_landing_legacy_description:"Hot or Not was completely renovated. If you want to use the previous version, you can get all functionality at <strong>badoo.com</strong>",
web_landing_onlogin:function(a,f,g,d){var b=_t.__format__("Welcome, {0}! To start using Hot or Not, please download the app:",1<arguments.length?d:a);1<arguments.length&&a.write(b);return b},wrapper_updating:"Updating..."};
(function(){function a(a,c){return a.write("<div>").section(c.get("_t"),c,{block:f},null).write('</div><span class="info">').reference(c.get("version"),c,"h").exists(c.get("build"),c,{block:g},null).write(" ").exists(c.get("hostname"),c,{block:d},null).write("</span>")}function f(a,c){return a.reference(c.get("about_description"),c,"h",["s"])}function g(a,c){return a.write("<br>build: ").reference(c.get("build"),c,"h")}function d(a,c){return a.write("<br>hostname: ").reference(c.get("hostname"),c,
"h")}dust.register("about-settings",a);return a})();
(function(){function a(a,e){return a.write('<div class="description">').exists(e.get("description"),e,{"else":f,block:d},null).write('</div><div class="buttons-container">').exists(e.get("libraryNativeEnabled"),e,{block:b},null).exists(e.get("libraryEnabled"),e,{block:h},null).exists(e.get("cameraEnabled"),e,{block:j},null).exists(e.get("facebookEnabled"),e,{block:l},null).write('</div><div class="terms">').section(e.get("_t"),e,{block:p},null).write('</div><div class="add-photos-loading">').section(e.get("_t"),e,
{block:n},null).write("</div>")}function f(a,b){return a.section(b.get("_t"),b,{block:g},null)}function g(a,b){return a.reference(b.get("WindowsPhone_Photos_Add_You"),b,"h")}function d(a,b){return a.reference(b.get("description"),b,"h")}function b(a,b){return a.write('<div class="upload-button"><div id="library-button" class="popup-action touchable"></div><div class="description">').section(b.get("_t"),b,{block:c},null).write("</div></div>")}function c(a,b){return a.reference(b.get("iPhone_btn_photo_chooseExisting"),
b,"h")}function h(a,b){return a.write('<div class="upload-button"><form id="upload-form" target="upload-frame" action="photoUpload" method="post" enctype="multipart/form-data"><input id="file-picker" type="file" accept="image/*" name="fileData"/><input type="hidden" name="client" id="client" value="').reference(b.get("sessionId"),b,"h").write('"/><input type="hidden" name="album" id="album" value="').reference(b.get("albumId"),b,"h").write('"/></form><iframe id="upload-frame" name="upload-frame" src="about:blank"></iframe><div class="description">').section(b.get("_t"),
b,{block:e},null).write("</div></div>")}function e(a,b){return a.reference(b.get("iPhone_btn_photo_chooseExisting"),b,"h")}function j(a,b){return a.write('<div class="upload-button"><div id="camera-button" class="popup-action touchable"></div><div class="description">').section(b.get("_t"),b,{block:i},null).write("</div></div>")}function i(a,b){return a.reference(b.get("photos_cmd_capture"),b,"h")}function l(a,b){return a.write('<div class="upload-button"><div id="facebook-button" class="popup-action touchable needsclick"></div><div class="description">').section(b.get("_t"),
b,{block:o},null).write("</div></div>")}function o(a,b){return a.reference(b.get("gallery_import_facebook"),b,"h")}function p(a,b){return a.reference(b.get("photos_str_upload_disclaimer"),b,"h")}function n(a,b){return a.reference(b.get("photos_str_camera_loading"),b,"h")}dust.register("add-photos-popup",a);return a})();
(function(){function a(a,b){return a.write('<ul class="app-menu"><li class="app-menu-item app-menu-item-own-profile').notexists(b.get("userPhoto"),b,{block:f},null).write('"><span class="app-menu-icon"').section(b.get("userPhoto"),b,{block:g},null).write('></span><span class="app-menu-user-name">').reference(b.get("userName"),b,"h").write('</span><span class="app-menu-user-location">').reference(b.get("userLocation"),b,"h").write("</span></li>").section(b.get("items"),b,{block:d},null).write("</ul>")}
function f(a){return a.write(" no-photo")}function g(a,b){return a.write(' style="background-image: url(').reference(b.getPath(!0,[]),b,"h").write(')"')}function d(a,d){return a.write('<li class="touchable app-menu-item app-menu-item-').reference(d.get("page"),d,"h").write('"><span class="app-menu-icon"></span>').reference(d.get("title"),d,"h").section(d.get("hasNotificationsBadge"),d,{block:b},null).write("</li>")}function b(a,b){return a.write('<span class="app-menu-notification">').reference(b.get("notifications"),
b,"h").write("</span>")}dust.register("app-menu",a);return a})();
(function(){function a(a,d){return a.write("<span>").reference(d.get("message"),d,"h",["s"]).write('</span><div class="button-container').section(d.get("stacked"),d,{block:f},null).write('"><button class="').reference(d.get("noClass"),d,"h").write(' popup-action">').reference(d.get("noText"),d,"h").write('</button><button class="').reference(d.get("yesClass"),d,"h").write(' popup-action">').reference(d.get("yesText"),d,"h").write("</button></div>")}function f(a){return a.write(" stacked")}dust.register("confirm-popup",
a);return a})();
(function(){function a(a,b){return a.write('<div class="encounters-person-photo"></div><p class="encounters-person-name">').reference(b.get("name"),b,"h").write('</p><p class="encounters-person-photos-count">').reference(b.get("photosCount"),b,"h").write('</p><div class="encounters-person-info"><div class="friends-in-common"><div class="friends-in-common-text">').section(b.get("_t"),b,{block:f},null).write('</div><div class="friends-connections-count"></div></div><div class="interests-in-common"><div class="interests-in-common-text">').section(b.get("_t"),b,
{block:g},null).write('</div><div class="interests-in-common-count"></div></div></div><div class="no-stamp"></div><div class="yes-stamp"></div>')}function f(a,b){return a.reference(b.get("encounters_friends_in_common"),b,"h")}function g(a,b){return a.reference(b.get("encounters_interests_in_common"),b,"h")}dust.register("encounters-person",a);return a})();
(function(){function a(a,e){return a.write('<div class="enc-bottom"><div class="enc-user-stats"><span class="stat overall"><b>').reference(e.get("overallScore"),e,"h",["s"]).write('</b><i></i></span><span class="stat friends"><b>').reference(e.get("friendsInCommonString"),e,"h",["s"]).write('</b><i></i></span><span class="stat interests"><b>').reference(e.get("interestsString"),e,"h",["s"]).write('</b><i></i></span></div><div class="encounters-buttons"><div class="encounters-button encounters-button-yes touchable"></div><div class="encounters-button encounters-button-no touchable"></div></div></div><div id="encounters-searching"><span id="encounters-searching-radar"></span><p id="encounters-searching-message">').section(e.get("_t"),
e,{block:f},null).write('</p><p id="encounters-searching-message-no-more">').section(e.get("_t"),e,{block:g},null).write('<span class="encounters-try-again">').section(e.get("_t"),e,{block:d},null).write('</span></p><p id="encounters-message-offline">').section(e.get("_t"),e,{block:b},null).write('<span class="encounters-try-again">').section(e.get("_t"),e,{block:c},null).write("</span></p></div>")}function f(a,b){return a.reference(b.get("hotornot_loading_encounters"),b,"h")}function g(a,b){return a.reference(b.get("encounters_come_back_soon"),
b,"h",["s"])}function d(a,b){return a.reference(b.get("iphone_reconnect_button"),b,"h",["s"])}function b(a,b){return a.reference(b.get("error_connection_non_modal_no_internet"),b,"h",["s"])}function c(a,b){return a.reference(b.get("iphone_reconnect_button"),b,"h",["s"])}dust.register("encounters",a);return a})();
(function(){function a(a,d){return a.write('<ul class="inbox-list">').section(d.get("albums"),d,{block:f},null).write("</ul>")}function f(a,d){return a.write('<li id="').reference(d.getPath(!1,["data_","aid"]),d,"h").write('" class="inbox-item"><span class="inbox-item-content"><span class="inbox-item-image" style="background-image: url(').reference(d.getPath(!1,["data_","coverPhoto","thumbnailUrl"]),d,"h").write(');"></span><div class="inbox-info-container"><div class="inbox-item-name">').reference(d.getPath(!1,
["data_","name"]),d,"h").write('</div><div class="inbox-item-display-message">').reference(d.getPath(!1,["data_","photoCountDescription"]),d,"h").write('</div></div><span class="inbox-item-chevron"></span></span></li>')}dust.register("facebook-albums",a);return a})();
(function(){function a(a,g){return a.write('<div id="facebook-connect-button" class="button needsclick">').section(g.get("facebookButtonText"),g,{"else":f,block:d},null).write("</div><span>").section(g.get("_t"),g,{block:b},null).write("</span>")}function f(a,b){return a.write(" ").section(b.get("_t"),b,{block:g},null).write(" ")}function g(a,b){return a.write(" ").reference(b.get("landing_useFacebook"),b,"h").write(" ")}function d(a,b){return a.reference(b.getPath(!0,[]),b,"h").write(" ")}function b(a,
b){return a.reference(b.get("web_landing_facebook_description"),b,"h")}dust.register("facebook-connect-button",a);return a})();
(function(){function a(a,b){return a.write('<div class="subtitle">').section(b.get("_t"),b,{block:f},null).write('</div><div id="contact-details-container"></div><button class="green-button">').section(b.get("_t"),b,{block:g},null).write('</button><div id="loading-spinner" class="loading hidden"></div>')}function f(a,b){return a.reference(b.get("signin_forgot_password_overview_html_format_android"),b,"h",["s"])}function g(a,b){return a.reference(b.get("profile_settings_password"),b,"h")}dust.register("forgot-password-page",
a);return a})();
(function(){function a(a,d){return a.write('<label for="').reference(d.get("id"),d,"h").write('">').section(d.get("label"),d,{block:f},null).write('<pre></pre><textarea class="').reference(d.get("type"),d,"h").write('-input static-header" rows="1" name="').reference(d.get("id"),d,"h").write('" id="').reference(d.get("id"),d,"h").write('" placeholder="').reference(d.get("placeholder"),d,"h").write('">').reference(d.get("value"),d,"h").write("</textarea></label>")}function f(a,d){return a.write('<label for="').reference(d.get("id"),d,
"h").write('">').reference(d.getPath(!0,[]),d,"h").write("</label>")}dust.register("form-input",a);return a})();(function(){function a(a,g){return a.write('<input class="button submit-button" type="submit" name="').reference(g.get("id"),g,"h").write('" id="').reference(g.get("id"),g,"h").write('" value="').reference(g.get("value"),g,"h").write('"/>')}dust.register("form-submit",a);return a})();
(function(){function a(a,b){return a.write('<div class="friend-connections-row">').section(b.get("friends"),b,{block:f},null).write("</div>")}function f(a,b){return a.write('<div class="friend-connection" ').exists(b.get("photo"),b,{block:g},null).write('><span class="connection-name">').reference(b.get("name"),b,"h").write("</span>").helper("eq",b,{block:d},{key:1,value:c,type:"number"}).write("</div>")}function g(a,b){return a.write('style="background-image: url(').reference(b.get("photo"),b,"h").write(');"')}
function d(a,e){return a.write(" ").section(e.get("firstConnectionProviders"),e,{block:b},null)}function b(a,b){return a.write('<span class="connection-provider" style="background-image:url(').reference(b.getPath(!0,[]),b,"h").write(')"></span>')}function c(a,b){return a.reference(b.get("$idx"),b,"h")}dust.register("friend-connections",a);return a})();
(function(){function a(a,b){return a.write('<span></span><div class="user-card"><span class="user-image"></span><div class="interests-in-common"><strong></strong><span>').section(b.get("_t"),b,{block:f},null).write('</span></div><div class="friends-in-common"><strong></strong><span>').section(b.get("_t"),b,{block:g},null).write("</span></div></div>")}function f(a,b){return a.reference(b.get("encounters_interests_in_common"),b,"h")}function g(a,b){return a.reference(b.get("encounters_friends_in_common"),
b,"h")}dust.register("initial-chat",a);return a})();
(function(){function a(a,b){return a.section(b.get("interests"),b,{block:f},null).write(" ").section(b.get("moreToShow"),b,{block:c},null)}function f(a,b){return a.write(" ").helper("gte",b,{block:g},{key:b.get("groupId"),value:9}).write(" ")}function g(a,e){return a.write('<div class="interest group-').reference(e.get("groupId"),e,"h").section(e.get("isMatched"),e,{block:d},null).section(e.get("collapsable"),e,{block:b},null).write('"><span style="background-image: url(\'img/interests/interests_').reference(e.get("groupId"),e,
"h").write('.png\');" class="interest-icon"></span>').reference(e.get("name"),e,"h").write("</div>")}function d(a){return a.write(" matched")}function b(a){return a.write(" collapsable")}function c(a){return a.write('<div class="interest group-moreToShow"></div>')}dust.register("interests",a);return a})();
(function(){function a(a,e){return a.write('<div class="carousel-wrapper landing-page-carousel"><div class="carousel"><div class="carousel-slide slide1"><p>').section(e.get("_t"),e,{block:f},null).write('</p></div><div class="carousel-slide slide2"><p>').section(e.get("_t"),e,{block:g},null).write('</p></div><div class="carousel-slide slide3"><p>').section(e.get("_t"),e,{block:d},null).write('</p></div><div class="carousel-slide slide4"><h3>').section(e.get("_t"),e,{block:b},null).write("</h3><p>").section(e.get("_t"),
e,{block:c},null).write("</p></div></div></div>")}function f(a,b){return a.reference(b.get("landing_screen1_description"),b,"h",["s"])}function g(a,b){return a.reference(b.get("landing_screen2_description"),b,"h",["s"])}function d(a,b){return a.reference(b.get("landing_screen3_description"),b,"h",["s"])}function b(a,b){return a.reference(b.get("landing_screen4_title"),b,"h",["s"])}function c(a,b){return a.reference(b.get("landing_screen4_description"),b,"h",["s"])}dust.register("landing-page-carousel",
a);return a})();
(function(){function a(a,e){return a.write('<div class="matches-filter" data-tools="true"><form id="matches-search-form"><input type="text" name="matches-search-input" id="matches-search-input" placeholder="').section(e.get("_t"),e,{block:f},null).write('"/><button class="button grey-button" id="matches-search-cancel">').section(e.get("_t"),e,{block:g},null).write('</button></form><ul class="matches-filter-options all-active"><li class="matches-filter matches-filter-all active touchable" data-type="ALL" tabindex="0">').section(e.get("_t"),e,
{block:d},null).write('</li><li class="matches-filter matches-filter-unread touchable" data-type="UNREAD" tabindex="0">').section(e.get("_t"),e,{block:b},null).write('</li><li class="matches-filter matches-filter-conversations touchable" data-type="CONVERSATIONS" tabindex="0">').section(e.get("_t"),e,{block:c},null).write('</li></ul></div><ul class="inbox-list"></ul><div class="search-mask"></div>')}function f(a,b){return a.reference(b.get("cmd_filter_search"),b,"h")}function g(a,b){return a.reference(b.get("cmd_cancel"),
b,"h")}function d(a,b){return a.reference(b.get("cmd_filter_all"),b,"h")}function b(a,b){return a.reference(b.get("cmd_filter_unread"),b,"h")}function c(a,b){return a.reference(b.get("connections_filter_chats"),b,"h")}dust.register("matches-view",a);return a})();
(function(){function a(a,c){return a.write('<div class="title">').section(c.get("_t"),c,{block:f},null).write('</div><div class="subtitle">').reference(c.get("subtitle"),c,"h").write('</div><div class="photos-container"><div class="mutual-person"><div class="mutual-person-photo" style="background: url(').reference(c.get("myImageUrl"),c,"h").write(') no-repeat; background-size: cover"></div><div class="mutual-person-name">').reference(c.get("myName"),c,"h").write('</div></div><div class="mutual-person"><div class="mutual-person-photo" style="background: url(').reference(c.get("theirImageUrl"),
c,"h").write(') no-repeat; background-size: cover"></div><div class="mutual-person-name">').reference(c.get("theirName"),c,"h").write('</div></div></div><div id="send-message" data-uid="').reference(c.get("theirId"),c,"h").write('" class="popup-action green-button">').section(c.get("_t"),c,{block:g},null).write('</div><div id="keep-playing" class="popup-action light-grey-button">').section(c.get("_t"),c,{block:d},null).write("</div>")}function f(a,c){return a.reference(c.get("encounters_mutual_title"),
c,"h")}function g(a,c){return a.reference(c.get("encounters_mutual_send_message"),c,"h")}function d(a,c){return a.reference(c.get("encounters_mutual_keep_playing"),c,"h")}dust.register("mutual-popup",a);return a})();
(function(){function a(a,b){return a.write('<div class="subtitle">').section(b.get("_t"),b,{block:f},null).write('</div><div id="contact-details-container"></div><button class="green-button">').section(b.get("_t"),b,{block:g},null).write('</button><div id="loading-spinner" class="loading hidden"></div>')}function f(a,b){return a.reference(b.get("reset_password_description"),b,"h",["s"])}function g(a,b){return a.reference(b.get("reset_password_button"),b,"h")}dust.register("new-password-page",a);return a})();
(function(){function a(a,d){return a.write("<ul>").section(d.get("buttons"),d,{block:f},null).write("</ul>")}function f(a,d){return a.write('<li class="page-menu-button-').reference(d.get("name"),d,"h").write(' page-menu-button"><a href="#').reference(d.get("href"),d,"h").write('">').reference(d.get("text"),d,"h").write('<span class="page-menu-button-notification"></span><i class="page-menu-button-icon"></i></a></li>')}dust.register("page-menu",a);return a})();
(function(){function a(a,b){return a.write('<div id="verification-container"><div class="subtitle">').section(b.get("_t"),b,{block:f},null).write('</div><div id="input-container"></div><div class="button-wrapper"><button class="green-button">').section(b.get("_t"),b,{block:g},null).write('</button></div><div class="disclaimer"></div></div><div id="loading-spinner" class="loading"></div>')}function f(a,b){return a.reference(b.get("verification_sms_entercellforpincode"),b,"h")}function g(a,b){return a.reference(b.get("title_confirm"),
b,"h")}dust.register("phone-verification-page",a);return a})();(function(){function a(a){return a.write('<div class="crop-container"><div class="crop-window"><div class="first-horisontal-marker"></div><div class="second-horisontal-marker"></div><div class="first-vertical-marker"></div><div class="second-vertical-marker"></div><div class="crop-window-image-container"><img class="cropped-image"/></div></div><img class="large-image"/></div>')}dust.register("photo-edit",a);return a})();
(function(){function a(a,d){return a.write('<div class="carousel-wrapper"><div class="carousel">').section(d.get("slides"),d,{block:f},null).write("</div></div>")}function f(a,d){return a.write('<div class="carousel-slide" style="background-image: url(').reference(d.getPath(!0,[]),d,"h").write(');"></div>')}dust.register("profile-page-carousel",a);return a})();
(function(){function a(a,e){return a.write('<div class="heading').section(e.get("hasAwards"),e,{block:f},null).write('"><h3></h3>').section(e.get("hasAwards"),e,{"else":g,block:b},null).write("</div>").section(e.get("hasLegacy"),e,{block:h},null).section(e.get("hasAwards"),e,{block:j},null).write(" ").section(e.get("hasInvite"),e,{block:o},null).write(" ").partial("facebook-connect-button",e.rebase(e.getPath(!0,[])),null).write('<span class="sign-up">').section(e.get("_t"),e,{block:r},null).write("</span>").section(e.get("hasCarousel"),
e,{block:s},null).write('<div class="footer">').section(e.get("hasAppStore"),e,{block:u},null).write('<span class="privacy-policy">').section(e.get("_t"),e,{block:w},null).write('</span><span class="terms-of-service">').section(e.get("_t"),e,{block:t},null).write("</span></div>")}function f(a){return a.write(" has-awards")}function g(a,b){return a.write("<span>").section(b.get("_t"),b,{block:d},null).write("</span>")}function d(a,b){return a.reference(b.get("web_landing_description"),b,"h")}function b(a,
b){return a.write("<span>").section(b.get("_t"),b,{block:c},null).write("</span>")}function c(a,b){return a.reference(b.get("web_landing_description_awards"),b,"h")}function h(a,b){return a.write('<div class="legacy"><i></i><span>').section(b.get("_t"),b,{block:e},null).write("</span></div>")}function e(a,b){return a.reference(b.get("web_landing_legacy_description"),b,"h",["s"])}function j(a,b){return a.write('<div class="awards-block').section(b.get("awardImage"),b,{block:i},null).write('"><div class="inviter" style="background-image: url(').reference(b.get("inviterPhoto"),
b,"h").write(');"></div>').section(b.get("awardImage"),b,{block:l},null).write('<p class="invite-text">').reference(b.get("inviteText"),b,"h",["s"]).write('</p><p class="action-text">').reference(b.get("actionText"),b,"h",["s"]).write("</p></div>")}function i(a){return a.write(" has-award")}function l(a,b){return a.write('<div class="award" style="background-image: url(').reference(b.get("awardImage"),b,"h").write(')"></div>')}function o(a,b){return a.write('<div class="invite-block">').exists(b.get("inviterPhoto"),
b,{block:p},null).section(b.get("promoImages"),b,{block:n},null).write('<p class="invite-text">').reference(b.get("inviteText"),b,"h",["s"]).write('</p><p class="action-text">').reference(b.get("actionText"),b,"h",["s"]).write("</p></div>")}function p(a,b){return a.write('<div class="inviter" style="background-image: url(').reference(b.get("inviterPhoto"),b,"h").write(');"></div>')}function n(a,b){return a.write('<div class="liker" style="background-image: url(').reference(b.getPath(!0,[]),b,"h").write(');"></div>')}
function r(a,b){return a.reference(b.get("landing_use_email"),b,"h",["s"])}function s(a){return a.write('<div id="carousel-wrapper"></div>')}function u(a){return a.write('<span class="app-store"></span>')}function w(a,b){return a.reference(b.get("str_privacy_policy"),b,"h")}function t(a,b){return a.reference(b.get("str_terms_of_service"),b,"h")}dust.register("web-landing",a);return a})();Badoo=Badoo||{};
(function(a){a.Utils=a.Utils||{};var f=a.Utils.Dependencies=_.extend({pending:[],resources:[],requires:[],register:function(a){f.pending=_.without(f.pending,a);f.resources.push(a);f.checkRequires()},load:function(a){f.pending.push(a);var d=document.createElement("script"),b=document.getElementsByTagName("script")[0];d.src="js/"+a+".js";b.parentNode.insertBefore(d,b)},has:function(a){a="string"===typeof a?[a]:a;return 0===_.difference(a,f.resources).length},require:function(a,d){_.isFunction(d)||(d=
function(){});var a="string"===typeof a?[a]:a,b=_.difference(a,f.resources);0===b.length?d():(this.requires.push({dependencies:a,callback:d}),_.each(_.difference(b,f.pending),f.load))},checkRequires:function(){0!==f.requires.length&&(f.requires=_.filter(f.requires,function(a){return 0===_.difference(a.dependencies,f.resources).length?(a.callback(),!1):!0}))}},a.Events)})(Badoo);Badoo=Badoo||{};
(function(a){a.Utils.Logger.getLogger("Badoo.Events");a.Events={on:function(a,g){this.__events__=this.__events__||{};this.__events__[a]||(this.__events__[a]=[]);this.__events__[a].push(g);return this},once:function(a,g){var d=_.once(_.bind(function(){this.off(a,d);g.apply(this,arguments)},this));return this.on(a,d)},off:function(a,g){this.__events__=this.__events__||{};var d=this.__events__[a];if(!d||0===d.length)return this;if(2>arguments.length)d.length=0;else for(var b=0;b<d.length;b++)d[b]===
g&&d.splice(b,1);return this},trigger:function(a){this.__events__=this.__events__||{};var g=this.__events__[a],d=Array.prototype.splice.call(arguments,1,1);if(!g||0===g.length)return this;for(var b=g.length-1;0<=b;b--)if(_.isFunction(g[b]))try{g[b].apply(this,d)}catch(c){}return this}}})(Badoo);Badoo=Badoo||{};(function(a){var f=function(){};_.extend(f.prototype,a.Events);a.GlobalEvents=new f})(Badoo);var Badoo=Badoo||{},BadooNative=BadooNative||null;
(function(a,f){a.Utils.Logger.getLogger("NativeBridge");var g=function(){};_.extend(g.prototype,a.Events,{init:function(){f.push.on("push-token",_.bind(this.handlePushToken,this));var b=a.Session.getInstance();b.on("session-startup",function(a){if(a){var b=a.getSessionId(),a=a.getUserId();b&&f.wrapper.sendSessionId(b);a&&f.wrapper.sendUserId(a)}});b.on("login",function(a){a&&a.userId&&f.wrapper.sendUserId(a.userId)})},isNative:function(){return _.isObject(f)&&!0},getPlatform:function(){return f.wrapper.getPlatform()},
getDefaultHostname:function(){return f.wrapper.getDefaultHostname()},getSessionOptions:function(){return{nativePlatform:f.wrapper.getPlatform(),appStoreId:f.wrapper.getAppId(),deviceUUID:f.wrapper.getUdid(),wrapperVersion:f.wrapper.getVersion()}},getUdid:function(){if(this.isNative())return f.wrapper.getUdid();var b=a.Utils.Cookie.get("udid");b||(b="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)}),cookie.set("udid",b,
365,config.get("cookie.domain")));return b},getAppName:function(){var a="HotorNot";this.isNative()&&(a+="-"+this.getPlatform());return a},getNativeVersion:function(){return this.isNative()?f.wrapper.getVersion():""},handlePushToken:function(b){a.Api.getInstance().request("pushtoken",{token:b},function(){})}});var d;g.getInstance=function(){return d||(d=new g)};a.NativeBridge=g})(Badoo,BadooNative);Badoo=Badoo||{};
(function(a,f,g,d){var b="ontouchstart"in f?"touchstart":"mousedown",c="ontouchstart"in f?"touchend":"mouseup";a.Utils.Logger.getLogger("Badoo.UI");var h=null,e=(new Date).getTime(),j=a.NativeBridge.getInstance().isNative(),i,l,o=d.os.android?750:20,p=d.os.android?750:0,n=a.UI=_.extend({},a.Events,{element:null,body:null,offsetGap:0,innerHeight:null,init:function(e){_.bindAll(this);this.element=e;this.body=d(g.body);this.hideAddressBar(!0);this.resize=_.debounce(this.resize,100);this.orientationChange=
_.debounce(this.orientationChange,100);j||(d(f).on("resize",this.resize).on("orientationchange",this.orientationChange),a.GlobalEvents.on("controller-loaded",this.hideAddressBar),this.checkLandscapeBlock());e.on(b,this.touchStart);e.on(c,this.touchEnd);e.get(0).addEventListener("focus",this.onFocus_,!0);e.get(0).addEventListener("blur",this.onBlur_,!0);a.GlobalEvents.once("controller-loaded",this.removeSplashScreen);d.os.ios&&this.body.addClass("ios");d.os.android&&this.body.addClass("android");d.os.oldAndroid&&
this.body.addClass("old-android");d.os.bb10&&this.body.addClass("bb10");this.innerHeight=f.innerHeight},preventScroll_:function(){this.innerHeight=Math.min(this.innerHeight,f.innerHeight);g.body.scrollTop=0},onFocus_:function(a){if(/static-header/.test(a.target.className)){if(f.innerHeight===g.body.clientHeight){setTimeout(_.partial(this.onFocus_,a),100);return}f.onscroll=_.throttle(this.preventScroll_,10);this.preventScroll_()}setTimeout(_.bind(function(){this.trigger("focus",a)},this),o)},onBlur_:function(a){f.onscroll=
null;setTimeout(_.bind(function(){this.hideAddressBar();this.trigger("blur",a)},this),p)},isFormElementActive:function(){var a=g.activeElement;return a&&a.tagName&&-1!==["input","select","textarea"].indexOf(a.tagName.toLowerCase())},isLandscape:function(){return 90===f.orientation||-90===f.orientation},touchStart:function(a){a=d(a.target);!j&&(0===a.closest("form").length&&!this.isFormElementActive())&&this.hideAddressBar();a=a.closest(".touchable");0<a.length&&(a.addClass("touched"),h=a)},touchEnd:function(){h&&
(h.removeClass("touched"),h=null)},resize:_.debounce(function(){(!this.isFormElementActive()||this.isLandscape())&&this.setRootElementSize()},350),orientationChange:function(){this.checkLandscapeBlock();this.hideAddressBar()},checkLandscapeBlock:function(){this.body[this.isLandscape()&&600>f.innerHeight?"addClass":"removeClass"]("has-landscape-block")},setRootElementSize:function(){var b=Math.min(f.innerWidth,768),e=f.innerHeight;b===i&&e===l||(l=e,i=b,g.body.style.height=e+"px",g.body.style.width=
b+"px",this.element.css({width:b+"px",height:e+"px"}),this.offsetGap=(f.innerWidth-b)/2,a.UI.trigger("resize",{width:i,height:l}))},getScreenDimensions:function(){return{width:i,height:l}},hideAddressBar:function(a){this.isFormElementActive()||(a?(a=f.innerHeight,d.os.android?f.scrollTo(0,1):(g.body.style.height="1000px",f.scrollTo(0,0)),g.body.style.height=a+"px",this.setRootElementSize()):requestAnimationFrame(_.partial(n.hideAddressBar,!0)))},removeSplashScreen:function(){var b=null,c=Math.max(500-
((new Date).getTime()-e),0),g=d("#splash-screen");setTimeout(_.bind(function(){var e=_.once(function(){clearTimeout(b);b=null;requestAnimationFrame(function(){a.GlobalEvents.trigger("splash-screen-removed")})});b=f.setTimeout(e,1E4);g.on(d.fx.transitionEnd,function(){d("#splash-screen").remove()});g.addClass("fadeOut").on("DOMNodeRemoved",e)},this),c)}})})(Badoo,window,document,Zepto);Badoo=Badoo||{};
(function(a){a.Utils=a.Utils||{};var f=a.Utils.Dependencies=_.extend({pending:[],resources:[],requires:[],register:function(a){f.pending=_.without(f.pending,a);f.resources.push(a);f.checkRequires()},load:function(a){f.pending.push(a);var d=document.createElement("script"),b=document.getElementsByTagName("script")[0];d.src="js/"+a+".js";b.parentNode.insertBefore(d,b)},has:function(a){a="string"===typeof a?[a]:a;return 0===_.difference(a,f.resources).length},require:function(a,d){_.isFunction(d)||(d=
function(){});var a="string"===typeof a?[a]:a,b=_.difference(a,f.resources);0===b.length?d():(this.requires.push({dependencies:a,callback:d}),_.each(_.difference(b,f.pending),f.load))},checkRequires:function(){0!==f.requires.length&&(f.requires=_.filter(f.requires,function(a){return 0===_.difference(a.dependencies,f.resources).length?(a.callback(),!1):!0}))}},a.Events)})(Badoo);Badoo=Badoo||{};
(function(a,f){var g=window;a.Utils.Logger.getLogger("Persistence");try{g.localStorage.setItem("test","test"),g.localStorage.removeItem("test")}catch(d){g=function(){};Object.defineProperty(g,"localStorage",new function(){var a=[],b={};Object.defineProperty(b,"getItem",{value:function(a){return a&&a in this?this[a]:null},writable:!1,configurable:!1,enumerable:!1});Object.defineProperty(b,"key",{value:function(b){return a[b]},writable:!1,configurable:!1,enumerable:!1});Object.defineProperty(b,"setItem",
{value:function(a,b){a&&(document.cookie="bdlocal_"+escape(a)+"="+escape(b)+"; path=/")},writable:!1,configurable:!1,enumerable:!1});Object.defineProperty(b,"length",{get:function(){return a.length},configurable:!1,enumerable:!1});Object.defineProperty(b,"removeItem",{value:function(a){a&&(document.cookie="bdlocal_"+escape(a)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/")},writable:!1,configurable:!1,enumerable:!1});this.get=function(){a.length=0;for(var e in b)delete b[e];for(var c,d=0,g=document.cookie.split(/\s*;\s*/);d<
g.length;d++)e=g[d].split(/\s*=\s*/),1<e.length&&"bdlocal_"===e[0].substr(0,8)&&(b[c=unescape(e[0].substr(8))]=unescape(e[1]),a.push(c));return b};this.configurable=!1;this.enumerable=!0});for(var b in g.localStorage)g.localStorage.removeItem(b);var c={},h,e;window.addEventListener("pageshow",function(){clearInterval(e);e=setInterval(function(){var a;h={};for(a in g.localStorage)h[a]=g.localStorage[a];for(a in h)if(c[a]!==h[a]){var b=document.createEvent("StorageEvent");b.initStorageEvent("storage",
!0,!0,a,c[a]||"",h[a]||"","/",null);document.dispatchEvent(b)}c=h},1E3)},!1)}var j=function(a){window.addEventListener("storage",f.bind(function(a){this.trigger("persistence",a)},this));this.window=!0===a?window:g};f.extend(j.prototype,a.Events,{getString:function(a){try{return this.window.localStorage.getItem(a)}catch(b){return null}},saveString:function(a,b){try{this.window.localStorage.setItem(a,b)}catch(e){}},remove:function(a){try{this.window.localStorage.removeItem(a)}catch(b){}},getObject:function(a){try{var b=
this.getString(a);return null===b?null:JSON.parse(b)}catch(e){return null}},saveObject:function(a,b){try{f.isObject(b)&&this.saveString(a,JSON.stringify(b))}catch(e){}},getArray:function(a){try{var b=this.getObject(a);return b?b.data:null}catch(e){return null}},getLength:function(){return this.window.localStorage.length},getKey:function(a){try{return this.window.localStorage.key(a)}catch(b){return null}},saveArray:function(a,b){try{f.isObject(b)&&this.saveObject(a,{data:b})}catch(e){}},forEach:function(a){if(f.isFunction(a)){var b=
this.getLength(),e=[],c;for(c=0;c<b;c++)e.push(this.getKey(c));for(c=0;c<b;c++)a.call(this,e[c])}}});var i=null,l=null;j.getInstance=function(a){return!0===a?l||(l=new j(!0)):i||(i=new j)};a.Utils.Persistence=j})(Badoo,_);Badoo=Badoo||{};
(function(a){var f=window.location.hostname,g="hotornot.com",d=f,b=null,c=null,h=!0,e={account:"UA-25578576-16",sampling:10},j={account:"UA-25578576-17",sampling:100},i={account:"UA-25345366-6",sampling:100},l=!1,o=/m(eu1|us1)?\.([^\.]+\.com)/,p=/mqa[^\.]*\.[^\.]+\.com/,n=/.*?\.mshot\.[^\.]+\.com/,r=/[0-9]+\.[0-9]+\.[0-9]+\.[0-9]+/,s=/localhost(-(\w+))?\.[^\.]+\.com/,u=f.match(o);u||(g="friendpath.com");u?(f="m."+u[2],b=e,c=j,l=!0,g=(u[1]?u[1]+".":"")+u[2]):f.match(p)?(c=i,l=!0):f.match(n)?c=i:f.match(r)?
h=!1:(s=f.match(s))?g=s[2]?s[2]+".badoo.d3":"friendpath.com":a.Utils.Logger.getLogger("config").error('Url "'+f+"\" doesn't match any environment");s=function(){a.GlobalEvents.on("update-hostname",_.bind(this.updateHostName,this))};_.extend(s.prototype,a.Events,{data_:{lang:_t.lang,debug:!1,"api.http.port":"80","api.https.port":"443","api.secure":h,"api.timeout":2E4,"api.retries":1,"webcluster.http.hostname":g,"webcluster.http.port":"80","webcluster.https.hostname":g,"webcluster.https.port":"443",
"api.ignoreHostChange":!1,"api.defaultHostname":f,"static.hostname":d,"analytics.google.defaultTracker":"unsampled","analytics.google.sampled":b,"analytics.google.unsampled":c,"default.page":function(){return a.Session.getInstance().isLoggedIn()?"encounters":"landing"},"cookie.domain":"hotornot.com","fb.appId":"187616458022324","crittercism.enabled":l,"crittercism.web":"5165e0a6400205594700000a","crittercism.ios":"5165e11f54830841b400000e","crittercism.android":"5165e1314002056e4e000002"},updateHostName:function(a){a||
(a=this.get("api.defaultHostname"));a&&!this.get("api.defaultHostname")&&this.set("api.defaultHostname",a);var b=null!==a.match(r);a.match(o)?(this.set("crittercism.enabled",!0),this.set("analytics.google.defaultTracker","unsampled"),this.set("analytics.google.sampled",e),this.set("analytics.google.unsampled",j)):a.match(p)?(this.set("crittercism.enabled",!0),this.set("analytics.google.defaultTracker","unsampled"),this.set("analytics.google.unsampled",i)):a.match(n)?(this.set("crittercism.enabled",
!1),this.set("analytics.google.defaultTracker","unsampled"),this.set("analytics.google.unsampled",i)):(this.set("crittercism.enabled",!1),this.set("analytics.google.defaultTracker","unsampled"),this.set("analytics.google.unsampled",null));this.set("api.http.hostname",b?a:"api-"+a);this.set("api.https.hostname",b?a:"api-"+a);this.set("push.hostname",b?a:"push-"+a);this.set("upload.hostname",a);this.set("api.baseHostname",a);a.match(n)&&this.set("api.secure",!1)},get:function(a,b){return _.has(this.data_,
a)?_.result(this.data_,a):2===arguments.length?b:null},set:function(a,b){var e=this.data_[a];this.data_[a]=b;e!==b&&(e={},e[a]=b,this.trigger("config-change",e))}});f=new s;f.updateHostName();if((g=a.Utils.Persistence.getInstance())&&g.getString("config"))for(d=0;d<g.getLength();d++)b=g.getKey(d),0===b.indexOf("config.")&&(c=b.substring(7),f[c]=g.getString(b));a.config=f})(Badoo);Badoo=Badoo||{};
(function(a){var f=a.Utils.Logger.getLogger("Utils.analytics"),g=a.config,d=[],b=function(){d.push(arguments)},c=a.Utils.Analytics=function(){this.pagesValues_=_.values(c.PAGE);this.eventCategories_=_.values(c.EVENT.CATEGORY);this.eventActions_=_.values(c.EVENT.ACTION);this.eventLabels_=_.values(c.EVENT.LABEL);this.dimensions_=_.values(c.DIMENSION)};_.extend(c.prototype,{activeTrackerName_:null,init:function(){var a=document.createElement("iframe");a.src="https://"+g.get("api.defaultHostname")+"/ga.html";
a.style.cssText="width: 1px; height: 1px; position: absolute; top: -10px;";a.onload=function(){b=function(){a.contentWindow.postMessage(Array.prototype.slice.call(arguments,0),"*")};for(var c=0;c<d.length;c++)b.apply(window,d[c]);d=null};document.body.appendChild(a);return this},initTracker:function(e,d){var g=this.getTrackers()[e];if(g){e&&(!this.activeTrackerName_||d)&&this.setActiveTracker(e);var h=a.NativeBridge.getInstance();b("create",g.account,{name:e,sampleRate:g.sampling,storage:"none",clientId:h.getUdid(),
forceSSL:!0});this.setDimension(c.DIMENSION.APP_NAME,h.getAppName());this.setDimension(c.DIMENSION.WEBAPP_VERSION,window._badoo_webapp_version);h.isNative()&&this.setDimension(c.DIMENSION.NATIVE_VERSION,h.getNativeVersion())}},getTrackers:function(){return{sampled:g.get("analytics.google.sampled"),unsampled:g.get("analytics.google.unsampled")}},setActiveTracker:function(a){this.activeTrackerName_=a},trackPage:function(a,c){if(0>this.pagesValues_.indexOf(a))f.error("Trying to track undefined page");
else if(c=c||this.activeTrackerName_)b(c+".set","page",a),b(c+".set","description",a),b(c+".send",{hitType:"pageview",page:a})},sendEvent:function(a,c,d,g,h){if(0>this.eventCategories_.indexOf(a))f.error("Trying to track undefined category");else if(0>this.eventActions_.indexOf(c))f.error("Trying to track undefined action");else if(!d&&0>this.eventLabels_.indexOf(d))f.error("Trying to track undefined label");else if(h=h||this.activeTrackerName_)a={hitType:"event",eventCategory:a,eventAction:c},d&&
(a.eventLabel=d),_.isNumber(g)&&(a.value=g),b(h+".send",a)},setDimension:function(a,c,d){if(0>this.dimensions_.indexOf(a))f.error("Trying to track undefined dimension");else if(d=d||this.activeTrackerName_)_.isString(c)||(c+=""),b(d+".set",a,c)}});c.PAGE={APP_LANDING1:"/landing/screen1",APP_LANDING2:"/landing/screen2",APP_LANDING3:"/landing/screen3",APP_LANDING4:"/landing/screen4",WEB_LANDING:"/weblanding",WEB_LANDING_BADOO:"/weblanding/badoo",WEB_LANDING_INVITE:"/weblanding/invite",WEB_LANDING_AWARDS:"/weblanding/awards",
DATA_INCOMPLETE:"/registration-info-required",ENCOUNTERS:"/game",ENCOUNTERS_MATCH:"/game/match",ENCOUNTERS_APP_PROMO:"/game/app-promo",ENCOUNTERS_APP_RATE:"/game/app-rate",ENCOUNTERS_PHOTO_PROMPT:"/game/add-photo",ENCOUNTERS_FILTER_PROMPT:"/game/filter-prompt",PROFILE:"/their-profile",PROFILE_FULL_SCREEN:"/their-profile/fullscreen",OWN_PROFILE:"/my-profile",OWN_PROFILE_FULL_SCREEN:"/my-profile/fullscreen",OWN_PROFILE_ADD_PHOTO:"/my-profile/add-photo",FILTER:"/filter",LOCATION_EDIT:"/location-edit",
SETTINGS:"/settings",SETTINGS_BASIC:"/settings/basic",SETTINGS_ACCOUNT:"/settings/account",SETTINGS_CONFIRM_DELETE:"/settings/confirm-delete",SETTINGS_NOTIFICATIONS:"/settings/notifications",SETTINGS_ABOUT:"/settings/about",MESSAGES_ALL:"/messages/all",MESSAGES_CONVERSATIONS:"/messages/conversations",MESSAGES_SEARCH:"/messages/search",CHAT_OUTGOING:"/chat/new-outgoing",CHAT_INCOMING:"/chat/new-incoming",CHAT_CONVERSATION:"/chat/conversation",CHAT_ONE_WAY_OUT:"/chat/one-way-out",SIGN_UP:"/sign-up",
SIGN_IN:"/sign-in"};c.EVENT={CATEGORY:{ERROR:"error",USER_ACTION:"user-action",PEER_INTERACTION:"peer-interaction"},ACTION:{API:"api",SIGN_IN:"sign-in",REGISTRATION:"registration",VOTE:"vote",BLOCK:"block",EDIT:"edit",DELETE:"delete",CHAT:"chat",REDIRECT:"redirect",OPEN:"open"},LABEL:{FACEBOOK:"facebook",NAME:"name",GENDER:"gender",DOB:"dob",LOCATION:"location",COMPLETE:"complete",INCOMPLETE:"incomplete",YES:"yes",NO:"no",MESSAGE:"message",FIRST_MESSAGE_SENT:"first-message-sent",FIRST_MESSAGE_RECEIVED:"first-message-received",
NOT_INTERESTED:"not-interested",REPLY_NOW:"reply-now",SESSION_STARTUP:"session-startup",AUTHENTICATE:"authenticate",APP_DOWNLOAD:"app-download",APP_RATE:"app-rate",PUSH:"push",EMAIL:"email"}};c.TIMING={CATEGORY:{},VAR:{},LABEL:{}};c.DIMENSION={GENDER:"dimension1",AGE:"dimension2",HAS_PHOTO:"dimension4",WEBAPP_VERSION:"dimension3",NATIVE_VERSION:"dimension5",APP_NAME:"dimension6",BMA_CLUSTER:"dimension7"};c.METRIC={};var h;c.getInstance=function(){return h||(h=new c)}})(Badoo,BadooNative,window);
Badoo=Badoo||{};(function(a,f){a.Utils.crittercism={init:function(a){this.load(function(){f.Crittercism.init({appId:a,appVersion:""+f._badoo_webapp_build})})},load:function(a){var d=document,b=d.getElementsByTagName("script")[0];d.getElementById("crittercism-js")||(d=d.createElement("script"),d.id="crittercism-js",d.onload=a,d.src="https://d1a62freaxhn7x.cloudfront.net/v1/crittercismClientLibraryMin.js",b.parentNode.insertBefore(d,b))}}})(Badoo,window);Badoo=Badoo||{};
(function(a,f){a.Utils.Logger.getLogger("Badoo.Utils.Helpers");var g=a.Utils.Timing.getInstance(),d=/^\/\/[^\/]*?\.badoo\.(com|eu)/,b=function(b){return a.NativeBridge.getInstance().isNative()&&d.test(b)?"https:"+b:b},c={},h=a.Utils.Helpers={classExtend:function(b){if(this===a.Utils.Helpers)return null;var c=this,d=function(){return c.apply(this,arguments)},g=function(){this.constructor=d};g.prototype=c.prototype;d.prototype=new g;_.extend(d,c);b&&_.extend(d.prototype,b);d._super=c.prototype;return d},
parseUrls:function(e){if(!e)return e;if("string"===typeof e)return b(e);for(var c in e)e.hasOwnProperty(c)&&("string"===typeof e[c]&&(e[c]=b(e[c])),"object"===typeof e[c]&&(e[c]=a.Utils.Helpers.parseUrls(e[c])));return e},preloadImages:function(a,b){_.each(a,_.bind(function(a){this.preloadImage(a,b)},this))},preloadImage:function(a,b){var b=_.isFunction(b)?b:_.identity,d=null,h=c[a];h||(d=_.uniqueId("preload-image-"),g.event(d+"-start",{group:"load-image",url:a}));h&&_.isFunction(b)?b.call(this,h.url,
h.width,h.height,!0):(h=document.createElement("img"),h.onload=function(){var h=0,f=0;if("naturalHeight"in this){if(0===this.naturalHeight+this.naturalWidth){this.onerror();return}h=this.naturalWidth;f=this.naturalHeight}else{if(0===this.width+this.height){this.onerror();return}h=this.width;f=this.height}d&&g.event(d+"-end");c[a]={url:a,width:h,height:f};b(a,h,f)},h.onerror=function(){d&&g.event(d+"-end");b(null)},h.src=a)},getPlaceholderImage:function(a){return"img/misc/empty-avatar-"+("MALE"===
a?"male":"FEMALE"===a?"female":"nogender")+".png"},noop:function(){},xhrRequestWithCredentials:function(a){a=a||f.ajaxSettings.xhr();a.withCredentials=!0;return a},getTranslatedMonth:function(a){a=parseInt(a,10);return _t["str_month_"+(10>a?"0"+a:a)]},getFormattedDate:function(a){var a=a.split("-"),b=a[0];return a[2]+" "+this.getTranslatedMonth(a[1])+" "+b},getInnerTextFromHTML:function(a){if(_.isString(a)){var b=document.createElement("div");b.innerHTML=a;return b.textContent}return""},parseBackgroundImage:function(a){f.zepto.isZ(a)&&
(a=a.get(0));return!_.isElement(a)?"":(a=a.style.backgroundImage.match(/url\((http|)(s|)(:|)(\/\/|)(.*?)\)/))&&a[5]?h.parseUrls("//"+a[5]):""},createCssTransformRule:function(a){var b="",c;for(c in a)if(a.hasOwnProperty(c)){var d=a[c],b=b+(c+"(");_.isArray(d)?(d=_.map(d,_.bind(function(a){return this.addTransformUnit_(c,a)},this)),b+=d.join(", ")):b+=this.addTransformUnit_(c,a[c]);b+=") "}return f.trim(b)},addTransformUnit_:function(a,b){var c=b!=parseInt(b);return!c&&(0<=a.indexOf("translate")||
0<=a.indexOf("perspective"))?b+"px":!c&&(0<=a.indexOf("rotate")||0<=a.indexOf("skew"))?b+"deg":b}}})(Badoo,Zepto);(function(a){var f=function(a){this.max=a;this.count=0;_.bindAll(this,"getCountFilter")};f.prototype.getCountFilter=function(){return this.count++<this.max};a.Utils.Helpers=_.defaults({getCountFilter:function(a){return(new f(a)).getCountFilter}},a.Utils.Helpers)})(Badoo);Badoo=Badoo||{};
(function(a,f,g,d){Badoo.Utils.Logger.getLogger("Badoo.Utils.DOM");var b=f.satisfy,c=a.Utils.DOM={renderTemplate:function(a,b){var c=dust.makeBase({}),g="",b=_.extend(_.isObject(b)?_.clone(b):{},{_t:f._t});c.push(b);dust.render(a,b,function(a,b){b&&(g=b)});try{return d(g)}catch(l){return d()}},satisfy:function(a){1<arguments.length&&(a=_.map(arguments,function(a){return a.trim()}).join(" "));var e=b(a);return 1<e.length?_.toArray(e):e[0]},$satisfy:function(a){1<arguments.length&&(a=_.map(arguments,
function(a){return a.trim()}).join(" "));return d(_.toArray(b(a)))},createElement:function(a,b,c){2===arguments.length&&!d.isPlainObject(b)&&(c=b,b=null);var f=g.createElement(a||"div"),l;for(l in b)_.isUndefined(b[l])||("className"===l?f.className=b[l]:"text"===l?f.textContent=b[l]:"for"===l?f.htmlFor=b[l]:"html"===l?f.innerHTML=b[l]:f.setAttribute(l,b[l]));if(c)if(_.isElement(c))f.appendChild(c);else if(_.isString(c))f.innerHTML=dust.escapeHtml(c);else{c=_.toArray(c);for(l=0;l<c.length;l++)_.isString(c[l])?
f.appendChild(g.createTextNode(dust.escapeHtml(c[l]))):f.appendChild(c[l])}return f},removeForEdit:function(a){var a=_.isFunction(a.get)?a.get(0):a,b=a.parentNode,c=a.nextSibling;if(!b)return _.identity;b.removeChild(a);return function(){c?b.insertBefore(a,c):b.appendChild(a)}},escapeHtml:dust.escapeHtml};c.generator=function(){this.el_=c.createElement.apply(c,arguments)};c.generator.prototype={el_:null,append:function(){this.el_.appendChild(c.createElement.apply(c,arguments));return this},prepend:function(){this.el_.insertBefore(c.createElement.apply(c,
arguments),this.el_.children[0]);return this},getElement:function(a){return a?d(this.el_):this.el_}}})(Badoo,window,document,Zepto);Badoo=Badoo||{};
(function(a){var f=function(){_.bindAll(this);this.log=a.Utils.Logger.getLogger("Utils/Update")};_.extend(f.prototype,a.Events,{initialized_:!1,intervalId_:null,init:function(){if(this.initialized_)return this;this.initialized_=!0;this.intervalId_=setInterval(this.getRemoteVersion_,9E5);return this},getRemoteVersion_:function(){$.ajax({url:"version.json",dataType:"json",data:{v:window._badoo_webapp_build},type:"GET",success:this.onReceiveRemoteVersion_,error:this.onRemoteVersionFail_})},onReceiveRemoteVersion_:function(a){if(a&&
!("number"!==typeof a.build||isNaN(a.build)))a=a.build,"undefined"!==typeof window._badoo_webapp_build&&("undefined"===typeof a||null===a||a>window._badoo_webapp_build&&this.trigger("new-version",a))},onRemoteVersionFail_:function(){}});f.EVENTS={NEW_VERSION:"NEW_VERSION"};var g;f.getInstance=function(){return g||(g=new f)};a.Utils.Update=f})(Badoo);Badoo=Badoo||{};
(function(a){var f=a.Proto={},g=function(a){return!_.isString(a)?"":-1!==a.lastIndexOf("-")?a.substring(a.lastIndexOf("-")+1):_.last(a.split("."))};f.Object=function(a){if(_.isArray(a))return _.map(a,function(a){return _.isObject(a)?f.Object.fromJSON(a):a});this.data_=a;this.className_=g(a.$java$class);this.extractCache_={}};f.Object.prototype={data_:null,className_:"",extractCache_:null,getClass:function(){return this.className_},clearCache:function(){this.extractCache_={}},extract:function(a,b,
c){c=!!c;a=a.replace(/\[(\w+)\]/g,".$1");if(!c&&_.has(this.extractCache_,a))return this.extractCache_[a];for(var g=a.split("."),e=this.data_,j,i,l;g.length;){j=g.shift();l="has"+j.charAt(0).toUpperCase()+j.substring(1);i=j+"_";if(null===e||!1===e[l])return this.extractCache_[a]=null,b||null;if(void 0!==e[j])e=e[j];else if(void 0!==e[i])e=e[i];else if(e instanceof f.Object&&null!==e.extract(j))e=e.extract(j);else return this.extractCache_[a]=null,b||null}if(c)return e;e=f.Object.fromJSON(e);return this.extractCache_[a]=
e}};f.Object.extend=a.Utils.Helpers.classExtend;f.Object.fromJSON=function(a){if(a instanceof f.Object)return a;if(_.isArray(a))return a.map(f.Object.fromJSON);if(!_.isObject(a))return a;var b=g(a.$java$class);return new (f[_.has(f,b)?b:"Object"])(a)};f.Object.isProtoObject=function(a){return a instanceof f.Object}})(Badoo);Badoo=Badoo||{};
(function(a){var f=a.Proto.Object;a.Utils.Logger.getLogger("Badoo.Proto.ClientUserList");a.Proto.ClientUserList=f.extend({getMessages:function(){return _.map(this.extract("section[0].user"),function(a){var d,b=a.extract("unreadMessages");d=a.extract("isMatch")?a.extract("unread")?"new-match":"match":0<b?"new-message":"message";return{id:a.extract("uid"),name:a.extract("name"),image:a.getPreviewImage(),showConnections:"message"!==d,friendConnections:a.extract("friendsInCommon")||0,interestsInCommon:a.extract("interestsInCommon")||
0,unreadMessages:b||null,type:d,displayMessage:a.extract("displayMessage"),onlineStatus:a.extract("onlineStatus")}})},getOffset:function(){var a=this.extract("section[0].user");return _.isArray(a)?a.length:0},isLast:function(){return!!this.extract("section[0].lastBlock")},merge:function(a){if(!a)return this;var d=a.data_;this.data_.section_=_.map(this.data_.section_,function(a,c){if(!d.section_[c])return a;var g=[];a.user_=_.filter(d.section_[c].user_.concat(a.user_),function(a){return-1===g.indexOf(a.uid_)?
(g.push(a.uid_),!0):!1});return a});this.extractCache_={};return this},removeUsers:function(a){if(!_.isArray)return this;this.data_.section_=_.map(this.data_.section_,function(d){d.user_=_.reject(d.user_,function(b){return-1!==a.indexOf(b.uid_)});return d});this.extractCache_={};return this},onlyConversations:function(){var a=_.clone(this.data_);a.section_=_.map(this.data_.section_,function(a){var b=_.clone(a);b.user_=_.filter(a.user_,function(a){return!0!==a.isMatch_});return b});return f.fromJSON(a)},
search:function(a){var a="string"===typeof a?a.toLowerCase():"",d=_.clone(this.data_);if(!a)return d.section_=[{user_:[]}],f.fromJSON(d);d.section_=_.map(this.data_.section_,function(b){var c=_.clone(b);c.user_=_.filter(b.user_,function(b){return b.name_&&-1!==b.name_.toLowerCase().indexOf(a)});return c});return f.fromJSON(d)},hasUsers:function(){var a=this.extract("section[0].user");return _.isArray(a)&&0<a.length},setItemToRead:function(a){return this.modifyUser_(a,function(a){a.unread_=!1;a.unreadMessages_=
0;return a})},updateDisplayMessage:function(a,d){return this.modifyUser_(a,function(a){a.displayMessage_=d;return a})},modifyUser_:function(a,d){a+="";d=_.isFunction(d)?d:_.identity;this.data_.section_=_.map(this.data_.section_,function(b){b.user_=_.map(b.user_,function(b){b.uid_===a&&(b=d.call(this,b),this.extractCache_={});return b},this);return b},this);return this},moveSectionUserToTop:function(a){for(var a=a+"",d,b=-1,c=0;c<this.data_.section_.length;c++){d=this.data_.section_[c];for(var h=0;h<
d.user_.length;h++)d.user_[h].uid_===a&&(b=h);if(-1!==b){d.user_.unshift(d.user_.splice(b,1)[0]);this.extractCache_={};break}}return this}})})(Badoo);Badoo=Badoo||{};(function(a){var f=a.Utils.Helpers;a.Proto.SectionUser=a.Proto.Object.extend({getPreviewImage:function(){var a=this.extract("previewImageUrl");return a?f.parseUrls(a):f.getPlaceholderImage(this.extract("gender"))}})})(Badoo);Badoo=Badoo||{};
(function(a){var f=a.Utils.Helpers;a.Proto.SearchResult=a.Proto.Object.extend({interestsInCommon_:null,getLargeImage:function(){return this.getImages()[0]},getImages:function(){var a=this.extract("photos");return _.map(a,function(a){return f.parseUrls(a.extract("largeUrl"))})},getPersonId:function(){return this.extract("person.uid")},getName:function(){return this.extract("person.name")},getInterests:function(){return this.extract("interests")},getAmountInterestInCommon:function(){if(_.isNull(this.interestsInCommon_)){var a=
this.extract("interests"),d=0;if(a)for(var b=0;b<a.length;b++)2!==a[b].extract("groupId")&&!0===a[b].extract("isMatched")&&d++;this.interestsInCommon_=d}return this.interestsInCommon_}})})(Badoo);Badoo=Badoo||{};(function(a){var f=a.Utils.Helpers;a.Proto.Album=a.Proto.Object.extend({getLargePhotos:function(){var a=this.extract("largePhotoIds")||[];return f.parseUrls(a)}})})(Badoo);Badoo=Badoo||{};
(function(a){var f=a.Proto.Award=a.Proto.Object.extend({});f.getFakeAward=function(a,d){return f.fromJSON({hasAwardId:!1,hasPromoBlock:!1,awardImages_:[],sharingProviders_:[],hasThumbnail:!1,hasTitle:!1,hasDescription:!0,description_:d,hasProgress:!1,hasShared:!1,hasSecretAward:!1,secretAward_:!1,hasProfileRating:!0,profileRating_:a,$java$class:"com.badoo.proto.Badoo-Award"})}})(Badoo);Badoo=Badoo||{};
(function(a){var f=a.Utils.Helpers,g=/^SIMPLE|MULTIMEDIA$/;a.Proto.OpenChatResponse=a.Proto.Object.extend({getChatMessages:function(){return _.reduce(this.extract("decodedMessages"),function(a,b){if("String"===b.getClass()||"ChatMessage"===b.getClass()&&g.test(b.extract("messageType")))a.all.push(b.getChatMessage()),"ChatMessage"===b.getClass()&&(b.isYourChatMessage()?a.yours++:a.theirs++);return a},{all:[],yours:0,theirs:0})},hasMessage:function(d){if(!a.Proto.Object.isProtoObject(d))return!1;for(var d=
d.extract("uid"),b=this.extract("decodedMessages"),c=0;c<b.length;c++)if(b[c].extract("uid")===d)return!0;return!1},addMessage:function(a){this.data_.decodedMessages=this.data_.decodedMessages||[];this.data_.decodedMessages.push(a);this.extractCache_&&(this.extractCache_.decodedMessages=null,delete this.extractCache_.decodedMessages);return this},getTheirPhoto:function(){var a=this.extract("openChat.chatInstance.theirIconId");return a?f.parseUrls(a):f.getPlaceholderImage(this.extract("openChat.user.gender"))},
getTheirLargePhoto:function(){var a=this.extract("openChat.user.largeImageId");return a?f.parseUrls(a):this.getTheirPhoto()}})})(Badoo);Badoo=Badoo||{};
(function(a){a.Proto.ChatMessage=a.Proto.Object.extend({getChatMessage:function(){var a=this.extract("multimedia");return{message:a?this.data_.mssg_:_.escape(this.data_.mssg_),type:this.isYourChatMessage()?"yours":"theirs",multimedia:!a?null:{format:a.extract("format"),url:a.extract("url"),id:a.extract("id"),visibilityType:a.extract("visibility.visibilityType")}}},isYourChatMessage:function(){return this.extract("fromPersonId")===a.Session.getInstance().getUserId()}})})(Badoo);Badoo=Badoo||{};
(function(a){a.Proto.String=a.Proto.Object.extend({getChatMessage:function(){return{type:"time",message:this.extract("value")}}})})(Badoo);Badoo=Badoo||{};(function(a){var f=a.Utils.Helpers;a.Proto.Profile=a.Proto.Object.extend({getPreviewImage:function(){var a=this.extract("person.previewImageId");return a?f.parseUrls(a):f.getPlaceholderImage(this.extract("person.gender"))},getInterests:function(){return this.extract("profile.interests")}})})(Badoo);Badoo=Badoo||{};
(function(a){var a=a.Proto.ApplicationFeature=a.Proto.Object.extend({isAllowOpenChat:function(){return this.extract("feature")===g.ALLOW_OPEN_CHAT},hasUploadPhotoAction:function(){return this.extract("requiredAction")===f.UPLOAD_PHOTO},hasOpenEncountersAction:function(){return this.extract("requiredAction")===f.OPEN_ENCOUNTERS}}),f=a.ACTIONS={UPLOAD_PHOTO:"UPLOAD_PHOTO",OPEN_ENCOUNTERS:"OPEN_ENCOUNTERS"},g=a.FEATURES={ALLOW_OPEN_CHAT:"ALLOW_OPEN_CHAT"}})(Badoo);Badoo=Badoo||{};
(function(a){var f=(a.Proto.EncountersVoteResponse=a.Proto.Object.extend({getRequiredAction:function(){var a=this.extract("message"),d=this.extract("action"),b=this.extract("voteResponseType");return!a?null:"MUTUAL_MESSAGE"===b?f.MUTUAL_ATTRACTION:"SETTINGS_MESSAGE"===b?f.SETTINGS_MESSAGE:"DISPLAY"!==d&&"NOTIFY"!==d&&"PAYMENT_REQUIRED"!==d?f.ADD_PHOTOS:null}})).ACTIONS={MUTUAL_ATTRACTION:"MUTUAL_ATTRACTION",ADD_PHOTOS:"ADD_PHOTOS",DISPLAY_MESSAGE:"DISPLAY_MESSAGE",SETTINGS_MESSAGE:"SETTINGS_MESSAGE"}})(Badoo);
Badoo=Badoo||{};(function(a){var f=a.Proto.Object;a.Proto.BadooDataError=f.extend({getErrorFields:function(){return _.map(this.extract("msg.errors")||[],_.bind(function(a){if(f.isProtoObject(a))return a.extract("fieldName")},this))}})})(Badoo);Badoo=Badoo||{};
(function(a){var f=(a.Proto.Photo=a.Proto.Object.extend({getLargeUrl:function(){return a.Utils.Helpers.parseUrls(this.extract("largeUrl"))},getInfo:function(){var a=!!this.extract("faceBottomRight")&&!!this.extract("faceTopLeft"),d=this.extract("faceBottomRight.x"),b=this.extract("faceBottomRight.y"),c=this.extract("faceTopLeft.x"),h=this.extract("faceTopLeft.y"),e=this.extract("largePhotoSize.width"),j=this.extract("largePhotoSize.height"),i={width:e,height:j,shape:e===j?f.SQUARE:e>j?f.LANDSCAPE:
f.PORTRAIT,hasFaceDetection:!1};a&&(i.hasFaceDetection=!0,i.faceX=(d+c)/2/e,i.faceY=(b+h)/2/j);return i}})).SHAPES={PORTRAIT:"PORTRAIT",LANDSCAPE:"LANDSCAPE",SQUARE:"SQUARE"}})(Badoo);Badoo=Badoo||{};
(function(a){a.Proto.ClientUserVerifiedGet=a.Proto.Object.extend({getPhoneNumber:function(){for(var a=this.extract("methods")||[],g=0;g<a.length;g++)if("VERIFY_SOURCE_PHONE_NUMBER"===a[g].extract("type"))return a[g].extract("verificationData");return null},isPhoneVerified:function(){for(var a=this.extract("methods")||[],g=0;g<a.length;g++)if("VERIFY_SOURCE_PHONE_NUMBER"===a[g].extract("type"))return a[g].extract("isConfirmed_");return null}})})(Badoo);Badoo=Badoo||{};
(function(a){a.Proto.ClientUserVerify=a.Proto.Object.extend({getPhoneError:function(){var a=this.extract("form.errors")||[];return 0<a.length?a[0].extract("error"):null}})})(Badoo);Badoo=Badoo||{};
(function(a){var f=a.Utils.Logger,g=a.Utils.Timing.getInstance(),d=a.Proto.Object,b=/^Cache::/;f.getLogger("Cache");var c={},h={},e={},j=null;a.Utils.Cache={getInstance:function(a){if(c.hasOwnProperty(a))return c[a];c[a]=new i(a);return c[a]},init:_.once(function(){g.startupEvent("cache-init-start");j=a.Utils.Persistence.getInstance(!0);var c={};j.forEach(function(a){b.test(a)&&(c[a]=a.replace("Cache::",""))});0!==_.keys(c).length&&(h=c,_.each(c,function(a,b){e[a]={};var c=j.getObject(b);c&&_.each(c,
function(b,c){b.data&&(b.data.data_&&(b.data=d.fromJSON(b.data.data_)),e[a][c]=b)})}));g.startupEvent("cache-init-end")}),destroy:function(){_.each(h,function(a){c[a]&&_.isFunction(c[a].invalidateAll)?c[a].invalidateAll():e[a]={}});j.forEach(function(a){b.test(a)&&j.remove(a)})}};var i=function(a){this.group_=a;this.id_="Cache::"+this.group_;this.log=f.getLogger(this.id_);e[a]=e[a]||{};h[this.id_]=a};i.prototype=_.extend(i.prototype,a.Events,{group_:null,id_:null,put:function(a,b,c,d){var h=c+(new Date).getTime();
e[this.group_][a]={expiryTime:h,data:b};c+500<o&&(null!==l&&clearTimeout(l),o=c,l=setTimeout(p,c+500));(_.isUndefined(d)||!d)&&j.saveObject(this.id_,e[this.group_]);return this},get:function(a){var b=e[this.group_][a];if(!b)return null;var c=(new Date).getTime();return b.expiryTime<=c?(delete e[this.group_][a],null):b.data},update:function(a,b){e[this.group_][a]&&(e[this.group_][a].data=b,j.saveObject(this.id_,e[this.group_]));return this},invalidate:function(a){var b=e[this.group_],c=[],d;for(d in b)-1!==
d.indexOf(a)&&(b[d]=null,delete b[d],c.push(d));this.trigger("invalidated",{all:_.isEmpty(e[this.group_]),keys:c});j.saveObject(this.id_,e[this.group_])},invalidateAll:function(){e[this.group_]={};this.trigger("invalidated",{all:!0});j.saveObject(this.id_,e[this.group_])}});var l=null,o=Number.MAX_VALUE,p=function(){var a=(new Date).getTime(),b=Number.MAX_VALUE,d,g,f;for(g in h){if(!h.hasOwnProperty(g))return;d=e[h[g]];for(f in d){if(!d.hasOwnProperty(f))return;var i=d[f].expiryTime;i<=a?c[h[g]]&&
_.isFunction(c[h[g]].invalidate)?c[h[g]].invalidate(f):(d[f]=null,delete d[f]):i<b&&(b=i)}j.saveObject(g,d)}b<Number.MAX_VALUE?(clearTimeout(l),l=setTimeout(p,b-a)):l=null}})(Badoo);
(function(a){var f=Badoo.Utils.Logger.getLogger("location"),g=a.config.get("location.updateInterval",3E5),d=a.config.get("location.updateThreshold",0.1),b=null,c=null,h=a.Utils.Location=function(){_.bindAll(this)};h.prototype={init:function(){c=setInterval(this.getCurrentLocation_,g);this.getCurrentLocation_()},stop:function(){c&&(clearInterval(c),c=null)},getLastLocation:function(){return b},getCurrentLocation_:function(){navigator.geolocation&&(!a.config.get("location.disable",!1)&&a.Session.getInstance().isLoggedIn())&&
navigator.geolocation.getCurrentPosition(this.onLocationSuccess_,this.onLocationError_)},isLocationObject_:function(a){return a&&a.coords&&"number"===typeof a.coords.latitude&&"number"===typeof a.coords.longitude},onLocationSuccess_:function(e){this.isLocationObject_(e)&&!(b&&this.getDistanceBetweenTwoPoints(b,e)<=d)&&(b=e,a.Api.getInstance().request("location",{lat:b.coords.latitude+"",lon:b.coords.longitude+""},this.onSendLocation_))},onLocationError_:function(){},onSendLocation_:function(b){b||
a.GlobalEvents.trigger("location-update",location)},getDistanceBetweenTwoPoints:function(a,b){if(!this.isLocationObject_(a)||!this.isLocationObject_(b))return f.warn("Either point1 or point2 were not Location objects"),0;var c=a.coords.latitude*Math.PI/180,d=a.coords.longitude*Math.PI/180,h=b.coords.latitude*Math.PI/180,g=b.coords.longitude*Math.PI/180;return 6371*Math.acos(Math.sin(c)*Math.sin(h)+Math.cos(c)*Math.cos(h)*Math.cos(g-d))},findCurrentLocation:function(b,c){b=_.isFunction(b)?b:_.identity;
c=_.isFunction(c)?c:_.identity;navigator.geolocation?navigator.geolocation.getCurrentPosition(function(d){a.Api.getInstance().request("getCityByLatLong",{lat:d.coords.latitude+"",lon:d.coords.longitude+""},function(a,d){a?c.call(this,a):b.call(this,d)})},c):c()}};a.Utils.location=new h})(Badoo);Badoo=Badoo||{};
(function(a){var f=a.Utils.Logger.getLogger("Cookie");a.Utils=a.Utils||{};a.Utils.Cookie=_.defaults({set:function(a,d,b,c){if(a){c&&(c="; domain="+c);var h=new Date;h.setDate(h.getDate()+b);d=d+(null==b?"":"; expires="+h.toUTCString())+c+"; path=/";document.cookie=a+"="+d}else f.error("Cookie name required")},get:function(a){for(var d=document.cookie.split(";"),b=0;b<d.length;b++){var c=d[b]+"",h=c.indexOf("=");if(c.substr(0,h).trim()===a)return unescape(c.substr(h+1))}return null},saveApiCookies:function(){},
getApiCookies:function(){}},a.Utils.Cookie||{})})(Badoo);Badoo=Badoo||{};
(function(a){a.Utils.Logger.getLogger("sleep");var f,g=null;"undefined"!==typeof document.hidden&&(g="");"undefined"!==typeof document.mozHidden&&(g="moz");"undefined"!==typeof document.webkitHidden&&(g="webkit");f=null===g?null:{event:g+"visibilitychange",property:""===g?"hidden":g+"Hidden"};var d=null,g=function(){f?window.addEventListener(f.event,_.bind(function(){!1===document[f.property]&&this.trigger("device-wake-up")},this)):setInterval(_.bind(function(){var a=(new Date).getTime();if(d){var c=
a-d;d=a;3E3<c&&this.trigger("device-wake-up")}else d=a},this),1500);window.addEventListener("online",_.bind(function(){this.trigger("device-online")},this),!1);window.addEventListener("offline",_.bind(function(){this.trigger("device-offline")},this),!1)};_.extend(g.prototype,a.Events);a.Utils.sleep=new g})(Badoo);Badoo=Badoo||{};
(function(a){a.Controllers={};var f=Badoo.Utils.Logger,g=Badoo.Utils.Timing;a.Controller=function(a,b){this.name_=a||_.uniqueId("controller-");this.parameters_=b||{};this.registeredViews_={};this.registeredControllers_={};this.registeredModels_={};this.log=f.getLogger("Controller::"+a);this.timing=g.getInstance()};_.extend(a.Controller.prototype,a.Events,{parent_:null,name_:"",isInitialized_:!1,log:null,timing:null,isReady_:!1,isActive_:!1,init:function(){},start:function(a,b){this.isActive_=!0;this.parent_=
a;this.parameters_=b||{};this.isInitialized_||(this.init.call(this),this.isInitialized_=!0);this.onStart();this.enable();this.trigger("start");return this},onStart:function(){},ready:function(){this.isReady_=!0;this.onReady();_.each(this.registeredViews_,function(d){d instanceof a.Views.ScrollingView&&d.refreshScroller()});this.trigger("ready");return this},onReady:function(){},stop:function(){this.isReady_=this.isActive_=!1;if(!this.isInitialized_)return this;this.parent_=null;this.disable();_.each(this.registeredControllers_,
function(a){a.stop()});this.onStop();this.trigger("stop");return this},onStop:function(){},isReady:function(){return this.isActive_&&this.isReady_},isActive:function(){return this.isActive_},destroy:function(){this.stop();_.each(this.registeredViews_,function(a){a.destroy()});return this},disable:function(){_.each(this.registeredViews_,function(a){a.disable()});return this},enable:function(){_.each(this.registeredViews_,function(a){a.enable()});return this},getTitle:function(){return window._t?_t.title_app:
""},getName:function(){return this.name_},getReportingName:function(){return this.name_},getParent:function(){return this.parent_},isInitialized:function(){return this.isInitialized_},getParameters:function(){return this.parameters_},updateParameters:function(a){var a=_.isObject(a)?a:{},b=_.keys(a),c=_.keys(this.parameters_),h=_.difference(b,c),b=_.difference(c,b),c=_.pick(a,h),e=_.pick(this.parameters_,b),g=_.omit(this.parameters_,b),f={},l=!1;_.each(g,function(b,e){a[e]!==b&&(l=!0,f[e]=a[e])});
this.parameters_=a;if(0<h.length||0<b.length||l)this.onParametersChange({added:c,removed:e,changed:f})},onParametersChange:function(){},getParameter:function(a){return _.has(this.parameters_,a)?this.parameters_[a]:null},registerView:function(a,b){return this.registeredViews_[a]=b},getView:function(a){return!_.has(this.registeredViews_,a)?null:this.registeredViews_[a]},updateView:function(a,b){var c=this.getView(a);if(!c)return this.log.warn("No view with id",a),this;this.timing.event("view-update-start");
c.update(b);this.timing.event("view-update-end");return this},destroyView:function(a){if(!_.has(this.registeredViews_,a))return this;this.registeredViews_[a].destroy();this.registeredViews_[a]=null;delete this.registeredViews_[a];return this},destroyAllViews:function(){for(var a in this.registeredViews_)this.destroyView(a);return this},registerController:function(a,b){return this.registeredControllers_[a]=b},removeController:function(a){var b=this.registeredControllers_[a];b&&(b.destroy(),delete this.registeredControllers_[a]);
return this},getController:function(a){return!_.has(this.registeredControllers_,a)?null:this.registeredControllers_[a]},registerModel:function(a,b){return this.registeredModels_[a]=b},getModel:function(a){return!_.has(this.registeredModels_,a)?null:this.registeredModels_[a]}});a.Controller.extend=a.Utils.Helpers.classExtend})(Badoo);Badoo=Badoo||{};
(function(a){var f=a.Utils.Logger,g=a.Utils.Cache,d=a.Utils.Timing;a.Models={};var b=a.Model=function(){this.log=f.getLogger("Model::"+this.name);this.timing=d.getInstance();this.useCache&&(this.cache_=g.getInstance(this.name),_.each(["invalidated","change"],function(a){this.cache_.on(a,_.partial(_.bind(this.trigger,this),a))},this));this.init()};b.prototype=_.extend(b.prototype,a.Events,{name:"",cache_:null,useCache:!0,commitCache:!0,handleOffline:!1,ignorePrevious:!0,getEndpoint:"",setEndpoint:"",
init:function(){return this},get:function(b,d){b=this.parseGetRequest(b);if(this.useCache){var e=_.uniqueId("cache-hit")+"-";this.timing.event(e+"start",{group:"cache-hit"});var g=this.cache_.get(this.getCacheKey(b));if(g)return this.timing.event(e+"end",{cached:!0}),d(null,a.Proto.Object.fromJSON(g)),this;this.timing.event(e+"end",{cached:!1})}return this.fetch(b,d)},fetch:function(b,d){b=this.parseGetRequest(b);a.Api.getInstance().request(this.getEndpoint,b,this.getApiOptions(),_.bind(function(a,
g){a?d(a,null):(this.useCache&&this.cache_.put(this.getCacheKey(b),g,this.getCacheTime(b),!this.commitCache),d(null,g))},this));return this},set:function(b,d){a.Api.getInstance().request(this.setEndpoint,b,{handleOffline:this.handleOffline,ignorePrevious:this.ignorePrevious},_.bind(function(a,b){a?d(a,b):d(null,b)},this));return this},getApiOptions:function(){return{}},getCacheTime:function(){return 48E4},getCacheKey:function(a){return _.isString(a)?a:_.reduce(a,function(a,b,c){a.push(c+"="+b);return a},
[]).join("&")},parseGetRequest:function(a){return a||{}},invalidate:function(a){this.useCache&&(0===arguments.length?this.cache_.invalidateAll():this.cache_.invalidate(a))}});b.extend=a.Utils.Helpers.classExtend})(Badoo);Badoo=Badoo||{};
(function(a,f,g){var d=Badoo.Utils.Logger,b=a.Utils.DOM,c=/^(\S+)\s*(.*)$/,h={},e=1,j=!0,i=!1,l=/^([\-\+]?[0-9]+(\.[0-9]+)?)(m?s)$/,o=function(a){a=a.split(",")[0];a=l.exec(a);return null===a?0:parseFloat(a[1])*("s"===a[3]?1E3:1)},p=function(a){if(!j)return!0;"mousedown"===a.type&&(i=!1);"mousemove"===a.type&&(i=!0);if("click"===a.type&&i)return i=!1,!0;for(var b=a.target,e=!1,d,l,p,o,k;b&&b!==g.body;){d=b.getAttribute("data-view-id");if((d=h[d])&&d.isEnabled()){for(l in d.events)p=l.match(c),k=p[1],
o=p[2],p=d[d.events[l]],_.has(n,k)&&(k=n[k]),k===a.type&&_.isFunction(p)&&(o?(k=f(a.target).closest(o,d.el).get(0))&&!1===p(a,k)&&(e=!0):!1===p(a,a.target)&&(e=!0));if(e)break}b=b.parentNode}return!0},n={touchstart:f.os.supportsTouch?"touchstart":"mousedown",touchmove:f.os.supportsTouch?"touchmove":"mousemove",touchend:f.os.supportsTouch?"touchend":"mouseup"};f(function(){FastClick.attach(g.body);g.body.addEventListener("click",p,!1);g.body.addEventListener(n.touchstart,p,!1);g.body.addEventListener(n.touchmove,
p,!1);g.body.addEventListener(n.touchend,p,!1);g.body.addEventListener("keyup",p,!0);g.body.addEventListener(n.touchmove,function(a){a.preventDefault()},!1)});a.Views={};a.View=function(a){_.bindAll(this);var b=e++;this.viewId_=b;this.childViews_={};this.log=d.getLogger("View::"+b);this.options=_.extend({},this.options||{},a);this.createRootElement();this.el.setAttribute("data-view-id",b);this.init.apply(this,arguments);this.preventTouch&&(this.events&&!this.events.touchmove)&&(this.events.touchmove=
"preventDefault");h[b]=this};_.extend(a.View.prototype,a.Events,{parent_:null,viewId_:null,isEnabled_:!1,$el:null,el:null,loadingElement:null,tagName:"div",preventTouch:!1,loadingTime_:null,childViews_:null,$:function(a){return this.$el.find(a)},init:function(){return this},update:function(){return this},render:function(){return this},enable:function(){this.isEnabled_=!0;_.invoke(this.childViews_,"enable");return this},disable:function(){this.isEnabled_=!1;_.invoke(this.childViews_,"disable");this.hideLoading();
return this},isEnabled:function(){return this.isEnabled_},registerChildView:function(a,b){this.childViews_[a]=b;b.setParent(this);return b},removeChildView:function(a){var b=this.childViews_[a];b&&(b.destroy(),delete this.childViews_[a]);return this},getChildView:function(a){return _.has(this.childViews_,a)?this.childViews_[a]:null},setParent:function(a){this.parent_=a;return this},getParent:function(){return this.parent_},hasParent:function(){return null!==this.parent_},remove:function(){this.$el.remove();
return this},reset:function(){this.$el.empty();return this},destroy:function(){this.$el.remove();h[this.viewId_]=null;delete h[this.viewId_];_.invoke(this.childViews_,"destroy");this.childViews_={};return null},getElement:function(){return this.$el},appendTo:function(a){a=a&&a.get?a.get(0):a;if(!a||!a.appendChild)return this;a.appendChild(this.getElement().get(0));return this},prependTo:function(a){a=a&&a.get?a.get(0):a;if(!a.appendChild)return this;a.insertBefore(this.getElement().get(0),a.firstChild);
return this},createRootElement:function(){var a=_.extend({},this.attributes);this.id&&(a.id=this.id);this.className&&(a["class"]=this.className);_.isString(this.options.className)&&(a["class"]=(a["class"]||"")+" "+this.options.className);this.el=b.createElement(this.tagName,a);this.$el=f(this.el);return this},preventDefault:function(a){a.preventDefault()},hide:function(){this.getElement().addClass("hidden");return this},show:function(){this.getElement().removeClass("hidden");return this},showLoading:function(){if(this.loadingTime_)return this;
this.loadingTime_=(new Date).getTime();this.loadingElement||(this.loadingElement=b.$satisfy("div.view-loading-mask","  div.view-loading-centre","    div.view-loading-spinner.animate"));var a=this.loadingElement.addClass("fadeOut animate");a.one(f.fx.transitionEnd,_.bind(function(){a.removeClass("animate")},this));this.getElement().append(a);requestAnimationFrame(function(){a.removeClass("fadeOut")});return this},onTransitionEnd:function(a,b){f.zepto.isZ(a)||(a=f(a));var e=!1,c=o(a.css("transition-duration"));
0===c&&(c=o(a.css("animation-duration")));var d=function(){e||(e=!0,a.off(f.fx.transitionEnd,d),b.apply(null,arguments))};a.one(f.fx.transitionEnd,d);setTimeout(d,c+50)},hideLoading:function(a){var b=this.loadingElement;if(!b)return this;if(!this.loadingTime_)return b.removeClass("animate fadeOut").remove(),this;var e=750-((new Date).getTime()-this.loadingTime_),c=arguments;if(0<e)return setTimeout(_.bind(function(){this.hideLoading.apply(this,c)},this),e),this;var d=_.bind(function(){b.off(f.fx.transitionEnd,
d);b.removeClass("animate fadeOut").remove();this.loadingTime_=null;this.trigger("loading-hidden");_.isFunction(a)&&a()},this);if(!this.isEnabled()||!this.el.parentNode)return d(),this;b.on(f.fx.transitionEnd,d).addClass("animate");b=this.loadingElement.addClass("animate");requestAnimationFrame(function(){b.addClass("fadeOut")});return this}});a.View.extend=a.Utils.Helpers.classExtend;a.View.enableEvents=function(){j=!0};a.View.disableEvents=function(){j=!1}})(Badoo,Zepto,document);Badoo=Badoo||{};
(function(a,f,g){a.Utils.Logger.getLogger("Badoo.History");var d=!1,b=function(){};_.extend(b.prototype,a.Events,{currentHash:null,start:function(){g(f).on("hashchange",_.bind(this.update,this));this.update()},update:function(a){var a="string"===typeof a?this.stripHashCharacter(a):this.getHash(),b=!d&&null!==this.currentHash;this.currentHash=a;d=!1;this.trigger("change",{hash:a,back:b})},getHash:function(){var a=f.location.href.match(/#(.*)$/);return a?a[1]:""},navigate:function(a,b){this.stripHashCharacter(a)!==
this.currentHash&&("#"!==a.charAt(0)&&(a="#"+a),b?f.history.replaceState({},document.title,a):f.history.pushState({},document.title,a),d=!0,f.location.hash=a,this.update(a))},stripHashCharacter:function(a){a+="";return"#"===a.charAt(0)?a.substring(1):a},back:function(){f.history.back()},forward:function(){f.history.forward()},go:function(a){f.history.go(a)}});a.History=new b})(Badoo,window,Zepto);Badoo=Badoo||{};
(function(a){var f=a.Utils.Logger.getLogger("Router");a.Router={routes:{},register:function(a){var d,b=function(a){return a.substring(1)},c;for(c in a)d=this.getRoute(c),_.isFunction(a[c])?this.routes[d]={handler:new a[c](d),params:_.map(c.match(/(\(\?)?:\w+/g),b)}:f.error("Not a function ",c)},hasRoute:function(a){return this.routes.hasOwnProperty(this.getRoute(a))},getRoute:function(a){a+="";-1!==a.indexOf("#")&&(a=a.substring(a.indexOf("#")+1));-1!==a.indexOf("/")&&(a=a.substring(0,a.indexOf("/")));
return a},getRouteHandler:function(a){return this.hasRoute(a)?this.routes[this.getRoute(a)].handler:null},getRouteParameters:function(a){return this.hasRoute(a)?this.routes[this.getRoute(a)].params:[]},encodeRoute:function(a,d){var b=[],c=this.getRouteParameters(a),h,a=this.getRoute(a);if(!this.hasRoute(a)||!_.isObject(d))return a;for(var e=0;e<c.length;e++)h=c[e],_.isString(d[h])?b.push(encodeURIComponent($.trim(d[h])||"-")):_.isNumber(d[h])||_.isBoolean(d[h])?b.push(d[h]):b.push("-");for(;"-"===
_.last(b);)b.pop();return a+(0===b.length?"":"/"+b.join("/"))},decodeParams:function(a){var a=a+"",d={};if(-1===a.indexOf("/"))return{};for(var b=this.getRouteParameters(a),a=a.substring(a.indexOf("/")+1).split("/"),c,h=0;h<b.length;h++)(c=a[h])&&"-"!==c&&(d[b[h]]=decodeURIComponent(c));return d}}})(Badoo);Badoo=Badoo||{};
(function(a){var f=a.Models.Features=a.Model.extend({name:"Features",getEndpoint:"allFeatures",setEndpoint:null,commitCache:!1,getFeature:function(a,b){this.get(null,_.partial(this.onGetFeatureLoaded_,a,b))},onGetFeatureLoaded_:function(a,b,c,h){c?b(c,h):(a=h[a])?b(null,a):b(!0,null)}});f.FEATURES={ALLOW_PROFILE_RATING:75};var g;f.getInstance=function(){return g||(g=new f)}})(Badoo);Badoo=Badoo||{};
(function(a){var f=a.Models.Chat=a.Model.extend({name:"Chat",getEndpoint:"openChat",setEndpoint:"sendChatMessage",userId:null,handleOffline:!0,ignorePrevious:!1,setUserId:function(a){this.userId=a;return this},get:function(f){a.Api.getInstance().request(this.getEndpoint,{id:this.userId},_.bind(function(d,b){if(d||!a.Proto.Object.isProtoObject(b))b=this.cache_.get("chatUser"+this.userId),a.Proto.Object.isProtoObject(b)?f(null,b):(this.trigger("error"),f(!0,null));else{var c=b.extract("ourServerSaid");
a.Proto.Object.isProtoObject(c)?(c=c.extract("feature"),!c||!c.isAllowOpenChat()?this.trigger("error"):this.trigger("action-required",{action:c.extract("requiredAction")}),f(!0,null)):(this.cache_.put("chatUser"+this.userId,b,this.getCacheTime()),f(null,b))}},this));return this},set:function(g,d){var b=this.cache_.get("chatUser"+this.userId);b.addMessage(a.Proto.ChatMessage.fromJSON({hasUid:!0,uid_:"offlineMessage_"+_.uniqueId()+(new Date).getTime(),hasDateModified:!1,hasFromPersonId:!0,fromPersonId_:a.Session.getInstance().getUserId()+
"",hasToPersonId:!0,toPersonId_:this.userId+"",hasMssg:!0,mssg_:g,hasMessageType:!0,messageType_:"SIMPLE",hasRead:!0,read_:!0,hasAlbumId:!1,hasTotalUnread:!1,hasTheirLocation:!1,hasUnreadFromUser:!1,hasImageUrl:!1,hasFrameUrl:!1,hasIsAnonymousChat:!1,$java$class:"com.badoo.proto.Badoo-ChatMessage"}));this.cache_.put("chatUser"+this.userId,b,this.getCacheTime());d=_.isFunction(d)?d:_.identity;return f._super.set.call(this,{uid:this.userId,message:g},d)},getCacheTime:function(){return 9E5}})})(Badoo);
Badoo=Badoo||{};
(function(a){var f=a.Utils.Analytics,g=!1,d=a.Models.Features,b=a.Models.Profiles=a.Model.extend({name:"Profiles",getEndpoint:"profile",getCacheTime:function(b){return b.id&&b.id===a.Session.getInstance().getUserId()?18E5:9E5},get:function(b,h){a.Models.Profiles._super.get.call(this,b,function(b,c){var i=c&&c.extract("person.uid")===a.Session.getInstance().getUserId();if(!b&&!g&&c&&i){g=!0;var l=c.extract("person.age"),o=c.extract("person.gender"),p=c.extract("person.numberOfPhotos"),n=f.getInstance();
_.isNumber(l)&&n.setDimension(f.DIMENSION.AGE,l);_.isString(o)&&n.setDimension(f.DIMENSION.GENDER,o);n.setDimension(f.DIMENSION.HAS_PHOTO,_.isNumber(p)&&0<p)}var r=arguments;i&&!c.extract("profile.profileRating")?d.getInstance().getFeature(d.FEATURES.ALLOW_PROFILE_RATING,function(b,e){e||h.apply(this,r);var d=e.extract("enabled"),f=e.extract("requiredAction");if(d||!d&&"NO_ACTION"!==f)c.data_.profile.hasProfileRating=!0,c.data_.profile.profileRating_=a.Proto.Award.getFakeAward(0,e.extract("displayTitle")+
" "+e.extract("displayMessage")),c.clearCache();h.apply(this,r)}):h.apply(this,r)})},getCacheKey:function(a){return a.id},parseGetRequest:function(a){return _.isString(a)?{id:a}:a},setEndpoint:"saveDetailedProfile",set:function(c,d){b._super.set.call(this,c,_.bind(function(b,c){if(!b){var f=a.Session.getInstance();this.cache_.put(this.getCacheKey({id:f.getUserId()}),c,this.getCacheTime({id:f.getUserId()}));d(b,c)}},this))}})})(Badoo);Badoo=Badoo||{};
(function(a){var f={ALL:"ALL",CONVERSATIONS:"CONVERSATIONS",SEARCH:"SEARCH",UNREAD:"UNREAD"},g={ALL:-1,UNREAD:2,CONVERSATIONS:3},d=a.Models.Folders=a.Model.extend({name:"Folders",getEndpoint:"folder",folderId:null,search_:null,filter_:f.ALL,setFolderId:function(a){this.folderId=a;return this},setSearch:function(a){this.search_=a;return this},setFilter:function(a){this.filter_=a;return this},get:function(a){if(!_.isNull(this.search_)&&""!==this.search_)return this.search(a);var d=_.uniqueId("cache-hit-")+
"-";this.timing.event(d+"start",{group:"cache-hit"});var e=this.cache_.get(this.getCacheKey_());if(e)return this.timing.event(d+"end",{cached:!0}),a(null,e),e.isLast()&&this.trigger(b.NO_MORE_DATA),this;this.timing.event(d+"end",{cached:!1});this.fetch(a);return this},fetch:function(c){if(this.filter_===f.SEARCH)return this.search(c);var d=this.cache_.get(this.getCacheKey_());a.Api.getInstance().request(this.getEndpoint,{id:this.folderId,offset:d?d.getOffset():0,count:20,filterId:g[this.filter_],
search:null},_.bind(function(a,f){a||!f?c(!0,d):(d&&(f=f.merge(d)),this.cache_.put(this.getCacheKey_(),f,this.getCacheTime()),c(null,f),f.isLast()&&this.trigger(b.NO_MORE_DATA))},this));return this},getCacheKey_:function(){return this.folderId+"-"+this.filter_},update:function(c){if(this.filter_===f.SEARCH)return this.search(c);var d=this.cache_.get(this.getCacheKey_()),e=d?d.getOffset():20;a.Api.getInstance().request(this.getEndpoint,{id:this.folderId,offset:0,count:e,filterId:g[this.filter_],search:null},
_.bind(function(a,e){a||!e?c(!0,d):(this.cache_.put(this.getCacheKey_(),e,this.getCacheTime()),c(null,e),e.isLast()&&this.trigger(b.NO_MORE_DATA))},this));return this},search:function(b){var d=this.cache_.get(this.folderId+"-"+f.ALL),e=d?d.search(this.search_):null,j=e&&e.hasUsers();j&&b(null,e);a.Api.getInstance().request(this.getEndpoint,{id:this.folderId,offset:0,count:20,filterId:g.ALL,search:this.search_},_.bind(function(a,d){a||!d?b(!0,null):j&&d.extract("section[0].user").length<=e.extract("section[0].user").length?
this.log.debug("Search: server didnt return any results we didnt already have."):(j&&(this.log.debug("Search: merging server results with those found locally."),d=d.merge(e)),b(null,d))},this));return this},removeUsers:function(c,d){d=_.isFunction(d)?d:_.identity;a.Api.getInstance().request("removePeopleFromSection",{folderId:this.folderId,sectionId:null,uid:_.compact(c).toString()},_.bind(function(a,f){if(!a){var g=this.cache_.get(this.getCacheKey_());_.isNull(g)||(g=g.removeUsers(c),this.cache_.update(this.getCacheKey_(),
g),this.cache_.trigger(b.CHANGE,{removedUsers:c}))}d(a,f)},this));return this},blockUser:function(c,d){d=_.isFunction(d)?d:_.identity;a.Api.getInstance().request("blockUser",c,_.bind(function(a,f){if(!a){var g=this.cache_.get(this.getCacheKey_());_.isNull(g)||(g=g.removeUsers([c.uid]),this.cache_.update(this.getCacheKey_(),g),this.cache_.trigger(b.CHANGE,{removedUsers:[c.uid]}))}d(a,f)},this));return this},setItemToRead:function(a){return this.invokeClientUserListMethod_("setItemToRead",a)},updateDisplayMessage:function(a,
b){return this.invokeClientUserListMethod_("updateDisplayMessage",a,b)},moveItemToTop:function(a){return this.invokeClientUserListMethod_("moveSectionUserToTop",a)},invokeClientUserListMethod_:function(a){var b=this.cache_.get(this.folderId);if(!b||!_.isFunction(b[a]))return this;var e=Array.prototype.slice.call(arguments,1),b=b[a].apply(b,e);this.cache_.update(this.folderId,b);return this}});d.TYPES={MESSAGES:"HON_MESSAGES",BLOCKED:"BLOCKED"};d.FILTERS=f;var b=d.EVENTS={NO_MORE_DATA:"no-more-data",
CHANGE:"change"}})(Badoo);Badoo=Badoo||{};
(function(a){var f={},g={profiles:[],ids:[]},d="",b=0,c=0,h=a.Models.Encounters=a.Model.extend({name:"Encounters",getEndpoint:"getEncounters",setEndpoint:"voteEncounters",init:function(){this.cache_.on("invalidated",this.onInvalidated_);h._super.init.apply(this,arguments)},set:function(d){this.removeFromQueue(d);switch(d.voteType){case e.YES:b++;break;case e.NO:c++}a.Api.getInstance().request(this.setEndpoint,{uid:d.getPersonId(),voteType:d.voteType,photoId:""},_.bind(function(a,e){if(a)this.trigger("error",
{error:a}),this.trigger(j.NO_ACTION,{noVotes:c,yesVotes:b,lastVote:d.voteType});else{var f=e.getRequiredAction();f?this.trigger(j.REQUIRED_ACTION,{action:f,encountersVoteResponse:e,searchResult:d}):this.trigger(j.NO_ACTION,{noVotes:c,yesVotes:b,lastVote:d.voteType})}},this))},get:function(b){if(0===g.profiles.length){var e=this.cache_.get("toBeVotedOn");e&&(e.profiles&&e.ids&&0<e.profiles.length)&&(e.profiles.forEach(function(b){g.profiles.push(a.Proto.SearchResult.fromJSON(b.data_))}),g.ids=e.ids)}1>
g.profiles.length?this.fetch(b):b(null,g.profiles.slice(0))},fetch:function(b){a.Api.getInstance().request(this.getEndpoint,{lastVote:d},_.bind(function(a,e){if(a||"EncountersResponse"!==e.getClass())a&&"offline"===a.type&&this.trigger(j.OFFLINE),b(a||e,null);else{for(var c=e.extract("searchResults"),h=0,r,s=0;s<c.length;s++)r=c[s].getPersonId(),!0!==f[r]&&-1===g.ids.indexOf(r)&&(h++,g.profiles.push(c[s]),g.ids.push(r),d=r);this.cache_.put("toBeVotedOn",g,18E5);b(null,g.profiles.slice(0));!0===e.extract("noMoreEncounters")&&
this.trigger(j.NO_MORE_DATA)}},this))},onInvalidated_:function(){g={profiles:[],ids:[]};d=""},removeFromQueue:function(a){var b=a.getPersonId();f[b]=!0;g.profiles.splice(g.profiles.indexOf(a),1);g.ids.splice(g.ids.indexOf(b),1);this.cache_.put("toBeVotedOn",g,18E5)}}),e=h.VOTE_TYPE={YES:1,NO:2},j=h.ACTIONS={NO_MORE_DATA:"MO_MORE_DATA",OFFLINE:"OFFLINE",REQUIRED_ACTION:"REQUIRED_ACTION",NO_ACTION:"NO_ACTION"}})(Badoo);Badoo=Badoo||{};
(function(a){a.Models.Albums=a.Model.extend({imageAction_:function(f,g,d){_.isString(f)&&_.isString(g)&&a.Api.getInstance().request("imageAction",{imageId:f,action:g},_.bind(function(a,c){a||_.isFunction(d)&&d(a,c)},this))},rotateImageRight:function(a,g){this.imageAction_(a,"IMAGE_ACTION_ROTATE_RIGHT_90",g)},setAsDefault:function(a,g){this.imageAction_(a,"IMAGE_ACTION_SET_AS_DEFAULT",g)},deletePhoto:function(f,g){a.Api.getInstance().request("removePhoto",{album:"me:"+a.Session.getInstance().getUserId(),
photo:f},g)},name:"Albums",getEndpoint:"album",getCacheKey:function(a){return a.albumId}})})(Badoo);Badoo=Badoo||{};(function(a){a.Models.FacebookAlbums=a.Model.extend({name:"Albums",getEndpoint:"facebookGetAllAlbums",setEndpoint:"scaleAndMoveImage"})})(Badoo);Badoo=Badoo||{};(function(a){a.Models.Notifications=a.Model.extend({name:"notifications",useCache:!1,getEndpoint:"getMenuBadgeCounters"})})(Badoo);Badoo=Badoo||{};
(function(a){a.Models.ProfileOptions=a.Model.extend({name:"ProfileOptions",getEndpoint:"getClientProfileOptionsDecoded",useCache:!1})})(Badoo);Badoo=Badoo||{};(function(a){a.Models.Feedback=a.Model.extend({name:"Feedback",getEndpoint:"getFeedbackList",setEndpoint:"sendFeedback"})})(Badoo);Badoo=Badoo||{};(function(a){a.Models.Verification=a.Model.extend({name:"Verification",getEndpoint:"getUserVerifiedInfo",setEndpoint:"userVerify",useCache:!1})})(Badoo);Badoo=Badoo||{};
(function(a){var f=a.Models.LegalDocument=a.Model.extend({name:"LegalDocument",useCache:!1,getApiOptions:function(){return{apiType:a.Api.API_TYPE.WEB_CLUSTER,withCredentials:!1}},get:function(a,d){switch(a.document){case "terms":this.getEndpoint="/terms";break;case "privacy":this.getEndpoint="/privacy"}return f._super.get.apply(this,arguments)},getCacheKey:function(a){return"legal-document-"+a.document},parseGetRequest:function(){return{ws:1}}})})(Badoo);Badoo=Badoo||{};
(function(a,f){var g=a.Utils.Logger.getLogger("api"),d=window.navigator,b=a.config,c,h=a.Proto.Object,e=a.Utils.Cookie,j=a.Utils.Helpers.xhrRequestWithCredentials,i={MIGW:1,WEB_CLUSTER:2},l={apiType:i.MIGW,withCredentials:!0},o={push:{disableJsonp:!0,retry:0,timeout:9E5},externalLogin:{retry:0},photoUpload:{type:"POST"}},p=!1,n=function(b){!1===b&&!0===p&&a.Api.getInstance().flushRequests();p=b};window.addEventListener("online",function(){n(!1)},!1);window.addEventListener("offline",function(){n(!0)},
!1);var r=function(a,b,c){_.bindAll(this);_.extend(this,a);this.callback_=_.isFunction(b)?b:_.identity;this.debugRequestURL_=c;this.requestStart_=(new Date).getTime();if(a=e.getApiCookies())this.headers={Cookie:a}};r.prototype={callback_:null,debugRequestURL_:null,requestStart_:null,send:function(){if(d&&!d.onLine)return this.callback_({status:null,type:"offline",error:null,response:null},null),this;this.currentRequest=f.ajax(this);return this},abort:function(){this.currentRequest&&this.currentRequest.abort&&
this.currentRequest.abort();return this},success:function(b,c,d){if(!this.received){this.received=!0;e.saveApiCookies(d);var f;try{f=d.getResponseHeader("X-Session-id"),a.Session.getInstance().updateSessionId(f)}catch(j){g.error("Failed to get X-Session-id header",j)}this.apiType==i.MIGW&&(b=h.fromJSON(b));this.callback_(null,b)}},error:function(a,b,e){if(this.received)return this;var c=a.responseText;if(c&&("error"===b||"abort"===b))try{(c=JSON.parse(c))&&this.apiType==i.MIGW&&(c=h.fromJSON(c))}catch(d){g.error("JSON Parse error",
d)}switch(a.status){case 400:this.retries=0;break;case 401:if(this.on401_(c))return this}(new Date).getTime();if(0<this.retries)return this.retries--,this.timeout*=2,this.abort(),this.send();this.received=!0;this.callback_({status:a.status,type:b,error:e,response:c},null);return this},on401_:function(b){if(0===this.retries)return this.received=!0,a.GlobalEvents.trigger("force-logout",b),!0;this.retries=1;return!1}};var s=a.Api=function(){this.apiPath_="/api/";this.updateDefaults_();this.offlineCache_=
a.Utils.Cache.getInstance("API");b.on("config-change",_.bind(this.updateDefaults_,this));this.timing=a.Utils.Timing.getInstance()};s.prototype={offlineCache_:null,flushedRequest_:null,updateDefaults_:function(){c={};c[i.MIGW]={http:"http://"+b.get("api.http.hostname")+":"+b.get("api.http.port"),https:"https://"+b.get("api.https.hostname")+":"+b.get("api.https.port")};c[i.WEB_CLUSTER]={http:"http://"+b.get("webcluster.http.hostname")+":"+b.get("webcluster.http.port"),https:"https://"+b.get("webcluster.https.hostname")+
":"+b.get("webcluster.https.port")}},getHostName:function(a){var e=!0===b.get("api.secure")||a.secure||0===window.location.protocol.indexOf("https"),d=c[a.apiType][e?"https":"http"];_.isString(a.host)&&(d=(e?"https://":"http://")+a.host,-1===a.host.indexOf(":")&&(d+=":"+(e?b.get("api.https.port"):b.get("api.http.port"))));a.locale&&(d+="/"+a.locale.replace("_","-"));return d},whenOnline:function(a,b){var e=this.offlineCache_.get("api"),e=_.isObject(e)?e:{},c=a.endPoint;b||(c=(new Date).getTime()+
""+_.uniqueId()+a.endPoint);e[c]=a;this.offlineCache_.put("api",e)},flushRequests:function(){var a=this.offlineCache_.get("api"),a=_.isObject(a)?a:{},b=_.keys(a)[0];if(b){var e=a[b];this.flushedRequest_=e;this.request.call(this,e.endPoint,e.data,e.options);delete a[b]}this.offlineCache_.put("api",a)},makeRequestParameters_:function(a,b){var e={};switch(b.apiType){case i.MIGW:e=_.defaults({a:this.parseParameters_(a)},b.requestParameters);b.sessionId&&(e.s=b.sessionId);b.nativePlatform&&(e.p=b.nativePlatform);
b.appStoreId&&(e.i=b.appStoreId);b.deviceUUID&&(e.u=b.deviceUUID);b.wrapperVersion&&(e.w=b.wrapperVersion);break;case i.WEB_CLUSTER:e=_.clone(a)}return e},parseParameters_:function(a){return!a?"":_.map(a,function(a){if(_.isNumber(a))return"Integer:"+encodeURIComponent(a);if(_.isUndefined(a)||_.isNull(a))return"String:null";if(_.isArray(a))return"String:"+a.join(",");if(_.isObject(a))try{a=JSON.stringify(a)}catch(b){a=""}return'String:"'+encodeURIComponent(a)+'"'}).join(",")},makeRequestURL_:function(a,
b){var e="";switch(b.apiType){case i.MIGW:e=this.getHostName(b)+this.apiPath_+a+"/http.JSON";break;case i.WEB_CLUSTER:e=this.getHostName(b)+a}return e},request:function(e,c,d,f){var g=_.uniqueId("api-call-");"push"!==e&&this.timing.event(g+"-start",{group:"api-call",endpoint:e});var h,i,n;_.isFunction(i=c)?(h={},n={}):_.isFunction(i=d)?(h=c||{},n={}):_.isFunction(i=f)?(h=c||{},n=d||{}):(h=c||{},n=d||{},i=function(){});n=_.defaults(n,l,a.Session.getInstance().getSessionOptions(),o[e]||null);c=this.makeRequestURL_(e,
n);d=this.makeRequestParameters_(h,n);c={timeout:_.isNumber(n.timeout)?n.timeout:b.get("api.timeout",15E3),retries:!1===n.retry?0:_.isNumber(n.retry)?n.retry:b.get("api.retries",3),url:c,data:d,dataType:"json",type:n.type?n.type:"GET",useJsonp:!n.disableJsonp,currentRequest:null,received:!1,apiType:n.apiType};n.withCredentials&&(c.beforeSend=j);d=_.bind(function(a){"push"!==e&&this.timing.event(g+"-end");a&&p&&!0===n.handleOffline?(this.whenOnline({endPoint:e,data:h,options:n},n.ignorePrevious),i({type:"offline",
error:null},null)):(null!==this.flushedRequest_&&(this.flushedRequest_.endPoint===e&&this.flushedRequest_.data===h)&&(this.flushedRequest_=null,this.flushRequests()),i.apply(this,arguments))},this);return(new r(c,d,void 0)).send()}};s.API_TYPE=i;var u;s.getInstance=function(){return u||(u=new s)}})(Badoo,Zepto);Badoo=Badoo||{};BadooNative=BadooNative||null;
(function(a){a.Utils.Logger.getLogger("FBAuth");var f="email user_birthday user_photos user_location user_interests user_likes".split(" "),g=function(){_.bindAll(this)};_.extend(g.prototype,a.Events,{ready_:!1,accessToken_:null,init:function(){},onInitialised:function(){this.getLoginStatus(_.bind(function(a){a&&(a.authResponse&&a.authResponse.accessToken)&&("connected"===a.status?this.trigger("connected",a.authResponse.accessToken):this.accessToken_=a.authResponse.accessToken)},this))},onLogin_:function(a){a.authResponse?
(this.accessToken_=a.authResponse.accessToken,this.trigger("login",{success:!0,token:a.authResponse.accessToken})):this.trigger("login",{success:!1,message:a.message})},onLogout_:function(){this.trigger("logout")},getAuthType:function(){return this.authType_},isReady:function(){return this.ready_},getAccessToken:function(){return this.accessToken_},getLoginStatus:function(){},getPermissions:function(){return f}});g.extend=a.Utils.Helpers.classExtend;var d;g.getInstance=function(){return a.NativeBridge.getInstance().isNative()?
d||(d=new a.Utils.Auth.FBAuthNative):d||(d=new a.Utils.Auth.FBAuthWeb)};a.Utils=a.Utils||{};a.Utils.Auth=a.Utils.Auth||{};a.Utils.Auth.FBAuth=g})(Badoo,BadooNative);Badoo=Badoo||{};BadooNative=BadooNative||null;
(function(a){a.Utils.Logger.getLogger("FBAuthWeb");var f=a.config,g=a.Utils.Auth.FBAuthWeb=a.Utils.Auth.FBAuth.extend({init:function(){g._super.init.apply(this,arguments);window.fbAsyncInit=this.fbAsyncInit_;var a=document,b=a.getElementsByTagName("script")[0];a.getElementById("facebook-jssdk")||(a=a.createElement("script"),a.id="facebook-jssdk",a.src="//connect.facebook.net/en_US/all.js",b.parentNode.insertBefore(a,b))},authType_:"WEB",fbAsyncInit_:function(){FB.init({appId:f.get("fb.appId"),channelUrl:"//"+
window.location.hostname+"/channel.html",status:!0,cookie:!1,xfbml:!1,frictionlessRequests:!0,oauth:!0});window.fbAsyncInit=null;this.ready_=!0;this.trigger("ready");this.onInitialised()},login:function(a){if(_.isString(a))this.onLogin_({authResponse:{accessToken:a}});else this.isReady()&&FB.login(this.onLogin_,{scope:g._super.getPermissions.call(this).join(",")})},logout:function(){this.isReady()&&FB.logout(this.onLogout_)},getLoginStatus:function(a){this.isReady()&&FB.getLoginStatus(a)}})})(Badoo,
BadooNative);Badoo=Badoo||{};
(function(a){var f=a.Utils.Logger.getLogger("session"),g=a.config,d=a.Utils.Cookie,b=a.Utils.Auth.FBAuth,c=a.Utils.Persistence,h=a.Utils.Analytics,e=a.Proto.Object,j=null,i,l=function(){_.bindAll(this);i=a.NativeBridge.getInstance().isNative();b.getInstance().on("connected",_.bind(function(){this.trigger.apply(this,["fb-connected"].concat(_.toArray(arguments)))},this));a.GlobalEvents.on("native-push",_.bind(function(a){a&&a.srv&&(h.getInstance().sendEvent(h.EVENT.CATEGORY.USER_ACTION,h.EVENT.ACTION.OPEN,
h.EVENT.LABEL.PUSH),this.sessionStartup(null,null,null,a.srv+""))},this));j=a.Utils.Cache.getInstance("User")};_.extend(l.prototype,a.Events,{SESSION_COOKIE_NAME:"session",sessionId_:null,userId_:null,firstLogin_:null,rateableSession_:!1,state_:"noSession",lastStateChange_:(new Date).getTime(),jinbaUrl_:null,changeState_:function(a){this.state_=a;this.lastStateChange_=(new Date).getTime()},isPendingState:function(a){if("pendingAuthentication"===this.state_||"pendingSession"===this.state_){var b=new Date;
return _.isNumber(a)&&b.getTime()-this.lastStateChange_>a?(this.userId_&&this.sessionId_?this.changeState_("authenticatedSession"):this.sessionId_?this.changeState_("anonymousSession"):this.changeState_("noSession"),!1):!0}return!1},init:_.once(function(){var b=a.Utils.Push.getInstance();b.on(a.Utils.Push.PUSH_TYPES.CLIENT_RATE_US,this.onRateUsReceived_);b.on(a.Utils.Push.PUSH_TYPES.CLIENT_CHANGE_HOST,this.onClientChangeHost_)}),doRedirect_:function(a){if(!e.isProtoObject(a)||i||!a.extract("localeRedirect"))return!1;
a=window.location.protocol+"//"+window.location.host+(a.extract("localeRedirect")||"/")+window.location.search+window.location.hash;window.location.href=a;return!0},sessionStartup:function(b,d,f,g){if(!this.isPendingState(15E3)){var j=this.getSessionId();d&&(_.isString(d)&&d!==j)&&(j=d,this.setSessionId_(d),this.setUserId_(null));d=this.userId_;if(!this.userId_&&(d=this.userId_=c.getInstance().getString("session.userId")))this.changeState_("authenticatedSession"),this.trigger("user-change",{oldUserId:null,
newUserId:d});var l=window.location.pathname.replace("-","_");this.localeOverride=i||0===l.indexOf("/"+_t.lang+"/")?_t.lang:null;this.trigger("session-init",this);null!==j&&null!==d&&(this.startUpId_=b,this.changeState_("authenticatedSession"),this.trigger("session-startup",this));null===d&&this.changeState_(j?"pendingAuthentication":"pendingSession");d=[window.location.href];g&&d.push(g);a.Api.getInstance().request("startup",d,{locale:this.localeOverride,requestParameters:f?{badooContinue:f}:null},
_.bind(function(a,c){a||!e.isProtoObject(c)?(this.startUpId_=b,h.getInstance().sendEvent(h.EVENT.CATEGORY.ERROR,h.EVENT.ACTION.API,h.EVENT.LABEL.SESSION_STARTUP),this.changeState_(j?"anonymousSession":"noSession"),this.trigger("session-startup",null)):(this.startUpId_=b,this.processLoginResponse(c,!0))},this))}},getSessionId:function(){if(_.isNull(this.sessionId_)){var a=d.get(this.SESSION_COOKIE_NAME);this.sessionId_=a&&"null"!==a?a:null}h.getInstance().setDimension(h.DIMENSION.BMA_CLUSTER,this.getSessionCluster_(this.sessionId_));
return this.sessionId_},getStartupId:function(){return this.startUpId_},setSessionId_:function(a){d.set(this.SESSION_COOKIE_NAME,"",-1);a?d.set(this.SESSION_COOKIE_NAME,a,365,g.get("cookie.domain")):(this.rateableSession_=!1,d.set(this.SESSION_COOKIE_NAME,"",-1,g.get("cookie.domain")));this.sessionId_=a;h.getInstance().setDimension(h.DIMENSION.BMA_CLUSTER,this.getSessionCluster_(this.sessionId_))},updateSessionId:function(a){a&&this.sessionId_!==a&&(this.setSessionId_(a),this.trigger("session-change",
a))},getSessionCluster_:function(a){return _.isString(a)&&(a=a.match(/^[^:]*/))?a[0]:""},setUserId_:function(a){var b=this.userId_;this.userId_=a;b!==a&&this.trigger("user-change",{oldUserId:b,newUserId:a});a?(c.getInstance().saveString("session.userId",a),this.changeState_("authenticatedSession")):(c.getInstance().remove("session.userId"),this.changeState_("anonymousSession"))},getUserId:function(){return this.userId_},isLoggedIn:function(){return null!==this.userId_&&null!==this.sessionId_},getSessionOptions:function(){var b=
{},e=this.getSessionId();e&&(b.sessionId=e);this.localeOverride&&(b.locale=this.localeOverride);i&&(b=_.defaults(a.NativeBridge.getInstance().getSessionOptions(),b));return b},loginFacebook:function(c){var d=_.bind(function(d){_.isNull(d)||_.isNull(d.getSessionId())?this.trigger("login",{result:!1,message:_t.error_connection_badooUnavailable}):d.isLoggedIn()?this.trigger("login",{result:!0,userId:this.getUserId()}):(b.getInstance().off("login").on("login",_.bind(function(c){c.success?(b.getInstance().off("login"),
this.changeState_("pendingAuthentication"),a.Api.getInstance().request("externalLogin",{provider:"fb",token:c.token},_.bind(function(a,b){a||!e.isProtoObject(b)?(this.changeState_("anonymousSession"),this.trigger("login",{result:!1,message:_t.error_connection_badooUnavailable})):this.processLoginResponse(b)},this))):(c=_.isString(c.message)?c.message:_t.wap_reg_facebook_failed,h.getInstance().sendEvent(h.EVENT.CATEGORY.ERROR,h.EVENT.ACTION.API,h.EVENT.LABEL.AUTHENTICATE),this.trigger("login",{result:!1,
message:c}))},this)),this.trigger("login-pending"),b.getInstance().login(c))},this);null===this.sessionId_?(this.once("session-startup",d),this.sessionStartup()):d(this)},loginEmail:function(b,e,c){a.Api.getInstance().request("login",{name:b,password:e},_.bind(function(b,e){b?(new a.Views.Alert).update():_.isFunction(c)&&c.call(this,e)},this))},registerEmail:function(b,e){_.isObject(b)&&a.Api.getInstance().request("register",{name:b.name,birthday:b.birthday,gender:b.gender,email:b.email,location:b.location},
_.bind(function(b,c){b?(new a.Views.Alert).update():e.call(this,c)},this))},handleIncompleteData:function(a){a&&!e.isProtoObject(a)&&(a=e.fromJSON(a));return e.isProtoObject(a.extract("incompleteData"))?(this.trigger("DataIncompleteError",a),!0):!1},processLoginResponse:function(a,b){this.setSessionId_(a.extract("sessionId"));a.extract("userId")&&this.setUserId_(a.extract("userId"));a.extract("firstLogin")&&(this.firstLogin_=a.extract("firstLogin"));if(!this.doRedirect_(a)){if(a.extract("changeHost"))this.onClientChangeHost_(a.extract("changeHost"));
a.extract("jinbaUrl")&&(this.jinbaUrl_=a.extract("jinbaUrl"));b&&this.trigger("session-startup",this);this.trigger("login",{result:!!a.extract("result"),userId:this.getUserId(),errorCode:a.extract("errorCode")});this.handleIncompleteData(a);this.trigger("login-response")}},logout:function(e){e||a.Api.getInstance().request("logout",_.bind(function(a){a||this.sessionStartup()},this));this.setUserId_(null);this.setSessionId_(null);this.changeState_("noSession");this.firstLogin_=null;this.trigger("logout");
b.getInstance().once("logout",function(){});b.getInstance().logout()},isFirstLogin:function(){return this.isLoggedIn()&&this.firstLogin_},requireActiveSession:function(){var a=null!==this.sessionId_;a||this.sessionStartup();return a},requiresPhotoUpload:function(a){return 0<arguments.length?j.put("requiresPhotoUpload",!!a,6048E5):j.get("requiresPhotoUpload")},onRateUsReceived_:function(){this.rateableSession_=!0},onClientChangeHost_:function(b){b&&b.extract("hosts.length")&&!a.config.get("api.ignoreHostChange")&&
(b.extract("mustReconnect")||f.warn("Received a ChangeHost containing hosts",b.extract("hosts"),"but must_reconnect was false"),b=b.extract("hosts[0]"),a.config.updateHostName(b),a.Api.getInstance().request("ping",_.bind(function(b){b&&a.config.updateHostName()})))},isRateableSession:function(){return this.rateableSession_},setRateableSession:function(a){this.rateableSession_=!!a},getJinbaUrl:function(){return this.jinbaUrl_}});var o;l.getInstance=function(){return o||(o=new l)};a.Session=l})(Badoo);
Badoo=Badoo||{};
(function(a){var f=a.Utils.Logger.getLogger("push"),g=a.Utils.sleep,d=5E3,b=null,c=!1,h=null,e,j=function(){_.bindAll(this);e=a.Session.getInstance();e.on("user-change",this.onUserChange_);g.on("device-wake-up",this.restart);g.on("device-offline",this.disable);g.on("device-online",this.restart)};_.extend(j.prototype,a.Events,{abort_:function(){clearTimeout(b);b=null;h&&h.abort&&(h.abort(),h=null)},restart:function(){this.disable();this.enable()},enable:function(){c||(c=!0,d=this.INITIAL_RETRY_TIME,this.runPushHandler_())},
disable:function(){c&&(c=!1,this.abort_())},dispatchEvents_:function(b){if(b&&b.length){var e=b.length,c,d;for(d=0;d<e;d++)if(c=b[d],a.Proto.Object.isProtoObject(c)&&"PushWrapper"===c.getClass()&&_.has(l,c.extract("type")))try{this.trigger(l[c.extract("type")],c.extract("content"))}catch(h){f.error("Failed to trigger pushed event",c)}}},onUserChange_:function(){e.isLoggedIn()?this.enable():this.disable()},runPushHandler_:function(){!e.isLoggedIn()||!c||h?c=!!h:h=a.Api.getInstance().request("push",
this.onPushReceived_)},onPushReceived_:function(a,e){h=null;a?c&&(d=3E5>2*d?2*d:3E5,b=setTimeout(this.runPushHandler_,d)):(d=5E3,this.dispatchEvents_(e),this.runPushHandler_())}});var i;j.getInstance=function(){return i||(i=new j)};var l=j.PUSH_TYPES={CLIENT_CHAT_MESSAGE:"CLIENT_CHAT_MESSAGE",CLIENT_APP_FEATURE:"CLIENT_APP_FEATURE",CLIENT_NOTIFICATION:"CLIENT_NOTIFICATION",CLIENT_CHANGE_HOST:"CLIENT_CHANGE_HOST",CLIENT_CHAT_MESSAGES_READ:"CLIENT_CHAT_MESSAGES_READ",CLIENT_PERSON_NOTICE:"CLIENT_PERSON_NOTICE",
CLIENT_RATE_US:"CLIENT_RATE_US",CLIENT_USER_DATA_INCOMPLETE:"CLIENT_USER_DATA_INCOMPLETE"};a.Utils.Push=j})(Badoo);Badoo=Badoo||{};
(function(a){var f=a.Utils.DOM,g=a.UI,d=a.Utils.Helpers,b=a.Views.PhotoCarousel=a.View.extend({className:"photo-carousel-view carousel-wrapper",state_:null,slides_:null,firstSlideIndex_:0,currentIndex_:0,maxScrollX_:0,startX_:0,pointX_:0,currX_:0,slideElements_:null,didMove_:!1,events:{touchstart:"onTouchStart_"},init:function(){this.state_=c.DEFAULT;this.el.appendChild(f.satisfy("div.carousel"));this.$(".carousel").css({"transition-property":"transform","transition-duration":"0ms","transition-timing-function":"ease"});
this.initStatusView()},initStatusView:function(){var b=this.registerChildView("status",new a.Views.Dots);b.on(a.Views.Dots.EVENTS.CLICK,this.onStatusClick_);b.appendTo(this.el)},update:function(a){_.isNumber(a.index)&&(this.currentIndex_=a.index,this.currX_=-(g.getScreenDimensions().width*this.currentIndex_),this.updatePosition_(),this.render(),this.resize(),this.updateSlides_(),this.updateStatusPosition(a.index));_.isArray(a.slides)&&(this.reset(),this.slides_=a.slides,this.render(),this.resize(),
this.updateSlides_());_.has(c,a.state)&&(this.state_=a.state,this.updateState());return this},render:function(){var a=this.$el.find(".carousel")[0],b=g.getScreenDimensions().width,c=f.removeForEdit(a);a.innerHTML="";var d=Math.min(this.slides_.length,3);this.maxScrollX_=-(b*(this.slides_.length-1));var h=[];_.times(d,function(){var b=f.satisfy("div.carousel-slide div.carousel-slide-photo");h.push(b);a.appendChild(b)});this.slideElements_=h;a.style.width=b+"px";c();this.renderStatusView();return this},
renderStatusView:function(){this.getChildView("status").update({count:1===this.slides_.length?0:Math.min(this.slides_.length,3)})},updateSlides_:function(){var a=this.slides_,b=this.slideElements_,c=this.currentIndex_,c=a.length<=this.slideElements_.length?_.range(a.length):0===c?_.range(3):c===a.length-1?_.range(a.length-3,a.length):_.range(c-1,c+2);if(b&&0<b.length){var d=parseInt(b[0].getAttribute("data-slide-index"),10),f=parseInt(_.last(b).getAttribute("data-slide-index"),10);-1===c.indexOf(d)?
b.push(b.shift()):-1===c.indexOf(f)&&b.unshift(b.pop());for(b=0;b<this.slideElements_.length;b++)this.updateSlide_(c[b],this.slideElements_[b],a[c[b]])}},updateSlide_:function(a,b,f){var g=$(b),o=g.hasClass("show-loading");if(parseInt(b.getAttribute("data-slide-index"),10)!==a||o){var p=$(b).find(".carousel-slide-photo");if(!o){g.addClass("show-loading").css("left",100*a+"%").attr("data-slide-index",a);var n=(o=this.state_===c.FULLSCREEN)?1:f.scaleFactor;p.css(_.extend({},f.css,{transform:"scale3d("+
n+", "+n+", 1) translate3d("+(o?f.fullscreenX:f.scaledX)+"px , "+(o?f.fullscreenY:f.scaledY)+"px , 0)","background-image":""}))}2>Math.abs(a-this.currentIndex_)&&d.preloadImage(f.url,_.bind(function(c){parseInt(b.getAttribute("data-slide-index"),10)===a&&(g.removeClass("show-loading"),p.css({"background-image":"url("+c+")"}),this.trigger(c?h.IMAGE_LOADED:h.IMAGE_LOAD_ERROR,f))},this))}},resize:function(){var a=g.getScreenDimensions(),b=a.width/a.height,c=a.width/(a.height/2);_.each(this.slides_,function(d){var f=
d.photoWidth/d.photoHeight,h,g;d.width&&d.height?(g=d.height,h=d.width):f>b?(h=a.width,g=Math.round(d.photoHeight*(h/d.photoWidth))):(g=a.height,h=Math.round(g*(d.photoWidth/d.photoHeight)));d.noScale?(d.scaleFactor=1,f=g):f>c?(d.scaleFactor=Math.round(a.width/h),f=Math.round(g*d.scaleFactor)):(d.scaleFactor=a.height/2/g,f=a.height/2);d.fullscreenX=Math.round((a.width-h)/2);d.fullscreenY=Math.round((a.height-g)/2);d.scaledX=d.fullscreenX/d.scaleFactor;d.scaledY=Math.max((a.height/2-f)/2,0);f=Math.round(h/
2);d.css={width:h,height:g,"background-size":d.backgroundSize||h+"px "+g+"px","background-position":d.backgroundPosition||"0 0","transform-origin":f+"px 0px"}});return this},updateState:function(){var a=this.state_===c.FULLSCREEN,b=this.slides_;_.each(this.slideElements_,function(c){var d=b[parseInt(c.getAttribute("data-slide-index"),10)],f=a?1:d.scaleFactor,g=a?d.fullscreenX:d.scaledX,d=a?d.fullscreenY:d.scaledY;$(c).find(".carousel-slide-photo").css({transform:"scale3d("+f+", "+f+", 1) translate3d("+
g+"px , "+d+"px , 0)"})});return this},onTouchStart_:function(a){this.didMove_=!1;a=$.os.supportsTouch?a.touches[0]:a;1>$(a.target).closest(".carousel").length||(this.startX_=this.currX_,this.pointX_=a.pageX,this.el.addEventListener($.os.supportsTouch?"touchmove":"mousemove",this.onTouchMove_,!1),this.el.addEventListener($.os.supportsTouch?"touchend":"mouseup",this.onTouchEnd_,!1),this.trigger(h.MOVE_START))},onTouchMove_:function(a){this.didMove_=!0;a.preventDefault();var a=$.os.supportsTouch?a.touches[0]:
a,b=a.pageX-this.pointX_;if(0<this.currX_||this.currX_<this.maxScrollX_)b/=2;this.currX_+=b;this.pointX_=a.pageX;this.updatePosition_()},onTouchEnd_:function(){this.el.removeEventListener($.os.supportsTouch?"touchmove":"mousemove",this.onTouchMove_,!1);this.el.removeEventListener($.os.supportsTouch?"touchend":"mouseup",this.onTouchEnd_,!1);var a=this.currentIndex_,b=this.currX_-this.startX_;0<b&&0<this.currentIndex_?a--:0>b&&this.currentIndex_<this.slides_.length-1&&a++;this.currX_=-(g.getScreenDimensions().width*
a);var c=this.$(".carousel");c.css("transition-duration","250ms");var d=_.bind(function(){c[0].removeEventListener($.fx.transitionEnd,d,!1);c.css("transition-duration","0ms")},this);c[0].addEventListener($.fx.transitionEnd,d,!1);a!==this.currentIndex_&&(this.currentIndex_=a,this.updateSlides_(),this.updateStatusPosition(a),this.trigger(h.INDEX_CHANGE,{index:a}));this.trigger(h.MOVE_END);!1===this.didMove_&&this.trigger(h.CLICK);requestAnimationFrame(this.updatePosition_)},onStatusClick_:function(){this.trigger(h.STATUS_CLICK)},
updateStatusPosition:function(a){0===a?this.getChildView("status").setPosition(0):a===this.slides_.length-1?this.getChildView("status").setPosition(Math.min(this.slides_.length-1,2)):this.getChildView("status").setPosition(1)},updatePosition_:function(){this.$(".carousel").css("transform","translate3d("+this.currX_+"px, 0, 0)")},reset:function(){this.$(".carousel").empty();this.currX_=this.currentIndex_=0;this.updatePosition_();this.getChildView("status").setPosition(0);return this},refresh:function(){var a=
g.getScreenDimensions().width;this.$(".carousel").css("width",a+"px");this.$(".carousel-slide").css("width",a+"px");this.resize();this.updateState();return this},getCurrentPhoto:function(){return this.slides_[this.currentIndex_].url},getCurrentSlide:function(){return this.slides_[this.currentIndex_]},getCurrentIndex:function(){return this.currentIndex_}}),c=b.STATES={DEFAULT:"DEFAULT",FULLSCREEN:"FULLSCREEN"},h=b.EVENTS={INDEX_CHANGE:"INDEX_CHANGE",MOVE_START:"MOVE_START",MOVE_END:"MOVE_END",IMAGE_LOADED:"IMAGE_LOADED",
IMAGE_LOAD_ERROR:"IMAGE_LOAD_ERROR",CLICK:"CLICK",STATUS_CLICK:"STATUS_CLICK"}})(Badoo);Badoo=Badoo||{};
(function(a,f){var g=a.Utils.DOM,d=[],b=a.View.extend({id:"modal-container",isHiding_:!1,currentView_:null,events:{click:"hide","click .popup-action":"onPopupAction_"},update:function(a){this.enable();if(this.currentView_===a)return this;if(null!==this.currentView_)return d.push(a),this;this.currentView_=a;var b=a.getBackDropType();_.isString(b)&&this.$el.attr("class",b);this.$el.append(a.$el);f(document.body).append(this.el);_.defer(this.show);return this},onTransitionEnd_:function(){this.$el.off(f.fx.transitionEnd);
this.close_()},close_:function(){this.$el.remove().removeClass("visible-box").empty();this.currentView_=null;0<d.length&&this.update(d.pop())},isVisible:function(){return this.$el.hasClass("visible-box")},show:function(){this.$el.addClass("visible-box")},hide:function(a,b){if(!this.isVisible())return this;a&&a.target===this.el?this.trigger("dismiss"):!a&&b?this.close_():a||(this.$el.on(f.fx.transitionEnd,this.onTransitionEnd_),this.$el.removeClass("visible-box"));return this},onPopupAction_:function(a){if(this.currentView_)this.currentView_.onPopupAction(a)}}),
c=null,h=a.Views.Popup=a.View.extend({className:"modal-content",init:function(){c||(c=new b);this.titleElement_=g.$satisfy("div.modal-title");this.containerElement_=g.$satisfy("div.modal-body")},update:function(){this.containerElement_.empty().append(this.getContentElement());var a=this.getTitleElement();a&&this.titleElement_.empty().append(a);this.$el.append(this.titleElement_,this.containerElement_);this.show();return this},show:function(){c.update(this)},dismiss:function(a){c.hide(null,_.isBoolean(a)?
a:!1);return this},enable:function(){c.enable();c.on("dismiss",this.onPopupDismiss_);return h._super.enable.apply(this)},disable:function(){c.disable();c.off("dismiss",this.onPopupDismiss_);return h._super.disable.apply(this)},onPopupDismiss_:function(){this.shouldPreventClosing()||(this.trigger("dismissed"),this.dismiss())},onPopupAction:function(){},getTitleElement:function(){return null},getContentElement:function(){return f(g.createElement())},shouldPreventClosing:function(){return!1},getBackDropType:function(){return e.DEFAULT}}),
e=h.MODAL_BG={DARK:"dark",DEFAULT:"default"}})(Badoo,Zepto);Badoo=Badoo||{};
(function(a){var f=a.Utils.DOM,g=a.Views.Alert=a.Views.Popup.extend({className:"modal-content alert-popup",closeHandler_:null,title_:null,actionText_:null,message_:null,update:function(a){this.enable();a=a||{};a.onDismiss&&_.isFunction(a.onDismiss)&&(this.closeHandler_=a.onDismiss);this.message_=a.message?a.message:a.type?a.type.message:d.ERROR.message;this.title_=a.title?a.title:a.type?a.type.title:d.ERROR.title;this.actionText_=a.actionText?a.actionText:a.type?a.type.actionText:d.ERROR.actionText;
g._super.update.apply(this,arguments)},onPopupAction:function(){this.dismiss();this.closeHandler_&&this.closeHandler_()},getTitleElement:function(){return this.title_?f.createElement("h2",{},this.title_):null},getContentElement:function(){var a=$(document.createDocumentFragment());a.append(f.createElement("p",{html:this.message_}),f.createElement("span",{"class":"button inline green-button popup-action",text:this.actionText_}));return a},shouldPreventClosing:function(){return!0}}),d=g.TYPES={ERROR:{title:_t.error_oops,
message:_t.wap_oops_500,actionText:_t.btn_ok},INFO:{title:"",message:"",actionText:_t.btn_ok}}})(Badoo);Badoo=Badoo||{};
(function(a){var f=a.Utils.DOM.createElement;a.Views.ToggleItems=a.View.extend({tagName:"ul",className:"toggle-items",isRadio_:!1,hasIcons_:!1,events:{"click li":"toggle_"},update:function(a){if(a&&a.options)return this.updateOptions_(a.options),this;if(2===arguments.length){var d=_.isArray(arguments[0])?arguments[0]:[arguments[0]],b=arguments[1],d=this.$el.find(d.map(function(a){return'[data-id="'+a+'"]'}).join(","));!0===b?d.addClass("toggle"):!1===b&&d.removeClass("toggle")}else 1===arguments.length&&
this.render(arguments[0]);return this},updateOptions_:function(a){a&&(a.isBlock&&this.$el.addClass("block"),a.isRadio&&(this.isRadio_=!0),a.hasIcons&&(this.hasIcons_=!0))},render:function(a){var d=this.hasIcons_,b;this.$el.empty().append(a.map(function(a){b={"data-id":a.id};d?b.className="i-"+a.name:b.text=a.name;return f("li",b)}));return this},toggle_:function(a,d){var b=$(d);this.isRadio_?b.hasClass("toggle")||b.addClass("toggle").siblings().removeClass("toggle"):b.toggleClass("toggle");this.trigger("toggle",
b.data("id")+"")},getSelected:function(){return this.$el.find(".toggle").map(function(){return $(this).data("id")+""})},getData:function(){var a={};this.$el.children().each(function(){var d=$(this),b=d.data("id")+"";a[b]=d.hasClass("toggle")});return a}})})(Badoo);Badoo=Badoo||{};
(function(a,f){var g=a.Utils.DOM.createElement,d=a.Utils.DOM.satisfy,b=f.os.supportsTouch?"touchmove":"mousemove",c=f.os.supportsTouch?"touchend":"mouseup";a.Views.SliderView=a.View.extend({className:"slider",leftSlider_:null,rightSlider_:null,range_:null,currentSlider_:null,max_:0,min_:0,offsetWidth_:0,leftSliderPos_:0,rightSliderPos_:0,multiplier_:0,isPositionAllowed:function(){return!0},init:function(){this.render()},events:{touchstart:"touchStart_"},update:function(a){this.max_=a.max;this.min_=
a.min;this.offsetWidth_=this.el.offsetWidth;this.multiplier_=this.offsetWidth_/(this.max_-this.min_);this.moveSlider_(this.rightSlider_,(a.to-a.min)*this.multiplier_);this.moveSlider_(this.leftSlider_,(a.from-a.min)*this.multiplier_);_.isFunction(a.isPositionAllowed)&&(this.isPositionAllowed=a.isPositionAllowed)},getNearestSlider_:function(a){return Math.abs(a-this.leftSliderPos_)<Math.abs(a-this.rightSliderPos_)?this.leftSlider_:this.rightSlider_},moveSlider_:function(a,b){var c;a===this.leftSlider_?
(b=Math.max(0,Math.min(b,this.rightSliderPos_)),c=this.getData(b,this.rightSliderPos_)):(b=Math.min(this.offsetWidth_,Math.max(b,this.leftSliderPos_)),c=this.getData(this.leftSliderPos_,b));this.isPositionAllowed(c)&&(a.style.left=b+"px",a===this.leftSlider_?(this.range_.style.left=b+"px",this.leftSliderPos_=b):(this.range_.style.right=this.offsetWidth_-b+"px",this.rightSliderPos_=b),this.triggerChange_())},triggerChange_:_.throttle(function(){this.trigger("change",this.getData(this.leftSliderPos_,
this.rightSliderPos_))},50),moveSliderFromEvent_:function(c,e){var d=(f.os.supportsTouch?e.touches[0]:e).pageX-this.el.offsetLeft-a.UI.offsetGap;e.type!==b&&(c=this.currentSlider_=this.getNearestSlider_(d));this.moveSlider_(c,d)},touchStart_:function(a){this.moveSliderFromEvent_(null,a);window.addEventListener(b,this.touchMove_,!1);window.addEventListener(c,this.touchEnd_,!1)},touchMove_:function(a){this.moveSliderFromEvent_(this.currentSlider_,a)},touchEnd_:function(){this.currentSlider_=null;window.removeEventListener(b,
this.touchMove_);window.removeEventListener(c,this.touchEnd_)},render:function(){this.$el.append(this.range_=g("div",{className:"range"}),this.leftSlider_=d("span"),this.rightSlider_=d("span"))},getData:function(a,b){0===arguments.length&&(a=this.leftSliderPos_,b=this.rightSliderPos_);return{from:Math.round(this.min_+a/this.multiplier_),to:Math.round(this.min_+b/this.multiplier_)}}})})(Badoo,Zepto);Badoo=Badoo||{};
(function(a,f){var g=a.Utils.DOM.createElement,d=(a.Views.Dots=a.View.extend({tagName:"ul",className:"dots",dotCount_:0,currentPos_:0,events:{click:"onClick_"},update:function(a){a.klass&&this.$el.attr("class",a.klass);_.isNumber(a.count)&&(this.dotCount_=a.count);_.isNumber(a.position)&&(this.currentPos_=a.position);this.render();return this},forward:function(){this.currentPos_++;this.currentPos_>this.dotCount_-1&&(this.currentPos_=0);this.render();return this},backward:function(){this.currentPos_--;
0>this.currentPos_&&(this.currentPos_=this.dotCount_-1);this.render();return this},setPosition:function(a){if(a===this.currentPos_)return this;this.currentPos_=a;this.render();return this},onClick_:function(){this.trigger(d.CLICK)},render:function(){if(this.$el.children().length!==this.dotCount_){this.$el.empty();for(var a=0;a<this.dotCount_;a++)this.$el.append(g("li"))}f.asap(_.bind(function(){this.$el.children().removeClass("selected").eq(this.currentPos_).addClass("selected")},this));return this}})).EVENTS=
{CLICK:"CLICK"}})(Badoo,Zepto);Badoo=Badoo||{};
(function(a){var f=a.Utils.DOM,g=Badoo.Utils.DOM.createElement;a.Views.RadioGroup=a.View.extend({className:"radio-group",init:function(){this.$el.on("change",this.handleChange_)},update:function(a){_.isString(a)?this.$("input[value="+a+"]").attr("checked",!0):a.reset&&this.$("input").each(function(){this.checked=!1})},handleChange_:function(a){a.stopPropagation();this.trigger("change")},render:function(a){var b=f.removeForEdit(this.el);this.$el.empty();for(var c=0,h=a.length;c<h;c++){var e=_.uniqueId("radio-");
this.$el.append(g("label",{"for":e},[g("input",{id:e,type:"radio",name:a[c].name,value:a[c].value}),a[c].label]))}b()},value:function(){return this.$("input:checked").attr("value")}})})(Badoo,Zepto);Badoo=Badoo||{};
(function(a,f){var g=a.Utils.DOM,d=Badoo.Utils.DOM.satisfy,b=Badoo.Utils.DOM.createElement,c=a.Views.IncompleteProfileAction=a.Views.Popup.extend({className:"generic-popup form modal-content",locationContainer_:null,nameView_:null,fieldErrors_:null,init:function(){this.registerChildView("gender-view",new a.Views.RadioGroup);this.fieldErrors_=[];this.getChildView("gender-view").render([{name:"gender",value:"MALE",label:_t.incomplete_profile_guy},{name:"gender",value:"FEMALE",label:_t.incomplete_profile_girl}]);
this.registerChildView("date-select",new a.Views.DateSelectView).update({placeholder:_t.signin_new_dd_mm_yyyy});this.locationContainer_=f(d("div"));this.nameView_=d("input[type=text][name=name][value=]");c._super.init.apply(this,arguments)},getLocationContainer:function(){return this.locationContainer_},update:function(a){a.error?this.fieldErrors_=a.error.fields||[]:a.basicInfo&&(a=a.basicInfo,this.getChildView("date-select").update({date:a.extract("dob")}),this.getChildView("gender-view").update(a.extract("gender")),
this.nameView_.value=a.extract("name"));c._super.update.call(this)},getContentElement:function(){return g.$satisfy("div.form").append(b("h3",_t.incomplete_profile_title),b("span",_t.incomplete_profile_subtitle),b("label",{"class":"name"+(-1<this.fieldErrors_.indexOf("name")?" error":"")},_t.lbl_name),this.nameView_,b("label",{"class":"location"+(-1<this.fieldErrors_.indexOf("location")?" error":"")},_t.incomplete_profile_location),this.locationContainer_,b("label",{"class":"dob"+(-1<this.fieldErrors_.indexOf("dob")?
" error":"")},_t.signin_new_birthday),this.getChildView("date-select").el,b("label",{"class":"inline gender"+(-1<this.fieldErrors_.indexOf("gender")?" error":"")},_t.signin_new_gender),this.getChildView("gender-view").el,b("button",{"class":"green-button popup-action"},_t.cmd_continue))},onPopupAction:function(){this.trigger("submit",{gender:this.getChildView("gender-view").value(),dob:this.getChildView("date-select").value(),name:this.nameView_.value})},shouldPreventClosing:function(){return!0}})})(Badoo,
Zepto);Badoo=Badoo||{};
(function(a,f){var g=a.Utils.DOM,d=!f.os.oldAndroid,b=a.View.extend({className:"page modal"}),c=a.Views.App=a.View.extend({id:"app-view",pages_:[],index_:0,appMenuOverlay_:null,events:{"click .app-menu-overlay":"toggleAppMenu_","click .app-menu-item":"onAppMenuItemClick_"},init:function(){this.pages_.push(f(g.createElement()));this.pages_.push(f(g.createElement()));this.appMenuOverlay_=g.$satisfy("div.app-menu-overlay")},getNextPage:function(){this.index_=this.index_?0:1;return this.pages_[this.index_].removeAttr("class").addClass("page")},update:function(b){b.appMenu&&
(this.$(".app-menu").remove(),this.$el.prepend(g.renderTemplate("app-menu",b.appMenu)));b.appMenuToggle&&this.toggleAppMenu_();if(b.pageTransition){var e=this.pages_[this.index_],f=this.pages_[this.index_?0:1],i=b.pageTransition.transition;_.has(c.TRANSITIONS,i)&&(this.log.warn("Unknown transition:",i),i=c.TRANSITIONS.SLIDE_RIGHT);e.addClass(b.pageTransition.name);!f.get(0).parentNode||!d||a.UI.isLandscape()?(this.el.appendChild(e.get(0)),f.remove().empty(),this.trigger("animation-complete")):requestAnimationFrame(_.partial(this.doTransition_,
f,e,i))}},doTransition_:function(a,b,c){var d=_.bind(function(){b.get(0).removeEventListener(f.fx.transitionEnd,d,!1);b.removeClass("page-animation "+c);a.remove().empty();this.trigger("animation-complete")},this);b.get(0).addEventListener(f.fx.transitionEnd,d,!1);b.addClass(c+" page-animation");a.get(0).style.zIndex="600";b.get(0).style.zIndex="601";this.el.appendChild(b.get(0));requestAnimationFrame(function(){b.removeClass(c)})},getModalContainer:function(a){var e=this.registerChildView(a,new b);
this.el.appendChild(e.el);e.$el.addClass(a).get(0).style.zIndex="602";return e.$el},removeModalContainer:function(a){this.removeChildView(a)},toggleAppMenu_:function(){this.pages_[this.index_].addClass("page-animation");this.$el.hasClass("has-app-menu")?(f(this.pages_[this.index_]).one(f.fx.transitionEnd,this.onAppMenuClose_),this.$el.removeClass("has-app-menu"),this.appMenuOverlay_.remove()):(f(this.pages_[this.index_]).one(f.fx.transitionEnd,this.onAppMenuOpen_),this.$el.addClass("has-app-menu").append(this.appMenuOverlay_))},
onAppMenuOpen_:function(){this.trigger("menu-open")},onAppMenuClose_:function(){this.trigger("menu-close")},onAppMenuItemClick_:function(a,b){var b=f(b),c;if((c=b.attr("class").match(/app-menu-item-([a-z\-]*)/))&&c[1])c=c[1],"own-profile"===c&&(b.hasClass("no-photo")&&f(a.target).hasClass("app-menu-icon"))&&(c="add-photos"),this.trigger("menu-item-select",{name:c})}});c.TRANSITIONS={SLIDE_RIGHT:"slideLeft",SLIDE_LEFT:"slideRight",SLIDE_UP:"slideDown",SLIDE_DOWN:"slideUp",FADE_IN:"fadeOut",POP:"minimise"}})(Badoo,
Zepto);Badoo=Badoo||{};
(function(a,f){var g=a.Utils.DOM,d=function(a){return f(a).insertBefore(this.find(".infinite-scroll-spinner"))},b=function(a){return f(a).insertAfter(this.find(".pull-to-refresh"))},c=function(){return this.children().each(function(){var a=f(this);!a.hasClass("pull-to-refresh")&&!a.hasClass("bottom-spinner")&&a.remove()})},h=a.Views.ScrollingView=a.View.extend({pullToRefresh:!1,$pullToRefreshEl:null,refreshPending:!1,pullToRefreshState:"PULL",pullToRefreshStart:null,infiniteScroll:!1,scrollerTopOffset:0,
scroller:null,$wrapper:null,iScroll:null,scrollY:0,toolsOffset:0,toolsState:"NONE",hasTools:!1,$toolsEl:null,offsets:null,init:function(){var a=g.createElement("div",{"class":"scroller",id:"scroller-"+(this.id||this.className||_.uniq())},this.el);this.$wrapper=f(a);this.offsets={};this.el.removeAttribute("data-view-id");a.setAttribute("data-view-id",this.viewId_);this.pullToRefresh&&(this.$pullDownEl=this.createPullToRefreshElement(),this.$el.prepend(this.$pullDownEl),this.$el.css("transform","translate(0, -"+
(this.scrollerTopOffset+52)+"px)"),this.$el.prepend=b,this.$wrapper.addClass("has-pull-to-refresh"));this.infiniteScroll&&(this.$el.append(this.createInfiniteScrollElement()),this.$wrapper.addClass("has-infinite-scroll"),this.$el.append=d);if(this.infiniteScroll||this.pullToRefresh)this.$el.empty=c;this.iScroll=new iScroll(a,{onRefresh:this.onScrollRefresh,onScrollStart:this.onScrollStart,onScrollMove:this.onScrollMove,onScrollEnd:this.onScrollEnd,vScrollbar:!1,hScrollbar:!1,topOffset:this.scrollerTopOffset+
(this.pullToRefresh?52:0),handleClick:!1});a.addEventListener("touchmove",function(a){a.preventDefault()})},update:function(a){a&&!1===a.infiniteScroll?(this.$wrapper.removeClass("has-infinite-scroll"),this.infiniteScroll=!1):a&&!0===a.infiniteScroll&&(this.$wrapper.addClass("has-infinite-scroll"),this.infiniteScroll=!0);a&&!1===a.pullToRefresh?(this.$wrapper.removeClass("has-pull-to-refresh"),this.pullToRefresh=!1):a&&!0===a.pullToRefresh&&(this.$wrapper.addClass("has-pull-to-refresh"),this.pullToRefresh=
!0);this.refreshScroller();return this},getElement:function(){return this.$wrapper},enableScroller:function(){this.iScroll.enable()},disableScroller:function(){this.iScroll.disable()},destroyScroller:function(){this.iScroll.destroy();this.iScroll=null},onScrollStart:function(){},onScrollMove:function(){if(this.pullToRefresh){var a=this.iScroll.y,b=5<a;this.hasTools&&("RESTRICTED"!==this.toolsState&&"RELEASE"!==this.pullToRefreshState)&&(a>-1*this.offsets.topPage+this.$toolsEl.height()/2?(this.iScroll.minScrollY=
-this.offsets.topTools,this.iScroll.options.topOffset=this.offsets.topTools,this.toolsState="SHOWN"):(this.iScroll.minScrollY=-this.offsets.topPage,this.iScroll.options.topOffset=this.offsets.topPage,this.toolsState="HIDDEN"));"DISABLED"!==this.pullToRefreshState&&a!==this.scrollY&&(this.scrollY=a,b&&"PULL"===this.pullToRefreshState?(this.pullToRefreshState="RELEASE",this.$pullDownEl.addClass("flip"),this.$pullDownEl.find(".pull-to-refresh-text").text(_t.folder_releasetorefresh),this.iScroll.minScrollY=
0,this.iScroll.options.topOffset=0):!b&&"RELEASE"===this.pullToRefreshState&&(this.pullToRefreshState="PULL",this.$pullDownEl.removeClass("flip"),this.$pullDownEl.find(".pull-to-refresh-text").text(_t.folder_pulldowntorefresh),"RESTRICTED"!==this.toolsState?(this.iScroll.minScrollY=-this.offsets.topTools,this.iScroll.options.topOffset=this.offsets.topTools):(this.iScroll.minScrollY=-this.offsets.topPage,this.iScroll.options.topOffset=this.offsets.topPage)))}},onScrollEnd:function(){if(this.iScroll.y<=
this.iScroll.maxScrollY&&Math.abs(this.iScroll.maxScrollY)>=this.iScroll.wrapperH)this.onScrollBottom();this.hasTools&&this.iScroll.y>=-(this.offsets.topTools+(this.offsets.topPage-this.offsets.topTools)-1)&&this.iScroll.y!==-this.offsets.topTools&&"RELEASE"!==this.pullToRefreshState?this.scrollTo({x:0,y:this.offsets.topTools},250):this.pullToRefresh&&"DISABLED"!==this.pullToRefreshState&&"RELEASE"===this.pullToRefreshState&&this.triggerPullToRefresh_()},triggerPullToRefresh_:function(){this.pullToRefreshState=
"LOADING";this.$pullDownEl.find(".pull-to-refresh-image").attr("src","img/misc/spinner-small-on-white.gif");this.$pullDownEl.find(".pull-to-refresh-text").text(_t.str_loading);this.refreshPending=!0;this.pullToRefreshStart=(new Date).getTime();this.onPullToRefresh()},triggerPullToRefresh:function(){this.pullToRefreshState="RELEASE";this.iScroll.minScrollY=0;this.iScroll.options.topOffset=0;this.scrollToTop(250);this.triggerPullToRefresh_();return this},onScrollBottom:function(){this.trigger("scroll-bottom")},
onPullToRefresh:function(){this.trigger("pull-to-refresh")},onScrollRefresh:function(){this.pullToRefresh&&!this.refreshPending&&"LOADING"===this.pullToRefreshState&&(this.pullToRefreshState="PULL",this.$pullDownEl.removeClass("flip").find(".pull-to-refresh-image").attr("src","img/misc/pull-to-refresh-arrow.png"),this.$pullDownEl.find(".pull-to-refresh-text").text(_t.folder_pulldowntorefresh),this.hideToolbar())},refreshScroller:function(){if(this.isEnabled_){if(this.refreshPending){var a;if(750>
(a=(new Date).getTime()-this.pullToRefreshStart)){setTimeout(this.refreshScroller,750-a);return}}this.pullToRefreshStart=null;this.refreshPending=!1;this.$toolsEl=this.$el.find("[data-tools]");if((this.hasTools=0<this.$toolsEl.length)&&"NONE"===this.toolsState)this.toolsState="HIDDEN";this.findOffsets();"HIDDEN"===this.toolsState||"RESTRICTED"===this.toolsState?this.iScroll.options.topOffset=this.offsets.topPage:"SHOWN"===this.toolsState&&(this.iScroll.options.topOffset=this.offsets.topTools);var b=
this.iScroll;setTimeout(function(){b.refresh()},0)}},hideToolbar:function(){"SHOWN"===this.toolsState&&(this.iScroll.options.topOffset=this.offsets.topPage,this.scrollToTop(250),this.toolsState="HIDDEN")},restrictToolbar:function(){"NONE"!==this.toolsState&&(this.hideToolbar(),this.toolsState="RESTRICTED")},unrestrictToolbar:function(){"RESTRICTED"===this.toolsState&&(this.toolsState="HIDDEN")},disablePullToRefresh:function(){this.pullToRefresh&&(this.pullToRefreshState="DISABLED",this.$pullDownEl.css({visibility:"hidden"}))},
enablePullToRefresh:function(){this.pullToRefresh&&(this.pullToRefreshState="PULL",this.$pullDownEl.css({visibility:"visible"}))},findOffsets:function(){this.offsets.topPage=this.offsets.topTools=this.scrollerTopOffset;this.pullToRefresh&&this.hasTools&&(this.offsets.topPage=this.scrollerTopOffset+52+this.$toolsEl.height(),this.offsets.topTools=this.scrollerTopOffset+52);this.pullToRefresh&&!this.hasTools&&(this.offsets.topPage=this.offsets.topTools=this.scrollerTopOffset+52)},createPullToRefreshElement:function(){var a=
g.$satisfy("div.pull-to-refresh img.pull-to-refresh-image[src=img/misc/pull-to-refresh-arrow.png] + span.pull-to-refresh-text");a.find("span").text(_t.folder_pulldowntorefresh);return a},createInfiniteScrollElement:function(){return f(g.createElement("div",{"class":"infinite-scroll-spinner"}))},scrollTo:function(a,b){requestAnimationFrame(_.bind(function(){this.iScroll.refresh();this.iScroll.scrollTo(a.x,-a.y,b||0)},this));return this},scrollToTop:function(a){this.scrollTo({x:0,y:this.iScroll.options.topOffset},
a||0);return this},scrollToBottom:function(a){if(this.iScroll.y<=this.iScroll.maxScrollY&&1<Math.abs(this.iScroll.maxScrollY))return this;this.scrollTo({x:0,y:-this.iScroll.maxScrollY},a||0);return this},scrollBy:function(a,b){this.scrollTo({x:0,y:Math.abs(this.iScroll.y)+a.y},b||0);return this},appendTo:function(){h._super.appendTo.apply(this,arguments);this.refreshScroller();return this},prependTo:function(){h._super.prependTo.apply(this,arguments);this.refreshScroller();return this}});h.PULL_TO_REFRESH_HEIGHT=
52})(Badoo,Zepto);Badoo=Badoo||{};
(function(a){var f=a.Utils.DOM,g={NONE:"NONE",TRANSPARENT:"TRANSPARENT",SOLID:"SOLID",HIGHLIGHTED:"HIGHLIGHTED"},a=a.Views.Header=a.View.extend({tagName:"header",className:"page-header",options:{title:"",displayType:g.TRANSPARENT},init:function(){this.render();return this},update:function(a){a=a||{};if("string"===typeof a.title){this.options.title=a.title;var c=_.escape(this.options.title);!0===a.animate?this.fadeHeader_(c):this.$("h1").html(c)}a.displayType&&(this.$el.removeClass(d).addClass(this.getDisplayTypeClass(a.displayType)),this.options.displayType=
a.displayType);return this},getDisplayTypeClass:function(a){return"display-"+a.toLowerCase()},fadeHeader_:function(a){var c=this.$("h1"),d=c.clone();c.before(d).addClass("off-screen").html(a);this.onTransitionEnd(d,function(){d.remove()});window.requestAnimationFrame(function(){d.addClass("fadeOut");c.removeClass("off-screen")})},render:function(){this.el.appendChild(f.createElement("h1",{"class":"page-title"},this.options.title));this.$el.addClass(this.getDisplayTypeClass(this.options.displayType));
return this}});a.DISPLAY_TYPE=g;var d=_.map(g,a.prototype.getDisplayTypeClass).join(" ")})(Badoo);Badoo=Badoo||{};
(function(a,f){var g=a.Utils.DOM,d=/pmb-([a-z\-]*)/,b=(a.Views.PageMenu=a.View.extend({className:"page-menu-view",tagName:"nav",buttons_:null,events:{"click .pmb":"handler"},init:function(){this.el.appendChild(this.ul=g.satisfy("ul"));this.buttons_=[];return this},update:function(a){a.buttons&&(this.buttons_=a.buttons,this.render());a.ownProfilePhoto&&this.$(".pmb-own-profile .pmb-link").css({"background-image":"url("+a.ownProfilePhoto+")"});a.backButtonText&&this.$(".pmb-back .pmb-link").html(a.backButtonText);
a.toggleEditButton&&this.toggleEditButton(this.$(".pmb-edit"));if(_.isNumber(a.notification)){var b=this.$(".pmb-matches"),e=b.find(".pmb-link-text");0===e.length&&(e=f(g.createElement("div",{className:"pmb-link-text",text:a.notification})),b.find(".pmb-link").prepend(e));0<a.notification?(b.hasClass("red")||(b.on(f.fx.animationEnd,_.bind(function(){b.off(f.fx.animationEnd);b.removeClass("animate")},this)),b.addClass("animate red")),e.html(a.notification)):(b.removeClass("red"),e.remove());b.position()}return this},
render:function(){var a=g.removeForEdit(this.ul);this.ul.innerHTML="";for(var b,e,d,f=0;f<this.buttons_.length;f++)b=this.buttons_[f],e=g.createElement("li",{className:"pmb pmb-"+b.name}),e.appendChild(d=g.satisfy("button.pmb-link.touchable")),b.text&&d.appendChild(g.createElement("div",{className:"pmb-link-text",text:b.text})),d.appendChild(g.satisfy("i.pmb-icon")),this.ul.appendChild(e);a();return this},handler:function(a,g){if(this.isEnabled_){var e=f(g),j,i;if((j=e.attr("class").match(d))&&j[1])if(j=
j[1],j=_.where(b,{name:j})[0])j===b.EDIT&&(i=this.toggleEditButton(e)),this.trigger("button-selected",{button:j,action:i,timestamp:a&&a.timeStamp?a.timeStamp:(new Date).getTime()})}},toggleEditButton:function(a){if(a.hasClass("active"))return a.removeClass("active"),a.find(".pmb-link").text(_t.cmd_edit),b.EDIT.actions.DONE;a.addClass("active");a.find(".pmb-link").text(_t.cmd_done);return b.EDIT.actions.EDIT}})).Buttons={BACK:{name:"back"},MENU:{name:"menu"},EDIT:{name:"edit",text:_t.cmd_edit,actions:{EDIT:"EDIT",
DONE:"DONE"}},PROFILE:{name:"profile",text:_t.profile_toolbar_Profile},PROFILE_INFO:{name:"profile-info"},DONE:{name:"done",text:_t.cmd_done},CANCEL:{name:"cancel",text:_t.cmd_cancel},MATCHES:{name:"matches",href:"matches"},SAVE:{name:"save",text:_t.cmd_save},OWN_PROFILE:{name:"own-profile",href:"own-profile"},TRASH_CAN:{name:"trash-can"},CHAT:{name:"chat"},SETTINGS:{name:"settings",href:"settings",text:_t.personal_info_personal_settings},MINIMIZE:{name:"minimize"},SET_AS_DEFAULT:{name:"set-as-default"},
ROTATE:{name:"rotate"}}})(Badoo,Zepto);Badoo=Badoo||{};
(function(a,f){var g=a.Utils.DOM;a.Views.ActionsFooter=a.View.extend({className:"actions-footer-view",rendered_:!1,shown_:!1,init:function(){},render:function(){if(this.rendered_)return this;var a=g.satisfy("ul.actions-footer-options"),b;for(b in this.options.buttons)if(this.options.buttons.hasOwnProperty(b)){var c=this.options.buttons[b],h=g.satisfy("li button.actions-footer-button");f(h).find("button").addClass(c.className).text(c.label||"???").on("click",_.compose(c.callback,this.optionSelected_));
a.appendChild(h)}this.el.innerHTML="";this.el.appendChild(a);this.rendered_=!0;return this},show:function(a){if(this.rendered_&&!(0<f("."+this.className).length))return this.appendTo(a),this.shown_=!0,this},hide:function(){this.$el.remove();this.shown_=!1;return this},toggle:function(a,b){this[(_.isNull(a)?!this.shown_:a)?"show":"hide"].call(this,b)},update:function(){},optionSelected_:function(a){this.toggle(a||!1)},getHeight:function(){return this.$el.height()}})})(Badoo,Zepto);Badoo=Badoo||{};
(function(a){var f=a.Views.EncountersCarousel=a.Views.PhotoCarousel.extend({className:"encounters-carousel photo-carousel-view carousel-wrapper on-screen",searchResult_:null,carouselHeight_:0,initStatusView:function(){var g=this.carouselOverlay_=a.Utils.DOM.satisfy("div.enc-overlay");this.$el.append(g);f._super.initStatusView.apply(this,arguments)},renderStatusView:function(){this.getChildView("status").update({count:4,klass:"enc-status"})},updateStatusPosition:function(a){this.getChildView("status").setPosition(a%
4)},update:function(a){_.isNumber(a.height)&&(this.carouselHeight_=a.height,this.carouselOverlay_.style.height=a.height+"px",this.getChildView("status").el.style.bottom=this.el.offsetHeight-a.height+"px",this.updateCarousel_());a.searchResult?this.render(a.searchResult):f._super.update.apply(this,arguments);return this},render:function(a){a?(this.searchResult_=a,this.updateCarousel_()):f._super.render.apply(this,arguments);return this},updateCarousel_:function(){if(this.searchResult_){for(var a=[],
d=this.searchResult_.extract("photos"),b,c=0;c<d.length;c++)b=d[c].getInfo(),a.push({url:d[c].getLargeUrl(),photoWidth:b.width,photoHeight:b.height,width:"100%",height:this.carouselHeight_,backgroundSize:"cover",backgroundPosition:"center top",noScale:!0});f._super.update.call(this,{slides:a})}},resetCarousel:function(){this.searchResult_=null;return f._super.reset.apply(this,arguments)}})})(Badoo);Badoo=Badoo||{};
(function(a){var f=a.Utils.DOM,g=a.Views.EncountersGallery=a.Views.ScrollingView.extend({className:"enc-gallery-view",imagesCache_:null,events:{"click .img":"onImageClick_"},init:function(){g._super.init.apply(this,arguments);this.imagesCache_=[]},update:function(a){a.images&&(this.images_=a.images);_.isNumber(a.index)&&(this.currentIndex_=a.index);a.animateFrom&&(this.animateFrom_=a.animateFrom);this.resize();a.animateFrom&&this.animate(!0)},render:function(){var b=f.removeForEdit(this.$el);this.$el.empty();
for(var c=0,d=this.images_.length;c<d;c++)this.imagesCache_[c]||(this.imagesCache_[c]=f.satisfy("div.img")),$(this.imagesCache_[c]).removeClass("active").addClass("loading").css({width:this.imageWidth_,height:this.imageHeight_,"background-image":""}),this.$el.append(this.imagesCache_[c]);a.Utils.Helpers.preloadImages(this.images_,this.onImageLoaded_);b();this.refreshScroller()},onImageLoaded_:function(a){var c=this.images_.indexOf(a);-1!==c&&$(this.imagesCache_[c]).css("background-image","url("+a+
")").removeClass("loading")},resize:function(){if(!this.imageWidth_){var a=this.$el.width();this.imageHeight_=this.imageWidth_=Math.floor(a/4);this.animateFrom_&&(a=this.animateFrom_.offset(),this.imageHeight_=Math.round(this.imageWidth_*a.height/a.width))}this.render()},onImageClick_:function(a){a=this.imagesCache_.indexOf(a.target);this.currentIndex_=a=-1===a?0:a;this.trigger(d.CLICK,a);this.animate(!1)},animate:function(a){var c=this.currentIndex_,d=(c%4+0.5)*this.imageWidth_,e=(Math.floor(c/4)+
0.5)*this.imageHeight_,f=d+"px "+e+"px",g=this.animateFrom_.offset(),l="translateZ(0) translateX("+(g.left+g.width/2-d)+"px) translateY("+(g.top+g.height/2-e-48)+"px) scale("+g.width/this.imageWidth_+")",o=this.getElement();a?(o.addClass("no-trans").removeClass("zooming-in").css({transform:l,"transform-origin":f}),setTimeout(function(){o.removeClass("no-trans").css({transform:""})},0)):($(this.imagesCache_[c]).addClass("active"),o.addClass("no-trans").css({transform:"","transform-origin":f}),setTimeout(function(){o.removeClass("no-trans").addClass("zooming-in").css({transform:l})},
0))}}),d=g.EVENTS={CLICK:"click"}})(Badoo);Badoo=Badoo||{};
(function(a,f){var g=a.Utils.DOM,d=a.Utils.Helpers,b=a.Views.EncountersCarousel,c=a.Views.EncountersGallery,h=function(a){return a?a.toString().replace(/\n/g,"<br />"):""},e=a.Views.Encounters=a.View.extend({id:"encounters-view",className:"main-page-view show-searching",encountersQueue_:[],currentState_:null,gameActive_:!1,gameLoaded_:!1,carousel_:null,person_:null,carouselHeight_:0,pendingVoteEvent_:null,backgroundImage_:null,fakeCarousel_:null,bottomView_:null,overallScore_:null,friendsCommon_:null,
interestsCommon_:null,events:{"click .enc-bottom":"onBottomViewClick_","click .encounters-try-again":"onTryAgain_"},init:function(){this.currentState_=i.SEARCHING;this.$el.append(g.renderTemplate("encounters",{friendsInCommonString:h(_t.encounters_friends_in_common),interestsString:h(_t.encounters_interests_in_common),overallScore:h(_t.encounters_overall_score)}));this.registerChildView("profile-info",new a.Views.ProfileInfo);this.initViews_();this.disableGame_();return this},update:function(a){if(a.state&&
this.currentState_!==a.state){var b=this.$el;switch(this.currentState_){case i.GALLERY:b.removeClass("has-gallery-view");this.galleryView_.getElement().removeClass("visible");break;case i.PROFILE:setTimeout(function(){b.removeClass("has-profile-view")},0);break;case i.NO_MORE:case i.SEARCHING:case i.OFFLINE:b.removeClass("show-searching offline no-more")}this.currentState_=a.state;switch(a.state){case i.GAME:this.onTransitionEnd(this.bottomView_,_.bind(function(){this.enableGame_();this.pendingVoteEvent_&&
(this.onBottomViewClick_(this.pendingVoteEvent_),this.pendingVoteEvent_=null)},this));break;case i.PROFILE:this.getChildView("profile-info").showLoading();setTimeout(function(){b.addClass("has-profile-view")},0);this.onTransitionEnd(this.bottomView_,this.enableGame_);break;case i.GALLERY:this.galleryView_.getElement().addClass("visible");this.galleryView_.update({images:this.encountersQueue_[0].getImages(),index:this.carousel_.getCurrentIndex(),animateFrom:this.fakeCarousel_});b.addClass("has-gallery-view");
this.enableGame_();break;case i.NO_MORE:this.disableGame_();b.addClass("show-searching no-more");break;case i.SEARCHING:this.disableGame_();b.addClass("show-searching");setTimeout(_.partial(this.trigger,j.TRY_AGAIN),2E3);break;case i.OFFLINE:this.disableGame_(),b.addClass("show-searching offline")}}a.profile?(this.getChildView("profile-info").hideLoading(),this.getChildView("profile-info").update({profile:a.profile})):null===a.profile&&this.getChildView("profile-info").reset();a.doProfileDemo&&a.profile&&
(this.disableGame_(),this.bottomView_.addClass("demo"),setTimeout(_.bind(function(){this.enableGame_();this.bottomView_.removeClass("demo")},this),1200));a.searchResults&&0<a.searchResults.length&&(this.encountersQueue_=a.searchResults,this.populateCarousel_());return this},enable:function(){e._super.enable.apply(this,arguments);a.UI.on("resize",this.resize)},disable:function(){e._super.disable.apply(this,arguments);a.UI.off("resize",this.resize)},reset:function(){this.currentState_=null;this.disableGame_();
this.gameLoaded_=!1;this.invalidateEncounters_();this.populateCarousel_();return this},initViews_:function(){var a=this.backgroundImage_=g.$satisfy("div.encounters-bg"),e=this.fakeCarousel_=g.$satisfy("div.fake-carousel.encounters-carousel"),d=this.galleryView_=(new c).enable();d.on(c.EVENTS.CLICK,this.onGalleryClick_);var f=this.carousel_=new b;f.on(b.EVENTS.CLICK,this.expandProfile_);f.on(b.EVENTS.IMAGE_LOADED,this.onSlideImageLoaded_);f.on(b.EVENTS.IMAGE_LOAD_ERROR,this.onSlideImageError_);f.on(b.EVENTS.STATUS_CLICK,
this.onStatusClick_);this.bottomView_=this.$(".enc-bottom");this.overallScore_=this.$(".overall i");this.friendsCommon_=this.$(".friends i");this.interestsCommon_=this.$(".interests i");this.$el.prepend(a,e,f.el,d.getElement());this.bottomView_.append(this.getChildView("profile-info").getElement());this.bottomView_.on("swipeUp",this.expandProfile_);this.bottomView_.on("swipeDown",this.minimizeProfile_);return this},disableGame_:function(){this.carousel_&&this.carousel_.disable();this.gameActive_=
!1;this.$(".encounters-button").removeClass("touchable")},enableGame_:function(){this.carousel_&&this.carousel_.enable();this.gameActive_=!0;this.$(".encounters-button").addClass("touchable")},goToGame_:function(a){var b=this.currentState_;(a||!(b===i.SEARCHING||b===i.NO_MORE||b===i.OFFLINE))&&this.update({state:i.GAME})},onBottomViewClick_:function(a){if(this.gameActive_){var b=f(a.target),e=b.closest(".encounters-button");0<e.length?this.currentState_===i.PROFILE?(this.pendingVoteEvent_=a,this.goToGame_()):
(this.trigger(j.VOTE_START,{timestamp:a&&a.timeStamp?a.timeStamp:(new Date).getTime()}),this.disableGame_(),a=this.carousel_.getCurrentSlide(),this.fakeCarousel_.css({"background-image":"url("+a.url+")","background-size":a.backgroundSize}).removeClass("invisible"),this.carousel_.$el.removeClass("on-screen"),this.fakeCarousel_.addClass("indent"),this.onTransitionEnd(this.fakeCarousel_,this.onFakeCarouselAnimated_),a=this.encountersQueue_.shift(),a.voteType=e.hasClass("encounters-button-no")?j.VOTE_NO:
j.VOTE_YES,this.populateCarousel_(),this.trigger(j.VOTE,a)):this.currentState_===i.PROFILE&&0===b.closest("#scroller-profile-info-view").length&&this.minimizeProfile_()}},onFakeCarouselAnimated_:function(){this.carousel_.$el.addClass("on-screen");this.onTransitionEnd(this.carousel_.$el,this.onCarouselOnScreen_)},onCarouselOnScreen_:function(){this.trigger(j.VOTE_END);this.fakeCarousel_.removeClass("indent").addClass("invisible");this.enableGame_()},allowVote_:function(){this.fakeCarousel_.hide();
this.enableGame_()},expandProfile_:function(a){if(!a||!("swipeUp"===a.type&&0<f(a.target).closest(this.getChildView("profile-info").el).length))this.disableGame_(),this.trigger(j.VIEW_PROFILE)},minimizeProfile_:function(a){if(!a||!("swipeDown"===a.type&&0<f(a.target).closest(this.getChildView("profile-info").el).length))this.disableGame_(),this.trigger(j.MINIMIZE)},invalidateEncounters_:function(){this.encountersQueue_.length=0;this.person_=null;this.carousel_.resetCarousel();this.backgroundImage_.css("background-image",
"")},updateStatCount_:function(a,b){a.text(b);0===parseInt(b,10)?a.parent().css("opacity","0.5"):a.parent().css("opacity",null)},populateCarousel_:function(){if(0<this.encountersQueue_.length){var a=this.encountersQueue_[0];this.person_!==a&&(this.preloadEncountersImages_(),this.person_=a,this.carousel_.update({searchResult:a}),this.updateStatCount_(this.overallScore_,(parseInt(a.extract("profileRating"),10)/100).toFixed(1)),this.updateStatCount_(this.friendsCommon_,a.extract("friendsInCommon")),
this.updateStatCount_(this.interestsCommon_,a.getAmountInterestInCommon()),this.backgroundImage_.css("background-image","url("+a.getLargeImage()+")"),this.trigger(j.NEW_ENCOUNTER,this.person_));this.goToGame_(!0)}else this.invalidateEncounters_(),this.update({state:i.SEARCHING})},onGalleryClick_:function(a){this.carousel_.update({index:a});this.onTransitionEnd(this.galleryView_.getElement(),this.goToGame_)},onStatusClick_:function(){this.currentState_===i.GALLERY?this.goToGame_():this.update({state:i.GALLERY})},
onSlideImageLoaded_:function(a){a.url===this.person_.getLargeImage()&&(this.gameLoaded_||(this.gameLoaded_=!0,this.goToGame_()),this.trigger(j.CURRENT_IMAGE_LOADED))},onSlideImageError_:function(a){a.url===this.person_.getLargeImage()&&(this.carousel_.resetCarousel(),this.person_=null,a=this.encountersQueue_.shift(),this.populateCarousel_(),this.trigger(b.ACTIONS.IMAGE_LOAD_ERROR,a))},updateLayout_:function(){var b=a.UI.getScreenDimensions(),e=b.width,b=b.height-48,c=this.$(".enc-user-stats"),d=this.$(".encounters-buttons");
this.$el.css("height",b);var f=Math.min(1,b/480)+"em";c.css("font-size",f);d.css("font-size",f);c=c.height();d=Math.floor(c+d.height())-1;f=this.carouselHeight_=Math.min(e,b-d);this.bottomView_.css({height:b,top:-d});this.getChildView("profile-info").getElement().css("height",Math.ceil(0.8*b+1));this.galleryView_.getElement().css("height",f+c);this.fakeCarousel_.css({height:f});this.$el.css({perspective:e,"perspective-origin-y":f/2});this.carousel_.update({height:this.carouselHeight_})},resize:function(){a.UI.isLandscape()||
this.updateLayout_()},onTryAgain_:function(){this.update({state:i.SEARCHING})},preloadEncountersImages_:function(){for(var a=0,b=Math.min(3,this.encountersQueue_.length);a<b;a++)d.preloadImage(this.encountersQueue_[a].getLargeImage())},getCurrentEncounter:function(){return this.person_}}),j=e.ACTIONS={VOTE_START:"voteStart",VOTE:"vote",VOTE_END:"voteEnd",VOTE_YES:"voteYes",VOTE_NO:"voteNo",TRY_AGAIN:"tryAgain",CURRENT_IMAGE_LOADED:"CURRENT_IMAGE_LOADED",NEW_ENCOUNTER:"NEW_ENCOUNTER",VIEW_PROFILE:"VIEW_PROFILE",
MINIMIZE:"MINIMIZE"},i=e.STATES={GAME:1,PROFILE:2,GALLERY:3,SEARCHING:4,NO_MORE:5,OFFLINE:6}})(Badoo,Zepto);Badoo=Badoo||{};
(function(a,f){var g=a.Utils.DOM,d=a.Views.ScrollingView,b=f.fx.animationEnd,c=function(){};c.prototype={id:null,el:null,name:null,nameInner:null,image:null,notification:null,connections:null,friendsInCommon:null,interestsInCommon:null,displayMessage:null,onlineIndicator:null};var h=a.Views.Matches=d.extend({id:"matches-view",className:"main-page-view",pullToRefresh:!0,infiniteScroll:!0,lastSearchTerm_:"",searchTimeout_:null,currentDeletableItem_:null,deleteButton_:null,touchData_:null,list_:null,
filter_:null,inSearch_:!1,items_:null,selectedItems_:null,messages_:null,currentlyRendered_:0,isEditing_:!1,events:{"click .matches-filter-options li":"onFilterChange_","click #matches-search-cancel":"searchCancel_","click .inbox-item-delete-confirm":"selectToggle_","touchstart .inbox-list":"onTouchStart_","touchmove .inbox-list":"onTouchMove_","touchend .inbox-list":"onTouchEnd_","click .new-notification":"triggerPullToRefresh"},init:function(){h._super.init.apply(this,arguments);this.messages_=
[];this.touchData_={startX:0,startY:0,canCauseAction:!1,didMove:!1,trackingMovement:!1};this.deleteButton_=g.createElement("span",{className:"delete-option",text:_t.cmd_delete});this.items_=[];this.selectedItems_=[];this.render()},render:function(){var a=g.renderTemplate("matches-view");this.filter_=a.filter(".matches-filter");this.filterOptions_=this.filter_.find(".matches-filter-options");this.list_=a.filter(".inbox-list");this.searchForm_=this.filter_.find("#matches-search-form");this.searchForm_.on("submit",
this.preventDefault);this.searchForm_.find("#matches-search-input").on("keyup",this.onSearchChange_).on("focus",this.onSearchFocus_).on("blur",this.onSearchBlur_);this.$el.append(a)},update:function(a){a=a||{};_.isArray(a.items)&&(a.infiniteScroll=!this.searchForm_[0].parentNode&&a.items.length!==this.currentlyRendered_,this.messages_=a.items,this.updateList_(_.first(this.messages_,this.currentlyRendered_+15)));!0===a.noMoreItems&&(a.infiniteScroll=!1);a.state===h.STATES.EDIT&&!this.currentDeletableItem_&&
(this.list_.addClass("edit-mode"),this.restrictToolbar(),this.disablePullToRefresh());a.state===h.STATES.DEFAULT&&(this.list_.removeClass("edit-mode").find(".inbox-item"),this.removeDeleteButton_(),this.currentDeletableItem_=null,this.enableScroller(),this.unrestrictToolbar(),this.enablePullToRefresh(),this.selectedItems_=[]);this.setEditingState_(a.state===h.STATES.EDIT&&!this.currentDeletableItem_);a.filter&&this.updateFilter(a.filter);if(_.isBoolean(a.actionsFooterVisible))this.onActionsFooterToggle(a.actionsFooterVisible,
a.actionsFooterHeight);!0===a.multipleItemsDeleted&&this.animateDeleteItems_();a.showNewNotification&&this.showNewNotification_();return h._super.update.apply(this,arguments)},setEditingState_:function(a){this.isEditing_=a},disable:function(){this.currentlyRendered_=0;return h._super.disable.apply(this,arguments)},getSelectedItems:function(){return _.chain(this.selectedItems_).compact().uniq().value()||[]},updateList_:function(a){this.currentlyRendered_=a.length;this.list_.css("height",87*a.length+
"px");this.refreshScroller();this.renderList_()},emptyList_:function(){for(var a=this.currentlyRendered_=0;a<this.items_.length;a++)this.items_[a].el.display="none";this.list_.css("height","0px");this.refreshScroller()},createListItems_:function(){var b=a.UI.getScreenDimensions().height-48,b=Math.min(2*Math.ceil(b/87),this.currentlyRendered_);if(this.items_.length!==b)if(this.items_.length>b)for(;this.items_.length>b;)f(this.items_.pop().el).remove();else for(var c;this.items_.length<b;)c=this.createItem_(),
this.list_[0].appendChild(c.el),this.items_.push(c)},createItem_:function(){var a=new c;a.el=g.satisfy("li.inbox-item span.inbox-item-delete-wrap i.inbox-item-delete-confirm");a.el.appendChild(a.contactHead=g.satisfy("span.inbox-item-contact"));a.contactHead.appendChild(a.image=g.satisfy("span.inbox-item-image"));a.contactHead.appendChild(a.notification=g.satisfy("p.inbox-item-notification"));a.el.appendChild(a.name=g.satisfy("p.inbox-item-name"));a.name.appendChild(a.nameInner=g.satisfy("span.inbox-item-name-inner"));
a.name.appendChild(a.onlineIndicator=g.satisfy("span.inbox-item-online"));a.el.appendChild(a.displayMessage=g.satisfy("p.inbox-item-display-message"));return a},renderList_:function(){this.createListItems_();for(var a=Math.max(Math.abs(this.iScroll.y)-d.PULL_TO_REFRESH_HEIGHT-96,0),b=this.items_.length,c=this.messages_.length,f=0,a=Math.floor(a/87);f<b&&a<c;)this.updateItem_(this.items_[f],this.messages_[a],a),f++,a++;for(;f<b;)this.updateItem_(this.items_[f],null,null),f++},updateItem_:function(a,
b,c){if(a){if(b)return a.id=b.id,a.el.className="inbox-item "+b.type,a.el.setAttribute("data-id",b.id),a.el.id="inbox-item-"+b.id,a.el.style.display="block",a.el.style.top=87*c+"px",a.image.style.backgroundImage="url("+b.image+")",a.nameInner.innerHTML=g.escapeHtml(b.name),a.notification.className="inbox-item-notification",a.notification.textContent=b.unreadMessages,a.onlineIndicator.style.display="OFFLINE"!==b.onlineStatus?"inline-block":"none",a.displayMessage.innerHTML=g.escapeHtml(b.displayMessage),
c=a.el.getElementsByClassName("inbox-item-delete-confirm")[0],c.className=0<=this.selectedItems_.indexOf(b.id)?c.className+" checked":"inbox-item-delete-confirm",a;a.el.style.display="none";a.id=null;a.el.setAttribute("data-id",null)}},itemSelect_:function(a,b){a.addClass("selected");this.trigger(h.EVENTS.ITEM_SELECTED,{id:a.data("id"),name:a.find(".inbox-item-name").text(),timestamp:b&&b.timeStamp?b.timeStamp:(new Date).getTime()})},selectToggle_:function(a){var a=f(a.target).closest("i"),b=a.closest(".inbox-item").data("id").toString();
a.toggleClass("checked");a.hasClass("checked")?this.selectedItems_.push(b):this.selectedItems_[this.selectedItems_.indexOf(b)]=null},onFilterChange_:function(a,b){b=f(b);if(!b.hasClass("active")){var c=b.data("type");_.has(h.FILTERS,c)&&(this.currentlyRendered_=0,this.trigger(h.EVENTS.FILTER_CHANGE,{filter:c}))}},updateFilter:function(a){this.filterOptions_.find("li").removeClass("active").filter(".matches-filter-"+a.toLowerCase()).addClass("active").parent().removeClass("all-active conversations-active search-active").addClass(a.toLowerCase()+
"-active");this.filter_.append(this.filterOptions_)},searchCancel_:function(a){a.preventDefault();this.$el.find("#matches-search-input").val("").trigger("keyup").blur()},onSearchChange_:function(a){a=f(a.target).val();a!==this.lastSearchTerm_&&(this.$el.find("#matches-search-cancel").toggleClass("visible",""!==a),this.searchTimeout_&&clearTimeout(this.searchTimeout_),this.lastSearchTerm_=a,_.bind(function(a){this.searchTimeout_=setTimeout(_.bind(function(){this.trigger(h.EVENTS.SEARCH_SUBMIT,{search:a})},
this),250)},this)(a))},onSearchFocus_:function(){this.inSearch_=!0;this.updateFilter(h.FILTERS.ALL)},onSearchBlur_:function(){this.inSearch_=!1},deleteItem_:function(a){var c=_.bind(function(){a[0].removeEventListener(b,c,!1);a.removeClass("deleted has-delete-button").remove();f(this.deleteButton_).remove();var d=a.get(0).getAttribute("data-id"),g=_.findWhere(this.items_,{id:d});this.items_=_.filter(this.items_,function(a){return a.id!==d});this.items_.push(g);this.list_.get(0).appendChild(g.el);
this.messages_=_.filter(this.messages_,function(a){return a.id!==d});this.currentlyRendered_--;this.list_.addClass("in-delete-animation");this.updateList_(_.first(this.messages_,this.currentlyRendered_));setTimeout(_.bind(function(){this.list_.removeClass("in-delete-animation");this.enableScroller()},this),250);this.trigger(h.EVENTS.ITEM_DELETE,{id:d})},this);a[0].addEventListener(b,c,!1);requestAnimationFrame(function(){a.addClass("deleted")})},animateDeleteItems_:function(){var a=100,c=0,d=[],g=
this.getSelectedItems();this.selectedItems_=[];f(this.deleteButton_).remove();var h=_.bind(function(a){c-=1;f(a.target).remove().removeClass("multi-deleted").css({"animation-delay":null});0>=c&&(this.list_.addClass("in-delete-animation"),this.items_=_.filter(this.items_,_.bind(function(a){return-1===g.indexOf(a.id)},this)),this.items_.push.apply(this.items_,d),_.each(d,function(a){this.list_.get(0).appendChild(a.el)},this),this.messages_=_.filter(this.messages_,function(a){return-1===g.indexOf(a.id)},
this),this.currentlyRendered_-=g.length,this.updateList_(_.first(this.messages_,this.currentlyRendered_)),setTimeout(_.bind(function(){this.list_.removeClass("in-delete-animation");this.enableScroller()},this),250))},this);_.each(g,function(g){if(g=_.findWhere(this.items_,{id:g}))c++,g.el.addEventListener(b,h,!1),f(g.el).css({"animation-delay":a+"ms"}).addClass("multi-deleted"),a+=50,d.push(g)},this);0===c&&h()},showDeleteButton_:function(a){a.removeClass("has-delete-button").append(this.deleteButton_);
requestAnimationFrame(function(){a.addClass("has-delete-button")})},removeDeleteButton_:function(a){if(this.deleteButton_.parentNode){var a=a||f(this.deleteButton_.parentNode),b=this.deleteButton_,c=function(){b.removeEventListener(f.fx.transitionEnd,c,!1);b.parentNode.removeChild(b)};a.hasClass("has-delete-button")?(b.addEventListener(f.fx.transitionEnd,c,!1),a.removeClass("has-delete-button")):c()}},showNewNotification_:function(){var a=f(".new-notification");0!==a.length&&a.remove();a=f(g.createElement("strong",
{"class":"new-notification"},_t.see_new_messages));this.getElement().append(a);requestAnimationFrame(function(){a.addClass("show")})},removeNewNotification_:function(){var a=f(".new-notification");0===a.length||a.hasClass("show")?a.remove():(a.on(f.fx.transitionEnd,_.bind(a.remove,a)),a.removeClass("show"))},onScrollBottom:function(){this.messages_.length>this.currentlyRendered_?(this.updateList_(_.first(this.messages_,this.currentlyRendered_+15)),this.refreshScroller()):h._super.onScrollBottom.apply(this,
arguments)},onScrollEnd:function(){this.renderList_();h._super.onScrollEnd.apply(this,arguments)},onPullToRefresh:function(){this.currentlyRendered_=0;this.removeNewNotification_();h._super.onPullToRefresh.apply(this,arguments)},onTouchStart_:function(a){var b=f.os.supportsTouch?a.touches[0]:a;this.touchData_.startX=b.pageX;this.touchData_.startY=b.pageY;b=f(a.target).closest(".inbox-item");0!==b.length&&(a=1===f(a.target).closest(".delete-option").length,b.hasClass("empty")||(this.currentDeletableItem_&&
(b.get(0)!==this.currentDeletableItem_.get(0)||!a)?(this.removeDeleteButton_(this.currentDeletableItem_),this.currentDeletableItem_=null,this.list_.hasClass("edit-mode")||this.trigger(h.EVENTS.ITEM_DELETE_DISABLE)):(this.touchData_.canCauseAction=!0,this.touchData_.trackingMovement=!0)))},onTouchMove_:function(a){if(this.touchData_.trackingMovement){var b=f.os.supportsTouch?a.touches[0]:a;this.touchData_.didMove=!0;5<Math.abs(this.touchData_.startY-b.pageY)?this.touchData_.trackingMovement=!1:!this.list_.hasClass("edit-mode")&&
10<this.touchData_.startX-b.pageX&&(this.touchData_.trackingMovement=!1,this.currentDeletableItem_=f(a.target).closest(".inbox-item"),0===this.currentDeletableItem_.length?this.currentDeletableItem_=null:(this.showDeleteButton_(this.currentDeletableItem_),this.disableScroller(),this.trigger(h.EVENTS.ITEM_DELETE_ENABLE)))}},onTouchEnd_:function(a){this.currentDeletableItem_||this.enableScroller();if(this.touchData_.canCauseAction&&!this.touchData_.didMove){var b=f(a.target),c=b.closest(".inbox-item"),
d=1===b.closest(".inbox-item-delete-wrap").length,b=1===b.closest(".delete-option").length;if(0===c.length){this.resetTouchData_();return}d?(this.currentDeletableItem_=c,this.showDeleteButton_(c),this.disableScroller()):b?(this.currentDeletableItem_=null,this.deleteItem_(c),this.list_.hasClass("edit-mode")||this.trigger(h.EVENTS.ITEM_DELETE_DISABLE)):this.list_.hasClass("edit-mode")||this.itemSelect_(c,a)}this.resetTouchData_()},onActionsFooterToggle:function(a,b){if(a){var c=this.$wrapper.offset();
this.$wrapper.css({height:"auto",position:"absolute",top:c.top,left:0,right:0,bottom:b}).addClass("has-footer-visible")}else this.$wrapper.css({height:null,position:null,top:null,left:null,right:null,bottom:null}).removeClass("has-footer-visible");this.iScroll.refresh()},resetTouchData_:function(){this.touchData_.didMove=!1;this.touchData_.canCauseAction=!1;this.touchData_.trackingMovement=!1;this.touchData_.startX=0;this.touchData_.startY=0}});h.STATES={DEFAULT:"DEFAULT",EDIT:"EDIT"};h.EVENTS={ITEM_DELETE:"item-delete",
ITEM_DELETE_ENABLE:"item-delete-enable",ITEM_DELETE_DISABLE:"item-delete-disable",FILTER_CHANGE:"filter-change",SEARCH_SUBMIT:"search-submit",ITEM_SELECTED:"item-selected",MULTI_ITEM_DELETE:"multi-item-delete"};h.FILTERS={ALL:"ALL",CONVERSATIONS:"CONVERSATIONS",SEARCH:"SEARCH",UNREAD:"UNREAD"}})(Badoo,Zepto);Badoo=Badoo||{};
(function(a){var f=a.Utils.DOM,g=(a.Views.ForgotPassword=a.View.extend({id:"forgot-password-page",input_:null,loadingSpinner_:null,error_:null,events:{"click button":"onButtonClick_"},init:function(){this.$el.html(f.renderTemplate("forgot-password-page"));var d=this.$el.find("#contact-details-container"),b=this.registerChildView("input",new a.Views.List);b.update([{"class":"form",items:[{content:[f.createElement("input",{type:"text",placeholder:_t.wap_signin_email_or_mobile}),f.createElement("span",
{className:"error hidden"})]}]}]);b.appendTo(d);this.loadingSpinner_=this.$el.find("#loading-spinner");this.input_=this.$el.find("input");this.$el.find(".error").html(_t.wap_pwd_req_failed)},update:function(a){a&&(!0===a.reset&&this.input_.val(""),_.isBoolean(a.error)&&(this.error_=a.error),this.render())},render:function(){this.loadingSpinner_.addClass("hidden");this.error_?this.$el.find(".error").removeClass("hidden"):this.$el.find(".error").addClass("hidden")},onButtonClick_:function(){this.error_=
!1;this.loadingSpinner_.removeClass("hidden");this.trigger(g.GET_PASSWORD,{contact:this.input_.val()})}})).ACTIONS={GET_PASSWORD:"GET_PASSWORD"}})(Badoo);Badoo=Badoo||{};
(function(a){var f=a.Utils.DOM,g=(a.Views.NewPassword=a.View.extend({id:"new-password-page",loadingSpinner_:null,passwordInput_:null,confirmPasswordInput_:null,passwordError_:null,confirmPasswordError_:null,passwordErrorMessage_:null,confirmPasswordErrorMessage_:null,events:{"click button":"onButtonClick_"},init:function(){this.$el.html(f.renderTemplate("new-password-page"));var d=this.$el.find("#contact-details-container");this.registerChildView("input",new a.Views.List);this.getChildView("input").update([{"class":"form",
items:[{content:[f.createElement("input",{id:"password",type:"password",placeholder:_t.reset_password_type_password}),f.createElement("span",{id:"password-error",className:"error hidden"})]},{content:[f.createElement("input",{id:"confirm-password",type:"password",placeholder:_t.reset_password_retype_password}),f.createElement("span",{id:"confirm-password-error",className:"error hidden"})]}]}]);this.getChildView("input").appendTo(d);this.loadingSpinner_=this.$el.find("#loading-spinner");this.passwordInput_=
this.$el.find("#password");this.confirmPasswordInput_=this.$el.find("#confirm-password");this.passwordError_=this.$el.find("#password-error");this.confirmPasswordError_=this.$el.find("#confirm-password-error")},update:function(a){a&&(!0===a.reset&&(this.confirmPasswordErrorMessage_=this.passwordErrorMessage_=null),_.isString(a.error)&&(this.passwordErrorMessage_=a.error),this.render())},render:function(){this.loadingSpinner_.addClass("hidden");this.passwordErrorMessage_&&this.passwordError_.html(this.passwordErrorMessage_).removeClass("hidden");
this.confirmPasswordErrorMessage_&&this.confirmPasswordError_.html(this.confirmPasswordErrorMessage_).removeClass("hidden")},isFormValid_:function(){this.passwordError_.addClass("hidden");this.confirmPasswordError_.addClass("hidden");this.loadingSpinner_.removeClass("hidden");this.confirmPasswordErrorMessage_=this.passwordErrorMessage_=null;var a=this.passwordInput_.val(),b=this.confirmPasswordInput_.val();return!a?(this.passwordErrorMessage_=_t.reset_password_error_empty,!1):!b?(this.confirmPasswordErrorMessage_=
_t.reset_password_error_retype,!1):a!==b?(this.confirmPasswordErrorMessage_=_t.reset_password_error_match,!1):!0},onButtonClick_:function(){this.isFormValid_()?(this.loadingSpinner_.removeClass("hidden"),this.trigger(g.SET_PASSWORD,{password:this.passwordInput_.val()})):this.render()}})).ACTIONS={SET_PASSWORD:"SET_PASSWORD"}})(Badoo);Badoo=Badoo||{};
(function(a,f){var g=a.Utils.DOM;a.Views.TrustedConnections=a.View.extend({className:"trusted-connections-view",events:{"click .friend-connection":"onFriendConnectionClick_"},hidingTimer_:null,onFriendConnectionClick_:function(a){var b=f(a.target);clearTimeout(this.hidingTimer_);this.$el.find(".active").removeClass("active");b.addClass("active").parent().addClass("active");this.hidingTimer_=setTimeout(function(){b.removeClass("active").parent().removeClass("active")},2E3)},update:function(d){if(!a.Proto.Object.isProtoObject(d.connections))return this;
var b=g.removeForEdit(this.el),c=this.$el;c.empty();_.each(d.connections.extract("connections"),function(b){var e=b.extract("firstConnectionProviderUrl");c.append(g.renderTemplate("friend-connections",{firstConnectionProviders:e,friends:_.map(b.extract("friends"),function(b){return{photo:a.Utils.Helpers.parseUrls(b.extract("photoUrl")),name:b.extract("name")}})}))});b();return this}})})(Badoo,Zepto);Badoo=Badoo||{};
(function(a){var f=a.Utils.DOM,g=a.Views.Profile=a.View.extend({id:"profile-view",className:"main-page-view",carouselMaximised_:!1,isOwnProfile_:!1,canUploadPhotos_:!1,photoCount_:null,events:{"click .carousel-wrapper":"onCarouselClick_","click .add-photos-overlay":"onAddPhotosClick_"},init:function(){this.registerChildView("profile-info",new a.Views.ProfileInfo);this.getChildView("profile-info").on("edit-filter",_.bind(function(){this.trigger("edit-filter")},this));this.getChildView("profile-info").on("edit-location",
_.bind(function(){this.trigger("edit-location")},this));this.getChildView("profile-info").on("edit-profile",_.bind(function(){this.trigger("edit-profile")},this));this.getChildView("profile-info").on("navigate-encounters",_.bind(function(){this.trigger("navigate-encounters")},this));var b=this.registerChildView("carousel",new a.Views.PhotoCarousel);b.on(a.Views.PhotoCarousel.EVENTS.MOVE_START,this.onCarouselMoveStart_);b.on(a.Views.PhotoCarousel.EVENTS.MOVE_END,this.onCarouselMoveEnd_)},update:function(a){_.isBoolean(a.isOwnProfile)&&
(this.isOwnProfile_=a.isOwnProfile);if(_.isBoolean(a.toggleFullscreen))this.onCarouselClick_();else _.isBoolean(a.deleteCurrentPhoto)?(a=this.getPhotoFromCarousel_())&&this.trigger(d.DELETE_PHOTO,{photo:a}):_.isBoolean(a.setAsDefault)?(a=this.getPhotoFromCarousel_())&&this.trigger(d.SET_AS_DEFAULT,{photo:a}):_.isBoolean(a.rotate)?(a=this.getPhotoFromCarousel_())&&this.trigger(d.ROTATE,{photo:a}):this.render(a)},getPhotoFromCarousel_:function(){var a=this.getChildView("carousel").getCurrentPhoto();
return!a?null:a},refresh:function(){this.getChildView("profile-info").refreshScroller()},render:function(b){var c=f.removeForEdit(this.el);this.$el.empty();this.canUploadPhotos_=!!this.isOwnProfile_;this.renderCarousel_(b.album);this.getChildView("profile-info").update({profile:b.profile,isOwnProfile:this.isOwnProfile_,animateIn:!0});this.getChildView("profile-info").getElement().css("height",a.UI.getScreenDimensions().height/2+"px");this.getChildView("carousel").appendTo(this.el);this.$el.append(f.createElement("p",
{"class":"person-name"},b.profile.extract("person.name")+", "+b.profile.extract("person.age")));this.$el.append(f.createElement("p",{"class":"person-photos-count"},b.album.getLargePhotos().length+""));this.getChildView("profile-info").appendTo(this.$el);this.canUploadPhotos_&&(b=f.$satisfy("div.add-photos-overlay div.add-photo-text"),b.find(".add-photo-text").text(_t.gallery_import_title),this.$el.append(b).addClass("has-add-photos-overlay"));c()},onAddPhotosClick_:function(a){a.stopPropagation();
this.trigger(g.ACTIONS.ADD_PHOTOS)},renderCarousel_:function(a){this.carouselMaximised_=!1;this.photoCount_=a.getLargePhotos().length;var c=a.extract("photoSize"),a=_.map(a.getLargePhotos(),function(a,b){return{url:a,photoWidth:c[b].extract("width"),photoHeight:c[b].extract("height")}});this.getChildView("carousel").update({slides:a})},onCarouselClick_:function(){0!==this.photoCount_&&(this.carouselMaximised_?(this.getChildView("profile-info").update({animateIn:!0}),this.canUploadPhotos_&&0===this.getChildView("carousel").getCurrentIndex()&&
this.$el.addClass("has-add-photos-overlay")):(this.getChildView("profile-info").update({animateOut:!0}),this.canUploadPhotos_&&this.$el.removeClass("has-add-photos-overlay")),this.getChildView("carousel").update({state:this.carouselMaximised_?a.Views.PhotoCarousel.STATES.DEFAULT:a.Views.PhotoCarousel.STATES.FULLSCREEN}),this.carouselMaximised_=!this.carouselMaximised_,this.trigger(this.carouselMaximised_?g.ACTIONS.MAXIMISED:g.ACTIONS.MINIMISED))},onCarouselMoveStart_:function(){this.canUploadPhotos_&&
this.$el.removeClass("has-add-photos-overlay")},onCarouselMoveEnd_:function(){this.canUploadPhotos_&&(!this.carouselMaximised_&&0===this.getChildView("carousel").getCurrentIndex())&&this.$el.addClass("has-add-photos-overlay")}}),d=g.ACTIONS={ADD_PHOTOS:"ADD_PHOTOS",MAXIMISED:"MAXIMISED",MINIMISED:"MINIMISED",DELETE_PHOTO:"DELETE_PHOTO",SET_AS_DEFAULT:"SET_AS_DEFAULT",ROTATE:"ROTATE"}})(Badoo,Zepto);Badoo=Badoo||{};
(function(a,f){var g="score connections location interests aboutme_text languages".split(" "),d=["location","aboutme_text"],b=a.Utils.DOM,c=a.Views.ProfileInfo=a.Views.ScrollingView.extend({id:"profile-info-view",isOwnProfile_:!1,profile_:null,events:{"click .settings-filter":"loadFilterPage_","click .profile-list-edit-location":"loadLocationEditPage_","click .profile-list-edit-aboutme_text":"loadEditProfilePage_","click .profile-list-edit-languages":"loadEditProfilePage_","click .profile-details-item-score":"onClickScore_"},
init:function(){c._super.init.apply(this,arguments);this.registerChildView("profile-items",new a.Views.ProfileList);this.registerChildView("trusted-connections",new a.Views.TrustedConnections);var b=this.registerChildView("interests",new a.Views.Interests);b.on(a.Views.Interests.ACTIONS.CLICK,this.onInterestsClick_);b.on(a.Views.Interests.ACTIONS.TOGGLE_CHANGE,this.refreshScroller);this.registerChildView("score-display",new a.Views.ScoreDisplayView({size:45,lineWidth:5,score:5,gradientImage:"/img/profile/rating-gradient.png",
barAnimation:a.Views.ScoreDisplayView.ANIMATION_TIMINGS.EXPONENTIAL,scoreIncrement:a.Views.ScoreDisplayView.ANIMATION_TIMINGS.EXPONENTIAL}))},enable:function(){c._super.enable.apply(this,arguments);this.refreshScroller();a.UI.on("resize",this.refreshScroller)},disable:function(){c._super.disable.apply(this,arguments);a.UI.off("resize",this.refreshScroller)},update:function(a){var b=this.$el.parent();_.isBoolean(a.isOwnProfile)&&(this.isOwnProfile_=a.isOwnProfile);this.getChildView("score-display").update({animationLength:this.isOwnProfile_?
2E3:0});a.profile&&(this.profile_=a.profile,this.render());a.animateIn&&requestAnimationFrame(function(){b.addClass("bounce-up")});a.animateOut&&requestAnimationFrame(_.bind(function(){f.os.supportsTransitions?(b.on(f.fx.animationEnd,this.onAnimateOut_),b.addClass("bounce-down")):(b.addClass("bounce-down"),this.onAnimateOut_())},this));this.refreshScroller();c._super.update.apply(this,arguments)},onAnimateOut_:function(){this.$el.parent().off(f.fx.animationEnd);this.$el.parent().removeClass("bounce-up bounce-down")},
reset:function(){this.$el.html("")},render:function(){var a=b.removeForEdit(this.el);this.reset();var c=this.getChildView("profile-items"),d=this.profile_.extract("profile"),f=this.getProfileOptionsData_(d.extract("profileOptions")),l=d.extract("profileRating");l&&(f.score=this.getScoreSection_(l.extract("description")));f.connections=this.getTrustedNetworkSection_(d.extract("friendsConnections"));f.interests=this.getInterestsSection_(this.profile_.getInterests(),d.extract("commonInterestMessage"));
var o=f.aboutme_text;o&&(0===o.items[0].length?o.items[0]=d.extract("ageMessage"):o.items.push(d.extract("ageMessage")));this.getChildView("profile-items").update({isOwnProfile:this.isOwnProfile_,sections:f,order:g});this.$el.append(c.el);a();l&&(this.getChildView("score-display").update({score:l.extract("profileRating")/100,parentElement:this.$el.find("#hotness-rating-roundel")}),this.getChildView("score-display").render(),this.isOwnProfile_&&this.getChildView("score-display").beginAnimation());
this.scrollToTop()},getProfileOptionsData_:function(a){if(!a)return null;for(var b={},c,d=0;d<a.length;d++){var f=a[d],o=f.extract("id");if(-1!==g.indexOf(o)){c=f.extract("displayValue");if(!c||0===c.length&&"aboutme_text"!==o)c=_t.personal_info_no_answer;b[o]={id:o,title:f.extract("name"),editable:this.shouldSectionBeEditable_(o),items:[c]}}}return b},onInterestsClick_:function(){this.getChildView("interests").update({toggle:!0})},getInterestsSection_:function(a,b){if(!a||0===a.length)return null;
2===a[0].groupId_&&a.shift();if(!a||0===a.length)return null;this.getChildView("interests").update({interests:a,commonInterestMessage:this.isOwnProfile_?null:b});return{id:"interests",title:_t.interests_profile_sectionHeadingWithNumber([a.length]),items:[{content:this.getChildView("interests").getElement()}]}},loadFilterPage_:function(){this.trigger("edit-filter")},loadLocationEditPage_:function(a){a.preventDefault();this.trigger("edit-location")},loadEditProfilePage_:function(a){a.preventDefault();
this.trigger("edit-profile")},onClickScore_:function(){this.isOwnProfile_&&0===this.profile_.extract("profile.profileRating.profileRating")&&this.trigger("navigate-encounters")},getScoreSection_:function(a){var c=b.createElement("div",{"class":"profile-details-item-value",id:"hotness-rating-item"}),d=b.createElement("div",{"class":"hotness-rating-roundel",id:"hotness-rating-roundel"}),f=b.createElement("div",{"class":"hotness-rating-text",id:"hotness-rating-id"});f.innerHTML=a;c.appendChild(d);c.appendChild(f);
return{id:"score",title:_t.encounters_score,enabled:!0,items:[{id:"hotness-rating","class":"profile-details-item-hotness",content:[c]}]}},getTrustedNetworkSection_:function(a){var b=a?a.extract("connections"):null;return!_.isArray(b)||0===b.length?null:{id:"network",title:_t.trusted_network_profile_title_number([b.length]),items:[{content:this.getChildView("trusted-connections").update({connections:a}).getElement()}]}},shouldSectionBeEditable_:function(a){return this.isOwnProfile_&&-1!==d.indexOf(a)}})})(Badoo,
Zepto);Badoo=Badoo||{};
(function(a,f,g,d){var b=a.Utils.DOM,c=f.fx.transitionEnd,h=(a.Views.Chat=a.View.extend({id:"chat-view",userInputActive:!1,resizeInterval:null,currentState_:null,lastCheckedHeight_:null,currentUid_:null,init:function(){this.currentState_=h.CHAT;var b=this.registerChildView("chat-messages",new a.Views.ChatMessages);b.on(a.Views.ChatMessages.EVENTS.LOAD_PROFILE,this.loadProfile_);b.on(a.Views.ChatMessages.EVENTS.VIEW_IMAGE,this.onViewImage_);b.appendTo(this.el);b.getElement().on(c,this.onChatResized_);
b=this.registerChildView("chat-input",new a.Views.ChatInput);b.on("submit",this.onMessageSubmit);b.on("resize",this.onInputResize);b.on("active",this.onInputViewActive);b.on("inactive",this.onInputViewInactive);b.on("reply-now",this.onReplyNow_);b.on("not-interested",this.onNotInterested_);b.appendTo(this.el)},update:function(a){this.render(a);this.resize();return this},render:function(a){if(a){var c=b.removeForEdit(this.el);this.currentState_=a.state;a.theirId&&(this.currentUid_=a.theirId);this.getChildView("chat-messages").update(a);
this.getChildView("chat-input").update({showForm:a.state!==h.INITIAL_CHAT,isReply:a.messages&&0<a.messages.length});c()}},reset:function(){this.getChildView("chat-messages").reset();this.getChildView("chat-input").reset();return this},replyMessage_:function(){this.render({state:h.CHAT})},stop:function(){},onReplyNow_:function(){this.currentState_=h.CHAT;this.getChildView("chat-messages").update({state:h.CHAT});this.trigger("reply-now");this.resize()},onNotInterested_:function(){this.trigger("not-interested");
this.reset()},onMessageSubmit:function(a){this.currentState_=h.CHAT;this.getChildView("chat-messages").update({state:this.currentState_,newMessage:{type:"yours",message:a.value}});this.trigger("message-submit",a)},onInputViewActive:function(){this.userInputActive=!0;this.resize()},onInputViewInactive:function(){this.userInputActive=!1;this.resize()},onInputResize:function(){this.resize()},onChatResized_:function(){this.userInputActive&&this.getChildView("chat-messages").update({state:h.CHAT});this.getChildView("chat-messages").refreshScroller();
this.getChildView("chat-messages").scrollToBottom(500,500)},onViewImage_:function(a){a={toUid:this.currentUid_,messageId:a.messageId,type:a.type};this.trigger("view-image",a)},loadProfile_:function(){this.trigger("load-profile")},resize:function(){var b=this.getChildView("chat-input").el.getBoundingClientRect().height,c=(this.userInputActive?a.UI.innerHeight:d.innerHeight)-48-1;this.getChildView("chat-messages").getElement().css({height:c+"px","border-bottom":b+"px solid transparent"});this.getChildView("chat-messages").refreshScroller();
this.getChildView("chat-messages").scrollToBottom(500,500)}})).STATES={INITIAL_CHAT:1,CHAT:3}})(Badoo,Zepto,document,window);Badoo=Badoo||{};
(function(a,f){var g=a.Utils.DOM,d=f.fx.transitionEnd,b=f.os.supportsTouch?"touchend":"mouseup";a.Views.ChatInput=a.View.extend({id:"chat-input-view",form:null,input:null,buttonGroup:null,ghost_:null,shouldAllowBlur_:!1,didManualFocus_:!1,eventTimeStamp_:0,events:{"click #chat-input":"onInputClick_","click .green-button":"onReplyNow_","click .grey-button":"onNotInterested_"},init:function(){_.bindAll(this);this.render()},update:function(a){a.showForm?(this.buttonGroup.remove(),this.$el.append(this.form)):
(this.form.remove(),this.$el.append(this.buttonGroup));this.nowButton_.textContent=a.isReply?_t.chat_reply_now:_t.btn_chatnow;this.chatInput_.val("");this.syncHeight_();return this},render:function(){var b=this.form=f(g.createElement("form",{id:"chat-input-form"}));b.append(this.input=g.renderTemplate("form-input",{id:"chat-input",type:"text",placeholder:_t.chat_message_placeholder}));this.ghost_=this.input.find("pre");b.append(g.renderTemplate("form-submit",{id:"chat-input-submit",value:_t.cmd_send}));
b.find("#chat-input-submit").addClass("disabled");b.on("submit",_.bind(this.onSubmit_,this));this.chatInput_=b.find("#chat-input");this.chatInput_.on("keyup",this.onKeyup_).on(d,this.onResize_).on("keypress",this.onKeyDown_);a.UI.on("focus",this.onFocus_);a.UI.on("blur",this.onBlur_);this.buttonGroup=f(g.createElement("div",{"class":"button-group"},[this.nowButton_=g.createElement("button",{"class":"green-button"},_t.chat_reply_now),g.createElement("button",{"class":"grey-button"},_t.chat_not_interested)]))},
onKeyDown_:function(a){31<a.keyCode&&f.os.ios&&(a.preventDefault(),a.stopPropagation(),this.chatInput_.val(this.chatInput_.val()+String.fromCharCode(a.keyCode)),this.onKeyup_())},onResize_:function(){this.trigger("resize")},onFocus_:function(a){window.addEventListener(b,this.onTouchEnd_,!0);!0!==this.didManualFocus_&&this.trigger("active",a);this.didManualFocus_=!1},onBlur_:function(a){!0===this.shouldAllowBlur_||10<a.timeStamp-this.eventTimeStamp_?(this.trigger("inactive",a),window.removeEventListener(b,
this.onTouchEnd_,!0)):(this.didManualFocus_=!0,this.chatInput_.get(0).focus())},onTouchEnd_:function(a){this.shouldAllowBlur_="INPUT"!==a.target.tagName;this.eventTimeStamp_=a.timeStamp},onSubmit_:function(a){a.preventDefault();this.chatInput_.get(0).focus();a=this.chatInput_.val();""!==a&&(this.chatInput_.val(""),this.syncHeight_(),this.trigger("submit",{value:a}),f.os.oldAndroid&&this.trigger("inactive"))},onInputClick_:function(){f.os.oldAndroid&&this.trigger("active")},syncHeight_:function(){var a=
g.escapeHtml(this.chatInput_.val()),a=("string"===typeof a?a:"").replace(/\n/g,"\ntext");this.ghost_.html(a);a=this.ghost_.height();this.chatInput_.css("height",a+"px")},onKeyup_:function(){this.syncHeight_();""===this.chatInput_.val()?this.$("#chat-input-submit").addClass("disabled").removeClass("touchable"):this.$("#chat-input-submit").removeClass("disabled").addClass("touchable")},onReplyNow_:function(){var a=this.form.addClass("animate slideRight"),b=this.buttonGroup.addClass("animate"),e=this.el;
a.on(f.fx.transitionEnd,_.bind(function(){a.off(f.fx.transitionEnd).removeClass("animate");this.trigger("reply-now")},this));b.on(f.fx.transitionEnd,function(){b.off(f.fx.transitionEnd);b.remove().removeClass("animate slideLeft");a.appendTo(e);requestAnimationFrame(function(){a.removeClass("slideRight")})});requestAnimationFrame(function(){b.addClass("slideLeft")})},onNotInterested_:function(){this.trigger("not-interested")}})})(Badoo,Zepto);Badoo=Badoo||{};
(function(a,f){var g=a.Utils.DOM,d=g.createElement,b,c=a.View.extend({className:"initial-chat",image_:null,interests_:null,friends_:null,text_:null,children_:null,events:{click:"triggerClick_"},update:function(b){this.$el.removeClass("removed");if(null===this.children_){var c=this.children_=g.renderTemplate("initial-chat");this.image_=c.find(".user-image");this.interests_=c.find(".interests-in-common strong");this.friends_=c.find(".friends-in-common strong");this.text_=f(c.get(0))}this.image_.css("background-image",
"");b.largePhoto&&a.Utils.Helpers.preloadImage(b.largePhoto,this.imageLoaded_);b.title&&this.text_.html(b.title);this.friends_.text(b.connections?Math.min(b.connections,99):0);this.interests_.text(b.interests?Math.min(b.interests,99):0);this.render();return this},imageLoaded_:function(a){this.image_.css("background-image","url("+a+")");this.image_.height(this.image_.width())},render:function(){this.$el.append(this.children_)},remove:function(){this.$el.one(f.fx.transitionEnd,_.bind(c._super.remove,
this));this.$el.addClass("removed")},triggerClick_:function(a){a.preventDefault();this.trigger("click")}}),h=a.Views.ChatMessages=a.Views.ScrollingView.extend({id:"chat-messages-view",scrollBottomTimout:null,initialChatContainer_:null,chatsMessagesContainer_:null,state_:null,events:{"click .has-image":"showMultimediaImage_"},init:function(){h._super.init.apply(this,arguments);b=a.Views.Chat.STATES;this.state_=b.CHAT;this.chatsMessagesContainer_=g.$satisfy("div.chat-messages-container.clearfix");this.initialChatContainer_=
g.$satisfy("div div.user-card");this.registerChildView("interests",new a.Views.Interests).on(a.Views.Interests.ACTIONS.TOGGLE_CHANGE,this.refreshScroller);this.registerChildView("initial-chat",new c).on("click",this.loadProfile_);this.registerChildView("trusted-connections",new a.Views.TrustedConnections)},update:function(a){var c=g.removeForEdit(this.el);a.messages&&a.messages.length&&this.renderMessages_(a.messages);a.newMessage&&this.el.appendChild(this.renderMessage_(a.newMessage));a.state===
b.CHAT||_.isUndefined(a.interests)&&_.isUndefined(a.connections)?(this.currentState_!==b.CHAT&&this.removeInitialChat_(),this.scrollToBottom(500)):this.renderInitialChat_(a);this.currentState_=a.state;c();h._super.update.apply(this,arguments);return this},disable:function(){this.removeInitialChat_();return h._super.disable.apply(this,arguments)},scrollToBottom:function(a,b){this.scrollBottomTimout&&clearTimeout(this.scrollBottomTimout);this.scrollBottomTimout=setTimeout(_.bind(h._super.scrollToBottom,
this,a),_.isNumber(b)?b:500)},showMultimediaImage_:function(b){var b=f(b.target).closest(".has-image"),c=b.find(".img");1===c.length&&(a.Views.ModalPhoto.getInstance().update({src:c.data("url")}),b.hasClass("chat-message-theirs")&&this.trigger(e.VIEW_IMAGE,{messageId:c.data("id")+"",type:c.data("visibilityType")+""}))},renderMessages_:function(a){this.$el.empty();this.chatsMessagesContainer_.empty();for(var b=0;b<a.length;b++)this.chatsMessagesContainer_.append(this.renderMessage_(a[b]));this.$el.append(this.chatsMessagesContainer_)},
renderMessage_:function(b){var c=g.$satisfy("p").append(b.message),e="time"===b.type?"chat-time":"chat-message chat-message-"+b.type;if((b=b.multimedia)&&"MULTIMEDIA_FORMAT_IMAGE"===b.format)"MULTIMEDIA_VISIBILITY_TYPE_INFINITE"!==b.visibilityType?c.append(d("a",{href:"//"+a.config.get("api.defaultHostname")+"/appstore",text:" "+_t.chat_location_downloadapp})):(e+=" has-image",g.$satisfy("span.img").css("background-image","url("+b.url+")").data(b).prependTo(c));c.attr("class",e);return c.get(0)},
renderInitialChat_:function(a){this.getChildView("initial-chat").update(a).prependTo(this.el);this.$el.addClass("initial-chat-container")},loadProfile_:function(){this.trigger(e.LOAD_PROFILE)},removeInitialChat_:function(){requestAnimationFrame(_.bind(function(){this.getChildView("initial-chat").remove()},this));this.$el.removeClass("initial-chat-container")}}),e=h.EVENTS={VIEW_IMAGE:0,LOAD_PROFILE:1}})(Badoo,Zepto);Badoo=Badoo||{};
(function(a){var f=a.Views.Settings=a.Views.ScrollingView.extend({id:"settings-list-page",className:"settings-list-page settings-page",events:{"click li":"navigateToPage_"},init:function(){f._super.init.call(this);this.registerChildView("list",new a.Views.List);this.render()},update:function(a){this.getChildView("list").update({enabled:!0,items:a.map(function(a){return{content:a.title,id:a.href}})})},navigateToPage_:function(a,d){_.isString(d.id)&&this.trigger("navigate",{to:d.id})},render:function(){this.getChildView("list").appendTo(this.el)}})})(Badoo,
Zepto);Badoo=Badoo||{};
(function(a,f){var g=a.Utils.DOM,d=a.Views.List=a.View.extend({className:"list-view-container",list_:null,events:{"click li":"onListItemClick_"},preventTouch:!0,update:function(a){f.isPlainObject(a)&&(a=[a]);this.list_=a;this.render()},render:function(){var a,c,d,e=g.removeForEdit(this.el);this.$el.empty();for(var f=0;f<this.list_.length;f++){c=this.list_[f];_.isString(c.title)&&this.el.appendChild(g.createElement("div",{"class":"list-view-title"},c.title));a=new g.generator("ul",{"class":"list-view "+
(c["class"]||"")});for(var i=0;i<c.items.length;i++)d=c.items[i],a.append("li",{id:d.id,"class":(d["class"]||"")+(c.enabled||d.enabled?" touchable":"")},d.content);this.el.appendChild(a.getElement())}e()},onListItemClick_:function(a,c){var f;c.id?f=c.id:c.children&&(0<c.children.length&&c.children[0].id)&&(f=c.children[0].id);this.trigger(d.ACTIONS.LIST_ITEM_SELECTED,{id:f,el:c})}});d.ACTIONS={LIST_ITEM_SELECTED:"list-item-selected"}})(Badoo,Zepto);Badoo=Badoo||{};
(function(a){var f=a.Utils.DOM;a.Views.ProfileList=a.Views.List.extend({className:"profile-list-view-container",profileData_:null,update:function(a){!_.isUndefined(a.isOwnProfile)&&!_.isUndefined(a.sections)&&(this.profileData_=a,this.render())},render:function(){var a,d,b=this.profileData_.order,c=this.profileData_.isOwnProfile,h=f.removeForEdit(this.el);this.$el.empty();a=new f.generator("ul",{"class":"profile-info"});for(var e=0;e<b.length;e++)if(d=this.profileData_.sections[b[e]]){var j=f.createElement("li",
{"class":"profile-detail profile-details-item-"+d.id});c&&d.editable&&j.appendChild(f.createElement("a",{"class":"profile-list-edit profile-list-edit-"+d.id,href:"#"}));_.isString(d.title)&&j.appendChild(f.createElement("div",{"class":"list-view-title"},d.title));for(var i=0;i<d.items.length;i++)_.isString(d.items[i])?j.appendChild(f.createElement("div",{"class":"profile-details-item-value"},d.items[i])):j.appendChild(d.items[i].content[0]);a.getElement().appendChild(j)}this.el.appendChild(a.getElement());
h()}})})(Badoo);Badoo=Badoo||{};
(function(a){var f=a.Utils.DOM,g=a.Views.Interests=a.View.extend({className:"interests-view",expanded:!1,interests_:null,commonInterestMessage_:null,events:{click:"toggleCollapse_"},toggleCollapse_:function(){this.interests_.length<=g.CONFIG.COLLAPSED_DISPLAY_AMOUNT||(this.expanded=!this.expanded,this.$el[this.expanded?"addClass":"removeClass"]("show-all"),requestAnimationFrame(_.partial(this.trigger,g.ACTIONS.TOGGLE_CHANGE)))},update:function(a){if(a.interests||a.commonInterestMessage)this.reset(),this.interests_=
a.interests||this.interests_,this.commonInterestMessage_=a.commonInterestMessage||this.commonInterestMessage_,this.render();a.toggle&&this.toggleCollapse_();return this},reset:function(){this.expanded=!1;this.$el.removeClass("show-all").empty()},render:function(){var a=this.interests_.length-g.CONFIG.COLLAPSED_DISPLAY_AMOUNT;0<a?a="+"+a:(this.$el.addClass("show-all"),this.expanded=!0,a=null);this.$el.empty().append(f.renderTemplate("interests",{commonInterestMessage:this.commonInterestMessage_,interests:_.map(this.interests_,
function(a,c){return{groupId:a.extract("groupId"),name:a.extract("name"),isMatched:!!a.extract("isMatched"),collapsable:c>=g.CONFIG.COLLAPSED_DISPLAY_AMOUNT}}),moreToShow:a}));return this}});g.ACTIONS={CLICK:"CLICK",TOGGLE_CHANGE:"TOGGLE_CHANGE"};g.CONFIG={COLLAPSED_DISPLAY_AMOUNT:6}})(Badoo,Zepto);Badoo=Badoo||{};
(function(a){var f=a.Utils.DOM,g=a.Views.MutualAttractionPopup=a.Views.Popup.extend({id:"mutual-attraction-popup",content:null,update:function(a){a.subtitle=_t.encounters_mutual_subtitle([a.theirName]);this.content=f.renderTemplate("mutual-popup",a);return g._super.update.apply(this,arguments)},onPopupAction:function(a){switch(a.target.id){case "send-message":this.trigger(g.ACTIONS.START_CHAT,{id:a.target.getAttribute("data-uid")});break;case "keep-playing":this.trigger(g.ACTIONS.CONTINUE,a)}this.dismiss()},
getContentElement:function(){return this.content},shouldPreventClosing:function(){return!0}});g.ACTIONS={START_CHAT:"START_CHAT",CONTINUE:"CONTINUE"}})(Badoo,Zepto);Badoo=Badoo||{};
(function(a){var f=a.Views.ModalPhoto=a.Views.Popup.extend({tagName:"img",className:"modal-photo popup-action modal-content",update:function(a){a.src&&(this.$el.attr("src",a.src),this.enable());this.show()},onPopupAction:function(){this.dismiss();this.disable()},getBackDropType:function(){return f.MODAL_BG.DARK}}),g;f.getInstance=function(){return g||(g=new f)}})(Badoo);Badoo=Badoo||{};
(function(a){var f=a.Utils.DOM,g=a.Views.AddPhotosPopup=a.Views.Popup.extend({id:"add-photos-popup",title:null,content:null,form_:null,fileInput_:null,update:function(a){this.content=f.renderTemplate("add-photos-popup",a);this.title=(new f.generator("div",{id:"add-photos-popup-title",text:a.title||_t.gallery_import_title})).append("div",{id:"cancel-button",className:"touchable popup-action",text:a.cancelText||_t.cmd_cancel}).getElement(!0);a.libraryEnabled&&(this.form_=this.content.find("#upload-form").get(0),
this.fileInput_=this.content.find("#file-picker").on("change",this.onFilePickerChanged_));g._super.update.apply(this,arguments)},onPopupAction:function(a){switch(a.target.id){case "library-button":this.trigger(g.ACTIONS.LIBRARY_NATIVE,a);break;case "camera-button":this.trigger(g.ACTIONS.CAMERA,a);break;case "facebook-button":this.trigger(g.ACTIONS.FACEBOOK,a);break;case "cancel-button":this.trigger(g.ACTIONS.CANCEL,a)}},onFilePickerChanged_:function(){""!==this.fileInput_.val()&&this.trigger(g.ACTIONS.LIBRARY,
{input:this.fileInput_.get(0),form:this.form_,iframe:this.content.find("#upload-frame")})},getTitleElement:function(){return this.title},getContentElement:function(){return this.content},showLoading:function(){this.content.parent().addClass("has-loading")},hideLoading:function(){this.content.parent().removeClass("has-loading")}});g.ACTIONS={LIBRARY_NATIVE:"LIBRARY_NATIVE",LIBRARY:"LIBRARY",CAMERA:"CAMERA",FACEBOOK:"FACEBOOK",CANCEL:"CANCEL"}})(Badoo,Zepto);Badoo=Badoo||{};
(function(a,f){var g=a.Utils.DOM,d=a.Views.FacebookPhotoImport=a.Views.ScrollingView.extend({className:"facebook-photo-import-view main-page-view",events:{"click .inbox-item":"onInboxItemClick_","click .facebook-photo-container":"onPhotoClick_"},map_:null,photoContainer_:null,init:function(){d._super.init.apply(this,arguments);this.el.appendChild(g.satisfy("div"));this.photoContainer_=this.el.childNodes[0]},update:function(a){d._super.update.apply(this,arguments);this.render(a);this.hideLoading()},
render:function(a){a.albums?(this.showLoading(),this.renderAlbums_(a.albums)):a.album&&(this.showLoading(),this.renderPhotos_(a.album))},onInboxItemClick_:function(a,c){var c=f(c),g=c.attr("id");this.trigger(d.ACTIONS.ALBUM_SELECTED,g)},onPhotoClick_:function(a){a=f(a.srcElement);a=this.map_[a.attr("id")];this.trigger(d.ACTIONS.PHOTO_SELECTED,a)},createFacebookPhoto_:function(a,c){var d=g.satisfy("div.facebook-photo-container");d.id=a;d.style.backgroundImage="url("+c+")";return d},disable:function(){d._super.disable.apply(this,
arguments)},renderAlbums_:function(a){for(var c=0;c<a.length;c++)a[c].data_.photoCountDescription=_t.str_num_photos([a[c].data_.photoCount]);a=g.renderTemplate("facebook-albums",{albums:a});this.photoContainer_.innerHTML="";this.photoContainer_.appendChild(a[0])},renderPhotos_:function(a){this.map_={};this.photoContainer_.innerHTML="";for(var c=g.removeForEdit(this.photoContainer_),a=a.extract("photos"),d=0;d<a.length;d++)this.map_[a[d].extract("pid")]=a[d].extract("src"),this.photoContainer_.appendChild(this.createFacebookPhoto_(a[d].extract("pid"),
a[d].extract("thumbnailUrl")));c()}});d.ACTIONS={PHOTO_SELECTED:"PHOTO_SELECTED",ALBUM_SELECTED:"ALBUM_SELECTED"}})(Badoo,Zepto);Badoo=Badoo||{};
(function(a,f){var g=a.Utils.DOM,d=a.Utils.Helpers,b,c,h=null,e=0,j=f.os.supportsTouch,i=a.Views.PhotoEdit=a.View.extend({className:"photo-edit-view",isReady_:!1,isImageReady_:!1,trackingTouches_:!1,imageData_:null,actionState_:null,originalState_:null,transformValues_:null,events:{"touchstart .cropped-image":"onDown_","touchmove .cropped-image":"onMove_","touchend .cropped-image":"onUp_"},init:function(){this.isImageReady_=this.isReady_=!1;this.$el.html(g.renderTemplate("photo-edit"));this.actionState_=
{};this.originalState_={};this.transformValues_={translateZ:0,translateX:0,translateY:0,scale:1};b=this.$el.find(".cropped-image");c=this.$el.find(".large-image");h=this.$el.find(".crop-window");this.sizeCropWindow_()},sizeCropWindow_:function(){var b=f(".page-header").height(),c=a.UI.getScreenDimensions().width,b=(a.UI.getScreenDimensions().height-b-(c-40))/2;h.css({width:c-40,height:c-40,top:b});e=c-40},onResize_:function(){var a=this;(0===window.orientation||180===window.orientation)&&_.defer(function(){a.sizeCropWindow_();
a.update()})},reset:function(){this.isImageReady_=this.isReady_=!1;b[0].src=null;b.css({height:null,width:null,transition:null});c[0].src=null;c.css({height:null,width:null,transition:null});b.hide();c.hide();a.UI.off("resize",this.onResize_)},update:function(a){_.isUndefined(a)||(this.imageData_=a.photo);this.disable();this.showLoading();b.hide();c.hide();_.isString(this.imageData_)&&0===this.imageData_.indexOf("http")?d.preloadImage(this.imageData_,this.loadImageData_):this.loadImageData_(this.imageData_);
return this},ready:function(){this.isReady_=!0;this.isImageReady_&&(b.show(),setTimeout(this.imageLoaded_,0));a.UI.on("resize",this.onResize_)},onDown_:function(a){a.preventDefault();this.isEnabled_&&(this.trackingTouches_=!0,this.actionState_.startX=j?a.touches[0].pageX:a.pageX,this.actionState_.startY=j?a.touches[0].pageY:a.pageY,this.actionState_.isScale=j?2===a.touches.length:!1,!0===this.actionState_.isScale&&this.setScaleProperties_(a.touches),b.css("transition","none"),c.css("transition","none"))},
setScaleProperties_:function(a){var e=(a[0].pageY+a[1].pageY)/2,d=(a[0].pageX+a[1].pageX)/2,f=this.findTouchPointOnImage_(d,e,b);this.actionState_.startDistance=Math.sqrt(Math.pow(a[1].pageX-a[0].pageX,2)+Math.pow(a[1].pageY-a[0].pageY,2));this.actionState_.originX=f.x;this.actionState_.originY=f.y;this.actionState_.touchX=d;this.actionState_.touchY=e;this.actionState_.previousScale=1;this.actionState_.normalScale=1;b.css("transform-origin",f.y+"px "+f.x+"px");c.css("transform-origin",f.y+"px "+f.x+
"px")},findTouchPointOnImage_:function(a,b,c){c=c.offset();return{x:Math.floor(b-c.top),y:Math.floor(a-c.left)}},onMove_:function(a){a.preventDefault();if(this.trackingTouches_)return this.actionState_.isScale?this.doScale_(a):this.doMove_(a)},doScale_:function(a){var f=a.touches,a=b.height(),g=b.width(),f=(Math.sqrt(Math.pow(f[1].pageX-f[0].pageX,2)+Math.pow(f[1].pageY-f[0].pageY,2))-this.actionState_.startDistance)/this.actionState_.startDistance+1,h=0.9*e,i=f-this.actionState_.normalScale,j=null;
if(0>i&&(a*f<h||g*f<h))i*=0.25;this.actionState_.normalScale=f;f=this.actionState_.previousScale+i;this.transformValues_.scale=f;this.actionState_.previousScale=f;j=d.createCssTransformRule(this.transformValues_);b.css("transform",j);c.css("transform",j)},doMove_:function(a){var e;this.setTransformPosition_(this.actionState_.startY-(j?a.touches[0].pageY:a.pageY),this.actionState_.startX-(j?a.touches[0].pageX:a.pageX));e=d.createCssTransformRule(this.transformValues_);b.css("transform",e);c.css("transform",
e);this.actionState_.startX=j?a.touches[0].pageX:a.pageX;this.actionState_.startY=j?a.touches[0].pageY:a.pageY},onUp_:function(){this.trackingTouches_&&(this.trackingTouches_=!1,this.applyTransforms_(),this.trigger(i.ACTIONS.POSITION_CHANGED,this.getPositionData_()))},getPositionData_:function(){return{x:(Math.abs(b.position().left)/b.width()).toFixed(2),y:(Math.abs(b.position().top)/b.height()).toFixed(2),width:Math.round(this.originalState_.scale*e/this.getScale_()),scale:this.getScale_().toFixed(2)}},
applyTransforms_:function(){var a=b.position(),g=b.offset(),h=b.width(),i=b.height(),j=a.top,a=a.left,s=g.top-f(".page-header").height(),g=g.left,u;u=!1;this.transformValues_.translateX=0;this.transformValues_.translateY=0;this.transformValues_.scale=1;if(h<e||i<e)i=this.originalState_.height,h=this.originalState_.width,u=!0;0<j?(s-=j,j=0,u=!0):j+i<e&&(j=e-i,u=!0);0<a?(g-=a,a=0,u=!0):a+h<e&&(a=e-h,u=!0);u&&(b.css({transition:"all 0.3s ease"}),c.css({transition:"all 0.3s ease"}));u=d.createCssTransformRule(this.transformValues_);
b.css({top:j,left:a,width:h,height:i,transform:u});c.css({top:s,left:g,width:h,height:i,transform:u})},setTransformPosition_:function(a,c){var d=this.transformValues_.translateY-a,f=this.transformValues_.translateX-c,g=b.position().top-a,h=b.position().left-c;if(0<g||Math.abs(g)>=b.height()-e)d=this.transformValues_.translateY;if(0<h||Math.abs(h)>=b.width()-e)f=this.transformValues_.translateX;this.transformValues_.translateY=d;this.transformValues_.translateX=f},getScale_:function(){return b.width()/
this.originalState_.width},imageLoaded_:function(){if(this.isReady_){var a,d,g,h;"naturalHeight"in b[0]?(g=b[0].naturalHeight,h=b[0].naturalWidth):(g=b[0].height,h=b[0].width);h>g?(a=e+"px",d=h/g*e+"px"):(d=e+"px",a=g/h*e+"px");g=h/parseInt(d);b.css({height:a,width:d,top:"0px",left:"0px"});this.originalState_.height=parseInt(a);this.originalState_.width=parseInt(d);this.originalState_.scale=g.toFixed(2);b.show();c.css({height:a,width:d,top:b.offset().top-f(".page-header").height(),left:b.offset().left});
c.show();this.trigger(i.ACTIONS.POSITION_CHANGED,this.getPositionData_());this.enable();this.hideLoading()}else this.isImageReady_=!0},loadImageData_:function(a){b.css({height:null,width:null});b[0].src=a;c[0].src=a;this.isImageReady_=!0;this.isReady_&&(b.css({width:1,height:1}).show(),setTimeout(this.imageLoaded_,250))}});i.ACTIONS={POSITION_CHANGED:"POSITION_CHANGED"}})(Badoo,Zepto);Badoo=Badoo||{};
(function(a,f){var g=a.Utils.DOM,d={BLOCK:"BLOCK",INLINE:"INLINE"},b={YES:"green-button",NO:"delete-button",CANCEL:"grey-button"},c=a.Views.ConfirmPopup=a.Views.Popup.extend({className:"confirm-popup modal-content",contentElement_:null,yesText_:null,noText_:null,message_:null,title_:null,buttonLayout_:d.INLINE,yesButtonClass_:b.YES,noButtonClass_:b.NO,setButtonsKind:function(a,c){a&&b[a]&&(this.yesButtonClass_=b[a]);c&&b[c]&&(this.noButtonClass_=b[c])},update:function(a){_.isString(a.message)&&(this.message_=
a.message);_.isString(a.yesText)&&(this.yesText_=a.yesText);_.isString(a.noText)&&(this.noText_=a.noText);_.isString(a.title)&&(this.title_=a.title);_.has(c.BUTTON_LAYOUT,a.buttonLayout)&&(this.buttonLayout_=a.buttonLayout);this.message_&&this.render();c._super.update.apply(this,arguments)},render:function(){this.contentElement_=g.renderTemplate("confirm-popup",{message:this.message_,yesText:this.yesText_||_t.encounters_profile_button_yes,noText:this.noText_||_t.encounters_profile_button_no,yesClass:this.yesButtonClass_,
noClass:this.noButtonClass_,stacked:this.buttonLayout_===d.BLOCK})},getContentElement:function(){return this.contentElement_},onPopupAction:function(a){this.trigger(f(a.target).hasClass(this.yesButtonClass_)?c.ACTIONS.YES:c.ACTIONS.NO);this.dismiss()},shouldPreventClosing:function(){return!0},getTitleElement:function(){return this.title_?g.createElement("h2",{},this.title_):null}});c.ACTIONS={YES:"YES",NO:"NO"};c.BUTTON_KIND={OK:"OK",DELETE:"DELETE",CANCEL:"CANCEL"};c.BUTTON_LAYOUT=d})(Badoo,Zepto);
Badoo=Badoo||{};
(function(a){var f=a.Views.LegalDocument=a.Views.ScrollingView.extend({className:"terms-view main-page-view",events:{"click a":"handleLinkClick_"},needToShowLoading:!1,update:function(a){"string"===typeof a.content?(this.needToShowLoading=!1,this.hideLoading(),this.el.innerHTML=a.content,this.scrollToTop()):a.loading&&(this.needToShowLoading=!0,setTimeout(_.bind(this.tryShowLoading_,this),200));return f._super.update.apply(this,arguments)},tryShowLoading_:function(){this.needToShowLoading&&this.showLoading()},
handleLinkClick_:function(a){a.preventDefault();this.trigger("openLink",a.target.href)}})})(Badoo);Badoo=Badoo||{};
(function(a){var f=a.Utils.DOM.createElement,g=a.Views.SignUp=a.Views.ScrollingView.extend({className:"email-auth-page sign-up-page main-page-view",tagName:"form",nameInput_:null,emailInput_:null,signUpButton_:null,errorViews_:{},location_:{},currentState_:0,events:{"click #sign-up-submit":"doSignUp_","click a":"handleLinkClick_"},init:function(){g._super.init.apply(this,arguments);this.registerChildView("fields",new a.Views.List);var b=this.registerChildView("birthday",new a.Views.DateSelectView);
b.on("change",this.enableIfFormFilled_);b.update({placeholder:_t.signin_new_dd_mm_yyyy});b=this.registerChildView("gender",new a.Views.RadioGroup);b.on("change",this.enableIfFormFilled_);b.render([{name:"gender",value:1,label:_t.incomplete_profile_guy},{name:"gender",value:2,label:_t.incomplete_profile_girl}]);this.$el.on("change",this.enableIfFormFilled_);this.$el.on("submit",this.doSignUp_);this.render()},enableIfFormFilled_:function(){0<this.nameInput_.value.length&&0<this.emailInput_.value.length&&
!_.isUndefined(this.getChildView("gender").value())&&!_.isUndefined(this.location_.id)?this.setState_(1):this.setState_(0)},getLocationContainer:function(){return $(this.locationContainer_)},destroy:function(){this.$el.off("change");this.getChildView("gender").off("change");this.getChildView("birthday").off("change");g._super.destroy.apply(this,arguments)},handleLinkClick_:function(a){var c=a.target.href;/sign-in/.test(c)?(a.preventDefault(),this.trigger(d.SIGN_IN)):/terms/.test(c)?(a.preventDefault(),
this.trigger(d.VIEW_TERMS)):/hotornot\.com/.test(c)&&(a.preventDefault(),this.trigger(d.VIEW_PRIVACY))},doSignUp_:function(a){a.preventDefault();a.stopPropagation();this.enableIfFormFilled_();1===this.currentState_&&(this.trigger(d.SUBMIT,{name:this.nameInput_.value,email:this.emailInput_.value,birthday:this.getChildView("birthday").value(),gender:parseInt(this.getChildView("gender").value(),10),location:this.location_.id}),this.setState_(2))},waitTimer_:null,setWaitMessage_:function(a){$(this.signUpWait_)[a?
"addClass":"removeClass"]("hidden")},setState_:function(a){this.currentState_=a;this.waitTimer_&&(clearTimeout(this.waitTimer_),this.waitTimer_=null);this.setWaitMessage_(!0);switch(a){case 0:this.signUpButton_.className="grey-button";break;case 1:this.signUpButton_.className="green-button";break;case 2:this.waitTimer_=setTimeout(this.setWaitMessage_,5E3),this.signUpButton_.className="loading-button"}},update:function(a){this.setWaitMessage_(!0);if(a.errors){this.$(".error").addClass("hidden");var c=
a.errors;for(c in a.errors)this.errorViews_.hasOwnProperty(c)&&$(this.errorViews_[c]).removeClass("hidden").text(a.errors[c]);this.enableIfFormFilled_()}a.didLocationSearch&&this.refreshScroller();a.location&&(this.location_=a.location,this.refreshScroller(),this.enableIfFormFilled_());a.reset&&(this.setState_(0),this.$(".error").addClass("hidden"),$([this.emailInput_,this.nameInput_]).val(""),this.getChildView("birthday").update({reset:!0}),this.getChildView("gender").update({reset:!0}))},render:function(){this.getChildView("fields").update([{"class":"form",
items:[{content:[f("label",{"for":"signup-email",text:_t.signin_existing_email}),this.emailInput_=f("input",{id:"signup-email",name:"email",type:"email",placeholder:_t.signin_new_enter_valid_address}),this.errorViews_.email=f("span",{className:"error hidden"})]},{content:[f("label",{"for":"signup-name",text:_t.lbl_name}),this.nameInput_=f("input",{id:"signup-name",name:"name",type:"text",placeholder:_t.signin_new_name_or_nickname}),this.errorViews_.name=f("span",{className:"error hidden"})]},{content:[f("label",
{text:_t.lbl_birthday}),this.getChildView("birthday").el,this.errorViews_.birthday=f("span",{className:"error hidden"})]},{content:[f("label",{text:_t.signin_new_gender}),this.getChildView("gender").el,this.errorViews_.gender=f("span",{className:"error hidden"})]},{content:[f("label",{text:_t.incomplete_profile_location}),this.locationContainer_=f("div",{className:"location-container"})]}]}]);$([this.emailInput_,this.nameInput_]).on("keyup",_.throttle(this.enableIfFormFilled_,100));var a=f("div",
{className:"button-wrapper"});a.appendChild(this.signUpButton_=f("button",{className:"loading-button",id:"sign-up-submit",text:_t.signin_new_signup}));this.$el.append([f("p",{html:_t.signup_already_member}),this.getChildView("fields").el,a,this.signUpWait_=f("span",{className:"subtext hidden",text:_t.superpowers_alert_problem_message}),f("p",{html:_t.signup_tos_privacy})]);this.refreshScroller()}}),d=g.EVENTS={SUBMIT:"submit",SIGN_IN:"sign-in",VIEW_TERMS:"view-terms",VIEW_PRIVACY:"view-privacy"}})(Badoo);
Badoo=Badoo||{};
(function(a){var f=a.Utils.DOM.createElement,g=a.Views.SignIn=a.Views.ScrollingView.extend({className:"email-auth-page sign-in-page",nameInput_:null,passwordInput_:null,errorViews_:{},currentState_:0,events:{"click #sign-in-submit":"doSignIn_","click a":"handleLinkClick_","click .forgot-password-link":"onForgotPasswordClick_"},init:function(){g._super.init.apply(this,arguments);this.registerChildView("fields",new a.Views.List);this.$el.on("change",this.enableIfFormFilled_);this.render()},enableIfFormFilled_:function(){0<
this.nameInput_.value.length&&0<this.passwordInput_.value.length?this.setState_(1):this.setState_(0)},doSignIn_:function(){this.enableIfFormFilled_();1===this.currentState_&&(this.trigger(d.SIGN_IN,{name:this.nameInput_.value,password:this.passwordInput_.value}),this.setState_(2))},handleLinkClick_:function(b){/sign-up/.test(b.target.href)&&(b.preventDefault(),a.History.navigate("sign-up"))},setState_:function(a){this.currentState_=a;switch(a){case 0:this.signInButton_.className="grey-button";break;
case 1:this.signInButton_.className="green-button";break;case 2:this.signInButton_.className="loading-button"}},update:function(a){this.$el.find(".error").addClass("hidden");if(a.errors){var c=a.errors;for(c in a.errors)this.errorViews_.hasOwnProperty(c)&&$(this.errorViews_[c]).removeClass("hidden").text(a.errors[c])}else a.reset&&$([this.nameInput_,this.passwordInput_]).val("");this.enableIfFormFilled_()},render:function(){this.getChildView("fields").update([{"class":"form",items:[{content:[f("label",
{"for":"signin-name",text:_t.signin_existing_account}),this.nameInput_=f("input",{id:"signin-name",name:"name",type:"text",placeholder:_t.signin_existing_emailorphone}),this.errorViews_.name=f("span",{className:"error hidden"})]},{content:[f("label",{"for":"signin-password",text:_t.signin_existing_password}),this.passwordInput_=f("input",{id:"signin-password",name:"password",type:"password",placeholder:_t.signin_existing_required}),this.errorViews_.password=f("span",{className:"error hidden"})]}]}]);
$([this.nameInput_,this.passwordInput_]).on("keyup",_.throttle(this.enableIfFormFilled_,50));var a=f("div",{className:"button-wrapper"});a.appendChild(this.signInButton_=f("button",{className:"grey-button",id:"sign-in-submit",text:_t.signin_existing_signin}));this.$el.append([f("p",{html:_t.signin_not_a_member}),this.getChildView("fields").el,a,f("p",[f("a",{className:"forgot-password-link",text:_t.signin_existing_forgot_password,href:"#forgot-password"})])])},onForgotPasswordClick_:function(a){a.preventDefault();
this.trigger(d.FORGOT_PASSWORD)}}),d=g.ACTIONS={SIGN_IN:"SIGN_IN",FORGOT_PASSWORD:"FORGOT_PASSWORD"}})(Badoo);Badoo=Badoo||{};
(function(a){var f=a.Utils.DOM,g={aboutme_text:0},d=a.Views.Settings.EditProfile=a.Views.ScrollingView.extend({className:"edit-profile-view settings-page",relationshipToggle_:null,init:function(){d._super.init.apply(this,arguments);this.registerChildView("profile-items",new a.Views.List);this.registerChildView("relationship",new a.Views.ToggleItems)},render:function(a){var b=f.removeForEdit(this.el);this.$el.html("");this.$el.append(this.getList_(a));b();this.scrollToTop();this.hideLoading()},appendTo:function(){d._super.appendTo.apply(this,
arguments);this.showLoading()},update:function(a){_.isArray(a.profileOptions)&&this.render(a.profileOptions);if(_.isBoolean(a.save)){this.showLoading();var f=this.$("#aboutme_text")[0].value;this.trigger(b.SAVE_PROFILE,{aboutMe:f||" "})}d._super.update.apply(this,arguments);return this},getList_:function(a){for(var b=[],e=0;e<a.length;e++){var d=a[e],f=d.extract("id");if(g.hasOwnProperty(f))switch(d.extract("inputType")){case "TEXT":b.push(this.getTextSection_(d));break;case "SELECT":b.push(this.getSelectSection_(d))}}this.getChildView("profile-items").update(b);
return this.getChildView("profile-items").getElement()},getTextSection_:function(a){return{title:a.extract("name"),items:[{content:f.createElement("textarea",{id:a.extract("id"),placeholder:a.extract("helpText"),required:"required",rows:5},a.extract("displayValue"))}]}},getSelectSection_:function(a){for(var b=[],e=a.extract("options"),d=a.extract("currentOptionId"),f=0;f<e.length;f++){var g=e[f],o=g.extract("key"),g=g.extract("value")||_t.personal_info_no_answer;b.push({id:o,name:g})}this.getChildView("relationship").update({options:{isBlock:!0,
isRadio:!0}});this.getChildView("relationship").update(b);this.getChildView("relationship").update(d,!0);return{title:a.extract("name"),items:[{content:this.getChildView("relationship").getElement()}]}}}),b=d.ACTIONS={SAVE_PROFILE:"SAVE_PROFILE"}})(Badoo,Zepto);Badoo=Badoo||{};
(function(a){var f=a.Utils.DOM,g=a.Views.Feedback=a.View.extend({id:"feedback-page",state_:null,events:{"click #send-feedback":"onSendFeedback_","keyup textarea":"onTextAreaKeyUp_"},categories_:null,init:function(){g._super.init.apply(this,arguments);this.registerChildView("categories",new a.Views.List)},getListView_:function(){var b=this.getChildView("categories");b.update({"class":"form",items:this.categories_});b.on(a.Views.List.ACTIONS.LIST_ITEM_SELECTED,_.bind(this.onCategorySelected_,this));
return f.createElement("div",{id:"feedback-container","class":"animate-in"},b.el)},getFeedbackInputView_:function(){var a=f.createElement("div",{"class":"textAreaContainer"},f.createElement("textarea",{rows:5})),b=f.createElement("button",{id:"send-feedback","class":"grey-button"},_t.cmd_send);return f.createElement("div",{id:"feedback-container","class":"animate-in"},[a,b])},update:function(a){_.isObject(a.categories)&&(this.categories_=this.getItems_(a.categories));if(_.isString(a.state)){if(a.state===
this.state_)return;this.state_=a.state}this.render(a)},render:function(){var a=f.removeForEdit(this.$el);this.$el.empty();this.$el.append(this.state_===b.LIST?this.getListView_():this.getFeedbackInputView_());a()},onCategorySelected_:function(a){this.trigger(d.SELECT_CATEGORY,a)},onSendFeedback_:function(){var a=this.$el.find("textarea").val();a&&0<a.length&&this.trigger(d.SEND_FEEDBACK,{feedback:a.trim()})},getItems_:function(a){return _.map(a,function(a){return{"class":"touchable",content:[f.createElement("span",
{id:a.id,"class":"feedback-list-item"},a.value)]}})},onTextAreaKeyUp_:function(){0<this.$el.find("textarea").val().trim().length?this.$el.find("button").removeClass("grey-button").addClass("green-button"):this.$el.find("button").removeClass("green-button").addClass("grey-button")}}),d=g.ACTIONS={SELECT_CATEGORY:"SELECT_CATEGORY",SEND_FEEDBACK:"SEND_FEEDBACK"},b=g.STATES={LIST:"LIST",FEEDBACK:"FEEDBACK"}})(Badoo,Zepto);Badoo=Badoo||{};
(function(a){var f=a.Utils.DOM,a=a.Views.PhoneVerification=a.View.extend({id:"phone-verification-view",events:{"click button":"onButtonClick_","click .disclaimer":"onDisclaimerClick_"},phoneNumber_:null,pin_:null,error_:null,errorContainer_:null,state_:null,loadingSpinner_:null,verificationContainer_:null,description_:null,input_:null,button_:null,disclaimer_:null,init:function(){this.$el.html(f.renderTemplate("phone-verification-page"));var a=this.$el.find("#input-container");this.registerChildView("input",
new Badoo.Views.List);this.getChildView("input").update([{"class":"form",items:[{content:[f.createElement("input",{type:"tel"}),f.createElement("span",{className:"error hidden"})]}]}]);this.getChildView("input").appendTo(a);this.loadingSpinner_=this.$el.find("#loading-spinner");this.verificationContainer_=this.$el.find("#verification-container");this.description_=this.$el.find(".subtitle");this.input_=this.$el.find("input");this.errorContainer_=this.$el.find(".error");this.button_=this.$el.find("#button");
this.disclaimer_=this.$el.find(".disclaimer")},update:function(a){_.isString(a.phoneNumber)&&(this.phoneNumber_=a.phoneNumber);_.isString(a.error)&&(this.error_=a.error);_.isBoolean(a.clearError)&&(this.error_=null);if(_.isString(a.state)){if(a.state===this.state_)return;this.pin_=null;this.state_=a.state}this.render()},getPageData_:function(a){switch(a){case d.ENTER_NUMBER:return{description:_t.verification_sms_entercellforpincode,placeholder:_t.verification_sms_entermobilenumber,value:this.phoneNumber_,
buttonText:_t.title_confirm,disclaimer:""};case d.ENTER_PIN:return{description:_t.verification_sms_enterpincode([this.phoneNumber_]),placeholder:_t.verification_sms_pincode_placeholder,value:this.pin_,buttonText:_t.cmd_finish,disclaimer:_t.verification_sms_didntgetorwrongnumber}}},render:function(){var a=f.removeForEdit(this.el);if(this.state_){var c=this.getPageData_(this.state_);this.description_.html(c.description);this.input_.attr("placeholder",c.placeholder);this.input_.val(c.value);this.button_.html(c.buttonText);
this.disclaimer_.html(c.disclaimer);this.verificationContainer_.addClass("animate-in").css({display:"block"});this.loadingSpinner_.hide();null===this.error_?(this.errorContainer_.html(""),this.errorContainer_.addClass("hidden")):(this.errorContainer_.html(this.error_),this.errorContainer_.removeClass("hidden"));this.error_=null}a()},onButtonClick_:function(){this.loadingSpinner_.show();this.state_===d.ENTER_NUMBER?this.trigger(g.SUBMIT_NUMBER,{token:this.input_.val()}):(this.pin_=this.input_.val()||
null,this.trigger(g.SUBMIT_PIN,{token:this.phoneNumber_,pin:this.pin_}))},onDisclaimerClick_:function(){this.state_===d.ENTER_PIN&&this.trigger(g.RE_ENTER_NUMBER)}}),g=a.ACTIONS={SUBMIT_NUMBER:"SUBMIT_NUMBER",SUBMIT_PIN:"SUBMIT_PIN",RE_ENTER_NUMBER:"RE_ENTER_NUMBER"},d=a.STATES={ENTER_NUMBER:"ENTER_NUMBER",ENTER_PIN:"ENTER_PIN"}})(Badoo,Zepto);Badoo=Badoo||{};
(function(a,f){var g=a.Utils.DOM,d=a.Views.ScoreDisplayView=a.View.extend({options:{size:100,gradientImage:"",lineWidth:14,elementClassName:"",score:0,showScore:!0,animationLength:0,barAnimation:!1,scoreIncrement:!1,scoreIncrementFrameSkip:3,scoreEffectClass:null,scoreEffectDelay:1,parentElement:null,style:null},GAP_ANGLE_:0.4,pixelRatio_:1,animStartTime_:null,animScoreBar_:0,animScoreDisplay_:0,canvas_:null,context_:null,scoreContainer_:null,gradientImage_:null,gradientPattern_:null,currentFrameCount_:0,
init:function(){this.checkOptions_();this.pixelRatio_=window.devicePixelRatio?window.devicePixelRatio:1;this.gradientImage_=new Image;this.gradientImage_.addEventListener("load",this.onGradientLoaded_);this.gradientImage_.src=this.options.gradientImage},checkOptions_:function(){_.isString(this.options.parentElement)&&(this.options.parentElement=f(this.options.parentElement));_.isNull(this.options.style)&&(this.options.style=a.Views.ScoreDisplayView.STYLES.LIGHT)},render:function(){if(_.isNull(this.options.parentElement)||
0===this.options.parentElement.length)throw"Attempt to render when no parent defined";this.canvas_=g.createElement("canvas",{width:this.options.size*this.pixelRatio_,height:this.options.size*this.pixelRatio_,"class":"score-display "+this.options.elementClassName,style:"width: "+this.options.size+"px; height: "+this.options.size+"px;"});this.options.parentElement.append(this.canvas_);this.scoreContainer_=f(g.createElement("div",{"class":"score-display-count",style:"line-height: "+this.options.size+
"px;"}));this.options.parentElement.append(this.scoreContainer_);this.context_=this.canvas_.getContext("2d");0===this.options.animationLength&&this.setUpStatic_()},update:function(a){a&&(_.extend(this.options,a),this.checkOptions_())},beginAnimation:function(){this.animScoreBar_=this.animScoreDisplay_=0;this.animStartTime_=null;this.draw_(0);window.requestAnimationFrame(this.setUpNextFrame_)},getStep_:function(a,c,d,e){return this.options.barAnimation(a,c,d,e)},getScoreStep_:function(a,c,d,e){return this.options.scoreIncrement(a,
c,d,e)},getGradient_:function(){if(!this.gradientPattern_){var a=this.gradientImage_,c=document.createElement("canvas");c.getContext("2d").drawImage(a,0,0,a.width,a.height,0,0,this.options.size*this.pixelRatio_,this.options.size*this.pixelRatio_);this.gradientPattern_=this.context_.createPattern(c,"no-repeat")}return this.gradientPattern_},setUpStatic_:function(){this.animScoreBar_=this.animScoreDisplay_=this.options.score;var a=this.options.score.toFixed(2),a="0.00"===a?a:a.replace(".00",""),c=this.options.score.toFixed(2);
a!==c?this.scoreContainer_.addClass("no-dps"):this.scoreContainer_.removeClass("no-dps");this.scoreContainer_.text(a);this.draw_(this.options.score)},draw_:function(a){var c=this.options,d=this.context_,e=c.size*this.pixelRatio_,f=c.size/2*this.pixelRatio_,g=(c.size/2-c.lineWidth/2)*this.pixelRatio_,l=Math.PI+Math.PI/2-this.GAP_ANGLE_,o=-Math.PI/2+this.GAP_ANGLE_,a=(o-l)*((a?a:this.options.score)/10)+l;d.clearRect(0,0,e,e);d.beginPath();d.arc(f,f,g,l,o,!0);d.strokeStyle=this.options.style;d.lineWidth=
c.lineWidth*this.pixelRatio_;d.lineCap="round";d.stroke();d.beginPath();d.arc(f,f,g,l,a,!0);d.strokeStyle=this.getGradient_();d.stroke()},setUpNextFrame_:function(a){var c=this.options;_.isNull(this.animStartTime_)&&(this.animStartTime_=a);var a=a-this.animStartTime_,d=this.getStep_(a,0,c.score,c.animationLength),e=this.getScoreStep_(a,0,c.score,c.animationLength);a<c.animationLength?(!1!==c.scoreIncrement&&1===this.currentFrameCount_&&this.scoreContainer_.text(this.getScoreStep_(a,0,e,c.animationLength).toFixed(2)),
this.currentFrameCount_=this.currentFrameCount_>=c.scoreIncrementFrameSkip?1:++this.currentFrameCount_,this.draw_(d),window.requestAnimationFrame(this.setUpNextFrame_)):this.setUpStatic_();a>c.animationLength*c.scoreEffectDelay&&_.isString(c.scoreEffectClass)&&this.scoreContainer_.addClass(c.scoreEffectClass)},onGradientLoaded_:function(){this.gradientPattern_=null},defaultTiming:function(a,c,d,e){return(a/=e)<1/2.75?d*7.5625*a*a+c:a<2/2.75?d*(7.5625*(a-=1.5/2.75)*a+0.75)+c:a<2.5/2.75?d*(7.5625*(a-=
2.25/2.75)*a+0.9375)+c:d*(7.5625*(a-=2.625/2.75)*a+0.984375)+c},defaultScoreTiming:function(a,c,d,e){return d*Math.sqrt(1-(a=a/e-1)*a)+c}});d.STYLES={LIGHT:"#D0D7E0",DARK:""};d.ANIMATION_TIMINGS={NONE:!1,BOUNCE:d.prototype.defaultTiming,EXPONENTIAL:d.prototype.defaultScoreTiming}})(Badoo,Zepto);Badoo=Badoo||{};
(function(a){var f=a.config,g=a.Session,d=a.History,b=a.Views.App,c=a.Utils.Persistence,h=a.Utils.Update,e=a.Utils.Push,j=null,i=a.Proto.Object.isProtoObject,l=a.Models.Folders.TYPES.MESSAGES,o={"own-profile:settings":b.TRANSITIONS.SLIDE_UP,"settings:own-profile":b.TRANSITIONS.SLIDE_DOWN},p=a.Controllers.App=Badoo.Controller.extend({modalControllerActive:!1,loadControllerInProgress:!1,newVersionIsAvailable_:!1,loadControllerQueue:[],hasStartedSession_:!1,integrationHash:[/^(push)\/((%7B|\{).*(%7D|\}))$/,
/^(openUrl)\/((%7B|\{).*(%7D|\}))$/,/^(fbLogin)\/((%7B|\{).*(%7D|\}))$/],init:function(){_.bindAll(this);this.registerView("app",new b).on("menu-item-select",this.onSideMenuItemSelect_);this.registerModel("profile",new a.Models.Profiles);a.GlobalEvents.on("force-logout",this.onForcedLogout_);a.GlobalEvents.on("native-push",this.onPush);a.GlobalEvents.on("native-openurl",this.onOpenUrl);var c=g.getInstance();c.on("DataIncompleteError",this.onDataIncomplete_);c.on("logout",this.onSessionLogout);c.on("login",
this.onSessionLogin);c.on("login-response",this.onSessionLoginResponse_);a.NativeBridge.getInstance().isNative()||(c=h.getInstance(),c.on(h.EVENTS.NEW_VERSION,this.onNewVersionAvailable_),c.init());e.getInstance().on(e.PUSH_TYPES.CLIENT_PERSON_NOTICE,this.onPersonNoticeReceived_)},onStart:function(){a.UI.init(this.getView("app").getElement());this.getParent().prepend(this.getView("app").getElement());d.on("change",this.hashChange).start();a.Utils.location.init()},hashChange:function(b){if(this.newVersionIsAvailable_)window.location.reload();
else{var c=b?b.hash:null;if(_.isString(c)){var e=this.isIntegrationHash(c),h=e?this.getIntegrationHashData(c):null;if(this.hasStartedSession_)if(this.modalControllerActive)d[b.back?"forward":"back"]();else{if(!e||!this[this.getIntegrationMethod(c)].call(this,h))a.Router.hasRoute(c)?(this.timing.actionStart(a.Router.getRoute(c)+"/open"),this.loadController(a.Router.getRouteHandler(c),a.Router.decodeParams(c),b.back)):a.Utils.Dependencies.has("stage2")?null!==this.getController("current")?d.back():
d.navigate(f.get("default.page"),!0):a.Utils.Dependencies.require("stage2",_.partial(this.hashChange,c))}else{var i=c=null;e&&_.isString(h.sessionId)&&(c=h.sessionId);e&&_.isString(h.badooContinue)&&(i=h.badooContinue);e=g.getInstance();e.once("session-startup",_.bind(function(){this.hashChange.call(this,b)},this));this.hasStartedSession_=!0;e.sessionStartup(null,c,i)}}}},loadController:function(c,e,h){if(this.loadControllerInProgress)this.loadControllerQueue.push(_.toArray(arguments));else{var i=
this.getController("current"),l=this.getView("app");if(i===c)c.updateParameters(e),a.View.enableEvents();else{a.View.disableEvents();var j=g.getInstance().isLoggedIn(),n=c.requiresAuthentication()?j:c.requiresAnonymous()?!j:!0;if(i&&n)i.stop(),i.off("menu-open",this.onOpenSideMenu_);else{if(i&&!n){d.navigate(a.Router.encodeRoute(i.getName(),_.defaults(e,i.getParameters())),!0);a.View.enableEvents();return}if(!n){j||(e=_.defaults({forward:a.Router.encodeRoute(c.getName(),e)},e));d.navigate(a.Router.encodeRoute(f.get("default.page"),
e),!0);a.View.enableEvents();return}}this.timing.event("load-controller-start",{controller:c.getName()});this.loadControllerInProgress=!0;this.registerController("current",c);j=l.getNextPage();c.start(j,e);l.once("animation-complete",_.bind(function(){this.timing.event("load-controller-end");c.ready();a.GlobalEvents.trigger("page-animation-complete");a.GlobalEvents.trigger("controller-loaded",{name:c.getName(),title:c.getTitle()});this.loadControllerInProgress=!1;0<this.loadControllerQueue.length?
this.loadController.apply(this,this.loadControllerQueue.shift()):(c.on("menu-open",this.onOpenSideMenu_),a.View.enableEvents())},this));j=b.TRANSITIONS.SLIDE_LEFT;i=this.getTransitionKey(i,c);_.has(o,i)?j=o[i]:h&&(j=b.TRANSITIONS.SLIDE_RIGHT);l.update({pageTransition:{name:c.getName(),transition:j}})}}},getTransitionKey:function(a,b){return(a?a.getName():"")+":"+b.getName()},startModalController:function(b,c,e,d){if(!0!==this.modalControllerActive){var f=this.getController("current");if(f){f.disable();
f=this.getController(b);f||(f=new c(b),this.registerController(b,f));this.modalControllerActive=!0;f.on("stop",_.partial(this.onModalControllerStop,b));var g;d||(g=this.getView("app").getModalContainer(b));f.start(g,e)}else a.GlobalEvents.once("controller-loaded",_.partial(this.startModalController,b,c,e))}},onModalControllerStop:function(a){this.getController(a).off("stop");this.getView("app").removeModalContainer(a);this.removeController(a);(a=this.getController("current"))?a.enable():d.navigate(f.get("default.page"),
!0);this.modalControllerActive=!1},onSessionLogin:function(b){if(!b||!b.result||!b.userId)a.Utils.Cache.destroy();else{var e=c.getInstance();j=e.getString("Cache::uid");j!==b.userId&&a.Utils.Cache.destroy();j=b.userId;e.saveString("Cache::uid",j);a.Api.getInstance().flushRequests();this.updateSideMenu_()}},onSessionLogout:function(){this.hasStartedSession_=!1;a.Utils.Cache.destroy();c.getInstance().remove("Cache::uid");d.navigate(f.get("default.page"),!0)},onSessionLoginResponse_:function(){this.timing.setUrl(g.getInstance().getJinbaUrl())},
onSideMenuItemSelect_:function(b){this.getController("current")&&this.getController("current").getName()===b.name?this.getView("app").update({appMenuToggle:!0}):"add-photos"===b.name?this.startModalController("add-photos",a.Controllers.AddPhotosPopup,null,!0):(this.getView("app").once("menu-close",function(){d.navigate(a.Router.encodeRoute(b.name))}),this.getView("app").update({appMenuToggle:!0}))},onOpenSideMenu_:function(){this.getView("app").update({appMenuToggle:!0})},updateSideMenu_:function(b){var c,
e=_.bind(function(a,e,d){"notifications"===a&&(b=e?null:d);"profile"===a&&(c=e?null:d);if(!_.isUndefined(b)&&!_.isUndefined(c)){var a=c?c.extract("person.name"):"",e=c?c.extract("person.previewImageId"):"",d=c?c.extract("status.distanceShort"):"",f=i(b)?parseInt(b.extract("HON_MESSAGES.count"),10):_.isNumber(b)?b:NaN,g=!_.isNaN(f)&&0<f;this.getView("app").update({appMenu:{userName:a,userLocation:d,userPhoto:e,items:[{title:_t.str_launcher_hot_or_not,page:"encounters"},{page:"matches",title:_t.str_launcher_connections,
hasNotificationsBadge:g,notifications:f}]}})}},this);_.isUndefined(b)&&a.Api.getInstance().request("getMenuBadgeCounters",{init:!0},_.partial(e,"notifications"));this.getModel("profile").get(a.Session.getInstance().getUserId(),_.partial(e,"profile"))},onPersonNoticeReceived_:function(a){i(a)&&a.extract("folder")===l&&this.updateSideMenu_(a.extract("unreadCount"))},onForcedLogout_:function(){(new a.Views.Alert).update({type:a.Views.Alert.TYPES.INFO,message:"Your session has expired please login again",
title:"Session Expiry",onDismiss:function(){g.getInstance().logout(!0)}})},onPush:function(a){return this.onIntegration(a)},onOpenUrl:function(b){if(!b||!_.isString(b.url))return!1;b=b.url;a.Router.hasRoute(b)?(window.history.replaceState({},document.title,"#"+f.get("default.page")),d.navigate(b,!1)):this.hashChange({hash:b,back:!1});return!0},onDataIncomplete_:function(b){if(i(b))if(this.getController("current")){var c=b.extract("incompleteData.dataType");c&&0<c.length&&("USER_PHONE_NUMBER"===_.first(c)?
this.startModalController("phone-verification",a.Controllers.PhoneVerification):this.startModalController("incomplete",a.Controllers.IncompleteProfileAction,b.extract("basicInfo")))}else a.GlobalEvents.once("controller-loaded",_.partial(this.onDataIncomplete_,b))},onFbLogin:function(b){if(!b||!b.accessToken)return!1;var c=g.getInstance(),e=_.bind(function(g){if(g&&g.result)this.onOpenUrl({url:b.url||f.get("default.page")});else if(c.handleIncompleteData(g))c.once("login",e);else g&&g.message&&(new a.Views.Alert).update({type:a.Views.Alert.TYPES.ERROR,
message:g.message,onDismiss:function(){d.navigate(f.get("default.page"),!0)}})},this);c.once("login",e);c.loginFacebook(b.accessToken);return!0},onIntegration:function(b){var b=b||{},c=this.getController("current");c?d.navigate(a.Router.encodeRoute(c.getName(),_.defaults(b,c.getParameters())),!0):d.navigate(a.Router.encodeRoute(f.get("default.page"),b),!0);return!0},isIntegrationHash:function(a){return null!==this.getIntegrationMethod(a)},getIntegrationMethod:function(a){for(var b=0;b<this.integrationHash.length;b++){var c=
this.integrationHash[b].exec(a);if(c&&2<=c.length)return a="on"+c[1].charAt(0).toUpperCase()+c[1].substring(1),_.isFunction(this[a])?a:"onIntegration"}return null},getIntegrationHashData:function(a){for(var b={},c=0;c<this.integrationHash.length;c++){var e=this.integrationHash[c].exec(a);if(e&&2<=e.length){if(3<=e.length&&e[2]){a=e[2];5<=e.length&&decodeURIComponent(e[3])!==e[3]&&(a=decodeURIComponent(a));try{b=JSON.parse(a)}catch(d){this.log.error("Failed to parse integration hash json ",d)}}break}}return b},
onNewVersionAvailable_:function(){this.newVersionIsAvailable_=!0}}),n;p.getInstance=function(){return n||(n=new p("app"))}})(Badoo);Badoo=Badoo||{};
(function(a){var f=a.Views.Header.DISPLAY_TYPE,g=a.Views.PageMenu,d=a.History,b=a.Router;a.Controllers.PageController=a.Controller.extend({init:function(){var b=new g;this.registerView("page-menu",b);b.on("button-selected",_.bind(this.onPageMenuButtonSelect,this));b.update({buttons:this.getPageMenuButtons()});this.registerView("header",new a.Views.Header({title:this.getTitle(),displayType:this.getHeaderType()}))},onStart:function(){var a=this.getParent();this.getView("header").appendTo(a);this.getView("page-menu").appendTo(a);
this.setHeaderTypeClass()},setHeaderType:function(a){var b=this.getHeaderType();this.getHeaderType=function(){return a};this.updateView("header",{displayType:a});this.getParent().removeClass(b===f.SOLID?"has-header-solid":"has-transparent-header");this.setHeaderTypeClass()},getHeaderType:function(){return a.Views.Header.DISPLAY_TYPE.TRANSPARENT},setHeaderTypeClass:function(){var a=this.getHeaderType();a===f.TRANSPARENT?this.getParent().addClass("has-transparent-header"):(a===f.SOLID||a===f.HIGHLIGHTED)&&
this.getParent().addClass("has-solid-header")},getPageMenuButtons:function(){return[]},onPageMenuButtonSelect:function(b){b.button===g.Buttons.BACK?(this.getView("page-menu").disable(),a.History.back()):b.button===g.Buttons.MENU?this.trigger("menu-open"):b.button.href&&(this.timing.actionStart({name:b.button.href+"/open",startTime:b.timestamp}),this.navigate(b.button.href))},navigate:function(a,f,e){d.navigate(b.encodeRoute(a,f),!!e)},requiresAuthentication:function(){return!0},requiresAnonymous:function(){return!1}})})(Badoo);
Badoo=Badoo||{};
(function(a){var f=a.config,g=a.Utils.Analytics,d={NORMAL:0,LEGACY_LANDING:1,AWARDS_LANDING:2,INVITE_LANDING:3},b={WEB_LANDING:1,LANDING:2},c=a.Controllers.LandingPage=a.Controllers.PageController.extend({currentState_:null,init:function(){_.bindAll(this);c._super.init.apply(this,arguments);var d=a.Views.LandingPage,e=this.registerView("landing-page",new d);e.on(d.EVENTS.FACEBOOK_CONNECT,this.onFacebookConnect_);e.on(d.EVENTS.EMAIL_SIGN_UP,this.onEmailSignUp_);if(e.getType()===b.WEB_LANDING)e.on(d.EVENTS.TERMS_OF_SERVICE,this.loadTermsOfService_),
e.on(d.EVENTS.PRIVACY_POLICY,this.loadPrivacyPolicy_),e.on(d.EVENTS.GO_TO_BADOO,this.onGoToBadoo_),e.on(d.EVENTS.GO_TO_APPSTORE,this.onGoToAppStore_);else e.on(d.EVENTS.CAROUSEL_SLIDE_CHANGE,this.track_)},onStart:function(){c._super.onStart.apply(this,arguments);var b=a.Session.getInstance(),e=this.getView("landing-page"),f=!0;if(_.isString(this.getParameter("badooContinue")))this.currentState_=d.LEGACY_LANDING,e.update({state:this.currentState_,legacyContinueUrl:this.getParameter("badooContinue")});
else if(_.isString(this.getParameter("inviteCode")))if(f=!1,null===b.getSessionId())b.once("session-startup",this.onInviteDataRequest_);else this.onInviteDataRequest_(b);else e.update({state:d.NORMAL});e.appendTo(this.getParent());e.hideLoading();b.on("login",this.onLogin_);b.on("login-pending",this.onLoginPending_);b.on("fb-connected",this.onForceLogin_);f&&this.track_()},onStop:function(){var b=a.Session.getInstance();b.off("login",this.onLogin_);b.off("login-pending",this.onLoginPending_);b.off("fb-connected",
this.onForceLogin_);this.getView("landing-page").hideLoading()},getHeaderType:function(){return a.Views.Header.DISPLAY_TYPE.NONE},requiresAuthentication:function(){return!1},requiresAnonymous:function(){return!0},onParametersChange:function(){this.onStart()},onInviteDataRequest_:function(b){if(b&&null!==b.getSessionId())a.Api.getInstance().request("getInviteData",{inviteCode:this.getParameter("inviteCode")},this.onInviteDataReceived_);else this.onInviteDataReceived_("No valid session to make API request")},
onInviteDataReceived_:function(b,c){var f=c.extract("inviteType");if("AWARD_INVITE"===f)this.currentState_=d.AWARDS_LANDING;else if("PLAIN_INVITE"===f)this.currentState_=d.INVITE_LANDING;else{this.navigate("landing",_.omit(this.getParameters(),"inviteCode"),!0);return}this.track_();f=this.getView("landing-page");b||!a.Proto.Object.isProtoObject(c)||"InviteData"!==c.getClass()?this.navigate("landing",_.omit(this.getParameters(),"inviteCode"),!0):f.update({state:this.currentState_,inviteText:c.extract("inviteText"),
actionText:c.extract("actionText"),inviterPhoto:c.extract("inviter.previewImageId"),promoImages:c.extract("imageUrls")})},onFacebookConnect_:function(){this.currentState_===d.AWARDS_LANDING&&a.Api.getInstance().request("registrationStats",{action:"REGISTRATION_ACTION_STARTED",method:"REGISTRATION_METHOD_FACEBOOK"});var b=a.Session.getInstance();if(b.requireActiveSession()||a.NativeBridge.getInstance().isNative())g.getInstance().sendEvent(g.EVENT.CATEGORY.USER_ACTION,g.EVENT.ACTION.SIGN_IN,g.EVENT.LABEL.FACEBOOK),
b.loginFacebook()},onEmailSignUp_:function(b){this.currentState_===d.AWARDS_LANDING&&a.Api.getInstance().request("registrationStats",{action:"REGISTRATION_ACTION_STARTED",method:"REGISTRATION_METHOD_EMAIL"});this.timing.actionStart({name:"sign-up/open",startTime:b&&b.timestamp});this.navigate("sign-up")},onLogin_:function(b){if(b&&(b.result||"DataIncompleteError"===b.errorCode)){var c=this.getParameter("forward")||f.get("default.page");"landing"!==c&&(this.timing.actionStart(c+"/open"),this.navigate(c,
null,!0))}else if(!b.errorCode||b.errorCode&&"DataIncompleteError"!==b.errorCode)this.currentState_===d.AWARDS_LANDING&&a.Api.getInstance().request("registrationStats",{action:"REGISTRATION_ACTION_CANCELLED",method:"REGISTRATION_METHOD_FACEBOOK"}),c=this.getView("landing-page"),g.getInstance().sendEvent(g.EVENT.CATEGORY.ERROR,g.EVENT.ACTION.SIGN_IN,g.EVENT.LABEL.FACEBOOK),c.hideLoading(function(){b&&b.message&&(new a.Views.Alert).update({type:a.Views.Alert.TYPES.ERROR,message:b.message})})},onForceLogin_:function(b){a.Session.getInstance().loginFacebook(b)},
onLoginPending_:function(){this.getView("landing-page").showLoading()},loadTermsOfService_:function(){this.navigate("legal",{document:"terms"})},loadPrivacyPolicy_:function(){this.navigate("legal",{document:"privacy"})},onGoToAppStore_:function(){window.location="//"+a.config.get("api.defaultHostname")+"/appstore"},onGoToBadoo_:function(){this.getParameter("badooContinue")&&(window.location=this.getParameter("badooContinue"))},track_:function(a){switch(this.getView("landing-page").getType()){case b.LANDING:a=
_.isNumber(a)?a:1;g.getInstance().trackPage(g.PAGE["APP_LANDING"+a]);break;case b.WEB_LANDING:switch(this.currentState_){case d.AWARDS_LANDING:g.getInstance().trackPage(g.PAGE.WEB_LANDING_AWARDS);break;case d.INVITE_LANDING:g.getInstance().trackPage(g.PAGE.WEB_LANDING_INVITE);break;case d.LEGACY_LANDING:g.getInstance().trackPage(g.PAGE.WEB_LANDING_BADOO);break;default:g.getInstance().trackPage(g.PAGE.WEB_LANDING)}}}});c.STATES=d;c.VIEW_TYPES=b})(Badoo);Badoo=Badoo||{};
(function(a){var f=a.Utils.Analytics,g=a.Views.PageMenu.Buttons,d=a.Models.Encounters,b=a.Views.Encounters,c=a.Views.ConfirmPopup,h=a.Proto.EncountersVoteResponse.ACTIONS,e=a.config,j=a.Utils.Cache,i,l=a.Models.Folders.TYPES.MESSAGES,o=!1,p=a.Controllers.Encounters=a.Controllers.PageController.extend({myProfile:null,pendingVote_:null,queueLength_:0,firstImageLoaded_:!1,init:function(){p._super.init.apply(this,arguments);_.bindAll(this);i=a.NativeBridge.getInstance().isNative();this.registerModel("notifications",
new a.Models.Notifications);this.registerModel("encounters",new d);var e=this.registerModel("notifications",new a.Models.Notifications);this.registerModel("profiles",new a.Models.Profiles);this.registerView("popup",new a.Views.MutualAttractionPopup);this.getView("popup").on(a.Views.MutualAttractionPopup.ACTIONS.START_CHAT,this.onStartChat);this.getView("popup").on(a.Views.MutualAttractionPopup.ACTIONS.CONTINUE,this.onContinue_);var f=new a.Views.ConfirmPopup;f.setButtonsKind(c.BUTTON_KIND.OK,c.BUTTON_KIND.CANCEL);
this.registerView("filter-change",f);this.getView("filter-change").on(c.ACTIONS.YES,this.onEditFilter_);this.getView("filter-change").on(c.ACTIONS.NO,this.onContinue_);this.registerController("add-photos-popup",new a.Controllers.AddPhotosPopup("encounters-add-photos"));f=this.registerView("encounters",new b);f.on(b.ACTIONS.VOTE_START,this.onVoteStart_);f.on(b.ACTIONS.VOTE,this.onVote_);f.on(b.ACTIONS.VOTE_END,this.onVoteEnd_);f.on(b.ACTIONS.NEW_ENCOUNTER,this.onNewEncounter_);f.on(b.ACTIONS.TRY_AGAIN,
this.fetchEncounters_);f.on(b.ACTIONS.VIEW_PROFILE,this.onViewProfile_);f.on(b.ACTIONS.MINIMIZE,this.onMinimizeProfile_);f.on(b.ACTIONS.CURRENT_IMAGE_LOADED,this.onCurrentImageLoad_);f.on(b.ACTIONS.IMAGE_LOAD_ERROR,this.onImageLoadError_);e.get({init:!0},_.bind(this.updateNotificationsCounter_,this))},onStart:function(){p._super.onStart.apply(this,arguments);this.queueLength_=0;var a=this.getModel("encounters");a.on("invalidated",this.onEncountersInvalidated_);a.on(d.ACTIONS.NO_MORE_DATA,this.onNoMoreData_);
a.on(d.ACTIONS.OFFLINE,this.onOffline_);a.on(d.ACTIONS.NO_ACTION,this.onVoteNoAction_);a.on(d.ACTIONS.REQUIRED_ACTION,this.onRequiredAction_);this.getView("encounters").appendTo(this.getParent());this.setProfileButtonImage_();f.getInstance().trackPage(f.PAGE.ENCOUNTERS);if(i)BadooNative.events.on(BadooNative.events.RESUME,this.fetchEncounters_)},onReady:function(){this.firstImageLoaded_&&this.timing.actionEnd("encounters/open");this.getView("encounters").resize();this.getEncounters_()},enable:function(){if(!0===
a.Session.getInstance().requiresPhotoUpload())this.onAddPhotos_({title:_t.encounters_add_photos_title,description:_t.encounters_add_photos_description,cancelText:_t.btn_skip});p._super.enable.apply(this,arguments)},onStop:function(){this.firstImageLoaded_=!1;var a=this.getModel("encounters");a.off("invalidated",this.onEncountersInvalidated_);a.off(d.ACTIONS.NO_MORE_DATA,this.onNoMoreData_);a.off(d.ACTIONS.NO_ACTION,this.onVoteNoAction_);a.off(d.ACTIONS.REQUIRED_ACTION,this.onRequiredAction_);i&&BadooNative.events.off(BadooNative.events.RESUME,
this.fetchEncounters_)},getTitle:function(){return""},getPageMenuButtons:function(){return[g.MENU,g.PROFILE_INFO]},onParametersChange:function(a){if(!a.added.id&&a.removed.id)this.onMinimizeProfile_()},onPageMenuButtonSelect:function(b){if(b.button===g.PROFILE_INFO)if(this.getParameter("id"))a.History.back();else this.onViewProfile_();else p._super.onPageMenuButtonSelect.apply(this,arguments)},onRequiredAction_:function(a){this.getModel("encounters").off(d.ACTIONS.REQUIRED_ACTION,this.onRequiredAction_);
switch(a.action){case h.ADD_PHOTOS:this.onAddPhotos_();break;case h.MUTUAL_ATTRACTION:this.onMutualAttraction_(a);break;case h.SETTINGS_MESSAGE:this.onDisplaySettingsMessage(a)}},onVoteNoAction_:function(b){b&&b.lastVote===a.Models.Encounters.VOTE_TYPE.YES&&this.doCheckAppRate_(b.yesVotes)&&this.doCheckAppPrompt_(b.yesVotes)},doCheckAppRate_:function(b){if(i&&($.os.ios||$.os.android)&&a.Session.getInstance().isRateableSession()){if(0>=b)return!1;var c=j.getInstance("app-rating-"+a.NativeBridge.getInstance().getNativeVersion());
if(!_.isNull(c.get("declined"))||!_.isNull(c.get("rated")))return!1;var b=parseInt(c.get("later"),10),d=(new Date).getTime(),g=(new Date("3013")).getTime()-d;if(_.isNumber(b)&&864E5>d-b)return!1;b=new BadooNative.Notification(_t.rate_app_title,$.os.ios?_t.rate_app_ios_message:_t.appirater_message_android,[_t.rate_app_yes_button,_t.rate_app_later_button,_t.rate_app_no_button]);b.on(BadooNative.Notification.ACTIONS.BUTTON_PRESS,_.bind(function(a){a=a&&a.button;_.isNumber(a)||(a=1);switch(a){case 0:f.getInstance().sendEvent(f.EVENT.CATEGORY.USER_ACTION,
f.EVENT.ACTION.REDIRECT,f.EVENT.LABEL.APP_RATE);c.put("rated",d,g);window.open("https://"+e.get("api.defaultHostname")+"/appreview","_system");break;case 1:c.put("later",d,g);break;case 2:c.put("declined",d,g)}this.onContinue_()},this));f.getInstance().trackPage(f.PAGE.ENCOUNTERS_APP_RATE);b.show();return!0}return!1},doCheckAppPrompt_:function(a){if(!i&&($.os.ios||$.os.android)&&5<=a){var a=j.getInstance("app-promo"),b=parseInt(a.get("last-shown"),10),d=(new Date).getTime();if(!b||864E5<d-b)return a.put("last-shown",
d,1728E5),a=new c,a.on(c.ACTIONS.YES,_.bind(function(){f.getInstance().sendEvent(f.EVENT.CATEGORY.USER_ACTION,f.EVENT.ACTION.REDIRECT,f.EVENT.LABEL.APP_DOWNLOAD);window.location.href="https://"+e.get("api.defaultHostname")+"/appstore"},this)),a.on(c.ACTIONS.NO,this.onContinue_),f.getInstance().trackPage(f.PAGE.ENCOUNTERS_APP_PROMO),a.update({yesText:_t.btn_getApp,noText:_t.btn_notNow,message:_t.native_app_prompt_text([$.os.ios?"iOS":"Android"])}),!0}return!1},updateNotificationsCounter_:function(a,
b){if(!a){var c=b.extract(l);c&&this.updateView("page-menu",{notification:c.extract("count")})}},onEncountersInvalidated_:function(){this.getView("encounters").reset()},onMutualAttraction_:function(a){this.getMyProfile_(function(b){f.getInstance().trackPage(f.PAGE.ENCOUNTERS_MATCH);this.updateView("popup",{myImageUrl:b.getPreviewImage(),myName:b.extract("person.name"),theirImageUrl:a.searchResult.getLargeImage(),theirId:a.searchResult.extract("person.uid"),theirName:a.searchResult.extract("person.name")})})},
onStartChat:function(a){this.navigate("chat",{id:a.id})},onContinue_:function(){a.Session.getInstance().requiresPhotoUpload(!1);this.getModel("encounters").on(d.ACTIONS.REQUIRED_ACTION,this.onRequiredAction_);f.getInstance().trackPage(f.PAGE.ENCOUNTERS)},onAddPhotos_:function(a){f.getInstance().trackPage(f.PAGE.ENCOUNTERS_PHOTO_PROMPT);var b=this.getController("add-photos-popup");b.once("stop",_.bind(function(){this.onContinue_()},this));b.start(this.getParent(),a)},onDisplaySettingsMessage:function(a){f.getInstance().trackPage(f.PAGE.ENCOUNTERS_FILTER_PROMPT);
this.getView("filter-change").update({message:a.encountersVoteResponse.extract("message"),yesText:_t.btn_ok,noText:_t.appirater_nothanks})},onEditFilter_:function(){this.navigate("settings-filter")},onMinimizeProfile_:function(){a.History.navigate(a.Router.encodeRoute("encounters",{id:null}));this.updateView("encounters",{state:b.STATES.GAME})},onViewProfile_:function(){this.updateView("encounters",{state:b.STATES.PROFILE});var c=this.getView("encounters").getCurrentEncounter().getPersonId();a.History.navigate(a.Router.encodeRoute("encounters",
{id:c}));this.getModel("profiles").get({id:c,visitingSource:"CLIENT_SOURCE_ENCOUNTERS"},this.updateProfileInfo_);f.getInstance().trackPage(f.PAGE.PROFILE);return this},updateProfileInfo_:function(a,b){a||this.updateView("encounters",{profile:b})},getEncounters_:function(){this.getModel("encounters").get(this.onEncountersReceived_)},fetchEncounters_:function(){this.getModel("encounters").fetch(this.onEncountersReceived_)},onEncountersReceived_:function(a,b){a||(this.queueLength_=b.length,0<this.queueLength_&&
(this.updateView("encounters",{searchResults:b}),this.updateView("page-menu",{buttons:this.getPageMenuButtons()})))},onVoteStart_:function(a){this.timing.actionStart("encounters-vote",{startTime:a&&a.timestamp})},onVote_:function(a){a.voteType=a.voteType===b.ACTIONS.VOTE_YES?d.VOTE_TYPE.YES:d.VOTE_TYPE.NO;this.getModel("encounters").set(a);switch(a.voteType){case d.VOTE_TYPE.YES:f.getInstance().sendEvent(f.EVENT.CATEGORY.USER_ACTION,f.EVENT.ACTION.VOTE,f.EVENT.LABEL.YES);break;case d.VOTE_TYPE.NO:f.getInstance().sendEvent(f.EVENT.CATEGORY.USER_ACTION,
f.EVENT.ACTION.VOTE,f.EVENT.LABEL.NO)}10>--this.queueLength_&&this.fetchEncounters_()},onVoteEnd_:function(){this.timing.actionEnd("encounters-vote")},setProfileButtonImage_:function(){this.getMyProfile_(function(a){this.updateView("page-menu",{ownProfilePhoto:a.getPreviewImage()})})},getMyProfile_:function(b){_.isFunction(b)&&this.getModel("profiles").get({id:a.Session.getInstance().getUserId(),visitingSource:"CLIENT_SOURCE_ENCOUNTERS"},_.bind(function(a,c){a||b.call(this,c)},this))},onImageLoadError_:function(a){this.getModel("encounters").removeFromQueue(a)},
onCurrentImageLoad_:function(){this.firstImageLoaded_=!0;this.timing.event("view-update-end");this.isReady()&&this.timing.actionEnd("encounters/open");o||(o=!0,this.getParameter("id")===this.getView("encounters").getCurrentEncounter().extract("person.uid")?setTimeout(_.bind(function(){this.onViewProfile_()},this),500):this.getModel("profiles").get({id:this.getView("encounters").getCurrentEncounter().getPersonId(),visitingSource:"SOURCE_ENCOUNTERS"},_.bind(function(a,b){a||this.updateView("encounters",
{doProfileDemo:!0,profile:b})},this)))},onNoMoreData_:function(){0<this.queueLength_||(this.updateView("page-menu",{buttons:[g.MENU]}),this.updateView("header",{title:""}),this.updateView("encounters",{state:b.STATES.NO_MORE}))},onOffline_:function(){0<this.queueLength_||this.updateView("encounters",{state:b.STATES.OFFLINE})},onNewEncounter_:function(a){this.updateView("header",{title:a.getName(),animate:!0});this.updateView("encounters",{profile:null})}})})(Badoo);Badoo=Badoo||{};
(function(a){var f=a.Views.PageMenu.Buttons,g=a.Views.Matches,d=a.Models.Folders,b=a.History,c=a.Router,h=a.Utils.Analytics,e=a.Utils.Push,j=a.Controllers.Matches=a.Controllers.PageController.extend({currentFilter_:g.FILTERS.ALL,doUpdateOnExitSearchFilter_:!1,init:function(){j._super.init.apply(this,arguments);_.bindAll(this);var b=this.registerModel("folders",new d);b.setFolderId(d.TYPES.MESSAGES);b.on(d.EVENTS.NO_MORE_DATA,this.onNoMoreData_);b=new g;this.registerView("matches",b);this.registerView("matches-actions",
new a.Views.ActionsFooter({buttons:[{label:_t.interets_your_edit_delete_btn,className:"negative-button",callback:this.onBatchMessageDelete_}]}));b.on(g.EVENTS.ITEM_DELETE,this.onMessageDelete_);b.on(g.EVENTS.ITEM_DELETE_ENABLE,this.updateEditButton_);b.on(g.EVENTS.ITEM_DELETE_DISABLE,this.updateEditButton_);b.on(g.EVENTS.ITEM_SELECTED,this.onMessageSelect_);b.on(g.EVENTS.FILTER_CHANGE,this.onFilterChange_);b.on(g.EVENTS.SEARCH_SUBMIT,this.onSearchSubmit_);b.on("pull-to-refresh",this.updateMessages_);
b.on("scroll-bottom",this.fetchMessages_)},onStart:function(){j._super.onStart.apply(this,arguments);this.trackFilterChange_(this.currentFilter_);this.getView("page-menu").update({buttons:this.getPageMenuButtons()});e.getInstance().on(e.PUSH_TYPES.CLIENT_PERSON_NOTICE,this.onClientPersonNotice_)},onReady:function(){this.getView("matches").appendTo(this.getParent());var a=this.getParameter("filter");this.updateView("matches",{state:g.STATES.DEFAULT});!a&&this.currentFilter_===g.FILTERS.SEARCH&&(this.currentFilter_=
g.FILTERS.ALL,this.getModel("folders").setFilter(this.currentFilter_),this.updateView("matches",{filter:g.FILTERS.ALL}));if(a===g.FILTERS.SEARCH.toLowerCase())this.onFilterChange_({filter:g.FILTERS.SEARCH});else this.getView("matches").triggerPullToRefresh()},onStop:function(){this.getView("matches-actions").hide(this.getParent());this.updateView("matches",{state:g.STATES.DEFAULT,actionsFooterVisible:!1});e.getInstance().off(e.PUSH_TYPES.CLIENT_PERSON_NOTICE,this.onClientPersonNotice_);this.doUpdateOnExitSearchFilter_=
!1},getTitle:function(){return _t.str_launcher_connections},getHeaderType:function(){return a.Views.Header.DISPLAY_TYPE.HIGHLIGHTED},getPageMenuButtons:function(){return[f.MENU,f.EDIT]},getMessages_:function(){this.getModel("folders").get(this.updateView_)},fetchMessages_:function(){this.getModel("folders").fetch(this.updateView_)},updateMessages_:function(){this.getModel("folders").update(this.updateView_)},updateView_:function(b,c){b||!a.Proto.Object.isProtoObject(c)?(this.updateView("matches"),
this.timing.actionEnd("matches/open")):(this.timing.event("update-view-start"),this.updateView("matches",{items:c.getMessages()}),this.timing.event("update-view-end").actionEnd("matches/open"))},onNoMoreData_:function(){this.updateView("matches",{noMoreItems:!0})},onPageMenuButtonSelect:function(a){if(a.button===f.EDIT){var b=a.action===f.EDIT.actions.EDIT;this.getView("matches-actions").render().toggle(b,this.getParent());this.updateView("matches",{state:b?g.STATES.EDIT:g.STATES.DEFAULT,actionsFooterVisible:b,
actionsFooterHeight:this.getView("matches-actions").getHeight()})}j._super.onPageMenuButtonSelect.apply(this,arguments)},onParametersChange:function(a){"search"===a.removed.filter&&(this.currentFilter_=g.FILTERS.ALL,this.onFilterChange_({filter:this.currentFilter_}))},updateEditButton_:function(){this.getView("page-menu").update({toggleEditButton:!0});h.getInstance().sendEvent(h.EVENT.CATEGORY.USER_ACTION,h.EVENT.ACTION.EDIT,h.EVENT.LABEL.MESSAGE)},onMessageDelete_:function(a){a.id&&(this.getModel("folders").removeUsers([a.id]),
h.getInstance().sendEvent(h.EVENT.CATEGORY.USER_ACTION,h.EVENT.ACTION.DELETE,h.EVENT.LABEL.MESSAGE))},onMessageSelect_:function(a){this.timing.actionStart({name:"chat/open",startTime:a.timestamp});this.navigate("chat",{id:a.id,name:a.name})},onBatchMessageDelete_:function(){var a=this.getView("matches").getSelectedItems();if(0!==a.length)return this.getModel("folders").removeUsers(a),this.getView("matches").update({multipleItemsDeleted:!0}),!0},onFilterChange_:function(a){this.currentFilter_===g.FILTERS.SEARCH?
b.back():(this.trackFilterChange_(a.filter),this.currentFilter_=a.filter,this.updateView("matches",{infiniteScroll:a.filter!==g.FILTERS.SEARCH,pullToRefresh:a.filter!==g.FILTERS.SEARCH,filter:a.filter}),this.getModel("folders").setFilter(a.filter),a.filter!==g.FILTERS.SEARCH?(this.getModel("folders").setSearch(null),this.doUpdateOnExitSearchFilter_?(this.doUpdateOnExitSearchFilter_=!1,this.updateMessages_()):this.getMessages_(),this.getParent().removeClass("has-search-filter")):(this.getParent().addClass("has-search-filter"),
b.navigate(c.encodeRoute("matches",{filter:g.FILTERS.SEARCH.toLowerCase()}))),this.getView("page-menu").update({buttons:this.getPageMenuButtons()}))},onSearchSubmit_:function(a){this.getModel("folders").setSearch(a.search).get(this.updateView_)},onClientPersonNotice_:function(b){a.Proto.Object.isProtoObject(b)&&b.extract("folder")===d.TYPES.MESSAGES&&(this.currentFilter_===g.FILTERS.SEARCH?this.doUpdateOnExitSearchFilter_=!0:this.updateView("matches",{showNewNotification:!0}))},trackFilterChange_:function(a){switch(a){case g.FILTERS.SEARCH:h.getInstance().trackPage(h.PAGE.MESSAGES_SEARCH);
break;case g.FILTERS.ALL:h.getInstance().trackPage(h.PAGE.MESSAGES_ALL);break;case g.FILTERS.CONVERSATIONS:h.getInstance().trackPage(h.PAGE.MESSAGES_CONVERSATIONS)}}})})(Badoo);Badoo=Badoo||{};
(function(a){var f=a.Views.PageMenu.Buttons,g=a.Views.Profile,d=a.Utils.Analytics,b=a.Controllers.Profile=a.Controllers.PageController.extend({album_:null,uid_:null,isOwnProfile_:!1,fetchedData_:!1,init:function(){b._super.init.apply(this,arguments);_.bindAll(this,"onProfileInvalidated_");var c=this.registerView("profile",new g("profile"));c.on(g.ACTIONS.MAXIMISED,_.bind(this.onProfileMaximised_,this));c.on(g.ACTIONS.MINIMISED,_.bind(this.onProfileMinimised_,this));this.registerModel("profile",new a.Models.Profiles);
this.registerModel("albums",new a.Models.Albums)},onStart:function(){b._super.onStart.apply(this,arguments);this.getView("profile").appendTo(this.getParent());this.getModel("profile").on("invalidated",this.onProfileInvalidated_);this.getProfileInfo_(this.getParameter("id"));this.isOwnProfile_?d.getInstance().trackPage(d.PAGE.OWN_PROFILE):d.getInstance().trackPage(d.PAGE.PROFILE)},onReady:function(){this.getView("profile").refresh();this.fetchedData_&&this.timing.actionEnd(this.getName()+"/open")},
onStop:function(){this.getModel("profile").off("invalidated",this.onProfileInvalidated_);this.fetchedData_=!1},onProfileMaximised_:function(){this.getParent().addClass("full-screen");this.isOwnProfile_?d.getInstance().trackPage(d.PAGE.OWN_PROFILE_FULL_SCREEN):d.getInstance().trackPage(d.PAGE.PROFILE_FULL_SCREEN)},onProfileMinimised_:function(){this.getParent().removeClass("full-screen");this.isOwnProfile_?d.getInstance().trackPage(d.PAGE.OWN_PROFILE):d.getInstance().trackPage(d.PAGE.PROFILE)},onProfileInvalidated_:function(a){(a.all||
_.isArray(a.keys)&&-1!==a.keys.indexOf(this.uid_))&&this.getProfileInfo_(this.uid_)},onPageMenuButtonSelect:function(a){a.button===f.MINIMIZE?this.updateView("profile",{toggleFullscreen:!0}):b._super.onPageMenuButtonSelect.apply(this,arguments)},getProfileInfo_:function(b){this.uid_=b;var d={profile:null,album:null,isOwnProfile:this.isOwnProfile_},e=!1,f=_.after(2,_.bind(function(){this.fetchedData_=!0;e||this.updateView("profile",d);this.isReady()&&this.timing.actionEnd(this.getName()+"/open")},
this));this.getModel("profile").get({id:b,visitingSource:"CLIENT_SOURCE_ENCOUNTERS"},_.bind(function(b,c){b||e?(e||a.History.back(),e=!0):c&&(d.profile=c);f()},this));this.getModel("albums").get({id:b,albumId:"me:"+b},_.bind(function(b,c){b||e?(e||a.History.back(),e=!0):c&&(d.album=c);f()},this))},getPageMenuButtons:function(){return[f.BACK,f.MINIMIZE]},getTitle:function(){return null}})})(Badoo);Badoo=Badoo||{};
(function(a){var f=a.Views.Chat,g=a.Views.PageMenu.Buttons,d=a.History,b=a.Utils.Push,c=a.Models.Folders,h=a.Utils.Analytics,e=a.Proto.ApplicationFeature.ACTIONS,j=a.Models.Folders.TYPES.MESSAGES,i=/^SIMPLE|MULTIMEDIA$/,l=/^[0-9]+$/,o=a.Controllers.Chat=a.Controllers.PageController.extend({hasSentMessage_:!0,hasReceivedMessage_:!0,currentOpenChatResponse_:null,init:function(){o._super.init.apply(this,arguments);_.bindAll(this);var e=a.Controllers.AddPhotosPopup.ACTIONS,d=this.registerController("add-photos-popup",
new a.Controllers.AddPhotosPopup("chat-add-photos"));this.registerModel("notifications",new a.Models.Notifications);this.registerModel("chat",new a.Models.Chat);this.registerModel("folders",(new c).setFolderId(c.TYPES.MESSAGES));var g=new f("chat");this.registerView("chat",g);g.on("message-submit",this.messageSend_);g.on("not-interested",this.notInterested_);g.on("reply-now",this.replyNow_);g.on("load-profile",this.loadProfilePage_);g.on("view-image",this.doImageNotify_);b.getInstance().on(b.PUSH_TYPES.CLIENT_CHAT_MESSAGE,
this.onChatMessageReceived_);this.getModel("chat").on("error",this.onChatLoadError_);this.getModel("chat").on("action-required",this.onActionRequired_);d.on(e.PHOTO_UPLOAD_CANCELLED,this.handleCancelPhotoUpload_);d.on(e.PHOTO_UPLOAD_FAIL,this.handleCancelPhotoUpload_);d.on(e.PHOTO_UPLOAD_SUCCESS,this.handlePhotoUploaded_)},onStart:function(){o._super.onStart.apply(this,arguments);l.test(this.getParameter("id"))||d.back();this.updateView("header",{title:this.getParameter("name")||""})},onReady:function(){var a=
this.getParameter("id"),b=this.getView("chat");b.reset().showLoading();b.appendTo(this.getParent());b.resize();this.getModel("chat").setUserId(a).get(this.handleOpenChatResponse_)},onStop:function(){this.currentOpenChatResponse_=null;this.getView("chat").stop()},getHeaderType:function(){return a.Views.Header.DISPLAY_TYPE.SOLID},getPageMenuButtons:function(){return[g.PROFILE,g.BACK]},onPageMenuButtonSelect:function(a){a.button===g.PROFILE&&this.navigate("profile",{id:this.getParameter("id")});o._super.onPageMenuButtonSelect.apply(this,
arguments)},loadProfilePage_:function(){this.navigate("profile",{id:this.getParameter("id")})},doImageNotify_:function(b){a.Api.getInstance().request("sendViewMultimedia",b)},handleOpenChatResponse_:function(a,b){if(a)this.timing.actionEnd("chat/open");else{this.currentOpenChatResponse_=b;var c=b.extract("openChat"),e=b.getChatMessages(),d={state:f.STATES.CHAT,theirPhoto:b.getTheirPhoto(),theirName:c.extract("user.name"),messages:e.all,theirId:this.getParameter("id")};this.updateView("header",{title:d.theirName});
0===e.all.length?(d.state=f.STATES.INITIAL_CHAT,h.getInstance().trackPage(h.PAGE.CHAT_OUTGOING)):0===e.yours&&(d.state=f.STATES.INITIAL_CHAT,h.getInstance().trackPage(h.PAGE.CHAT_INCOMING));this.hasSentMessage_=0!==e.yours;this.hasReceivedMessage_=0!==e.theirs;d.state!==f.STATES.CHAT?(d.connections=c.extract("friendsConnections.total"),d.interests=c.extract("interestsInCommon"),d.title=c.extract("title"),d.largePhoto=b.getTheirLargePhoto()):0===e.theirs?h.getInstance().trackPage(h.PAGE.CHAT_ONE_WAY_OUT):
h.getInstance().trackPage(h.PAGE.CHAT_CONVERSATION);this.updateView("chat",d);this.getView("chat").hideLoading();this.timing.actionEnd("chat/open");this.getModel("folders").setItemToRead(this.getModel("chat").userId);this.getModel("notifications").get({init:!0},_.bind(this.updateNotificationsCounter_,this))}},updateNotificationsCounter_:function(a,b){if(!a){var c=b.extract(j);c&&this.updateView("page-menu",{notification:c.extract("count")})}},onChatLoadError_:function(){(new Badoo.Views.Alert).update({onDismiss:_.bind(d.back,
d)})},onActionRequired_:function(a){switch(a.action){case e.UPLOAD_PHOTO:this.getController("add-photos-popup").start(this.getParent());break;case e.OPEN_ENCOUNTERS:this.navigate("encounters")}},handleCancelPhotoUpload_:function(){d.back()},handlePhotoUploaded_:function(){this.getModel("chat").get(this.handleOpenChatResponse_)},notInterested_:function(){this.getModel("folders").blockUser({uid:this.getParameter("id"),notInterested:!0});h.getInstance().sendEvent(h.EVENT.CATEGORY.PEER_INTERACTION,h.EVENT.ACTION.BLOCK,
h.EVENT.LABEL.NOT_INTERESTED);d.back()},replyNow_:function(){h.getInstance().sendEvent(h.EVENT.CATEGORY.PEER_INTERACTION,h.EVENT.ACTION.CHAT,h.EVENT.LABEL.REPLY_NOW)},messageSend_:function(a){this.getModel("chat").set(a.value,_.bind(function(){},this));this.getModel("folders").updateDisplayMessage(this.getParameter("id"),a.value);this.getModel("folders").moveItemToTop(this.getParameter("id"));this.hasSentMessage_||(this.hasSentMessage_=!0,h.getInstance().sendEvent(h.EVENT.CATEGORY.PEER_INTERACTION,
h.EVENT.ACTION.CHAT,h.EVENT.LABEL.FIRST_MESSAGE_SENT))},onChatMessageReceived_:function(b){a.Proto.Object.isProtoObject(b)&&(b.extract("fromPersonId")===this.getParameter("id")&&i.test(b.extract("messageType"))&&!this.currentOpenChatResponse_.hasMessage(b))&&(this.currentOpenChatResponse_.addMessage(b),this.getModel("folders").updateDisplayMessage(this.getParameter("id"),b.extract("mssg")),this.getModel("folders").moveItemToTop(this.getParameter("id")),this.updateView("chat",{state:f.STATES.CHAT,
newMessage:b.getChatMessage()}),this.hasReceivedMessage_||(this.hasReceivedMessage_=!0,h.getInstance().sendEvent(h.EVENT.CATEGORY.PEER_INTERACTION,h.EVENT.ACTION.CHAT,h.EVENT.LABEL.FIRST_MESSAGE_RECEIVED)))},getTitle:function(){return""}})})(Badoo);Badoo=Badoo||{};
(function(a){var f=a.Views.PageMenu.Buttons,g=a.Utils.Analytics,d=a.Controllers.Settings=a.Controllers.PageController.extend({init:function(){d._super.init.apply(this,arguments);this.registerView("settings",new a.Views.Settings);this.getView("settings").on("navigate",_.bind(this.onNavigate_,this))},onStart:function(){d._super.onStart.apply(this,arguments);var c=this.getView("settings");this.setHeaderType(a.Views.Header.DISPLAY_TYPE.HIGHLIGHTED);c.update(_.values(b));c.appendTo(this.getParent());g.getInstance().trackPage(g.PAGE.SETTINGS)},
getTitle:function(){return _t.personal_info_personal_settings},getPageMenuButtons:function(){return[f.BACK]},onNavigate_:function(a){this.navigate(a.to)}}),b={};d.registerMenuItem=function(a,f,e){b[a]||(e&&(b[a]=e),d[a]=f)}})(Badoo);Badoo=Badoo||{};BadooNative=BadooNative||{};
(function(a){var f=a.Views.PageMenu.Buttons,g=a.Views.ConfirmPopup,d=a.Views.Profile,b=a.Utils.Analytics,c=a.Controllers.OwnProfile=a.Controllers.Profile.extend({isOwnProfile_:!0,init:function(){c._super.init.apply(this,arguments);this.registerView("confirm-popup",new g).on(g.ACTIONS.YES,_.bind(this.onDeletePhoto_,this));this.registerView("confirm-set-as-default-popup",new g).on(g.ACTIONS.YES,_.bind(this.onSetAsDefault_,this));var b=a.Controllers.AddPhotosPopup;this.registerController("add-photos-popup-controller",
new b("add-photos-popup-controller")).on(b.ACTIONS.PHOTO_UPLOAD_SUCCESS,_.bind(this.onPhotoUploadSuccess_,this));b=this.getView("profile");b.on("edit-filter",_.bind(this.onEditFilter_,this));b.on("edit-location",_.bind(this.onEditLocation_,this));b.on("edit-profile",_.bind(this.onEditProfile_,this));b.on("navigate-encounters",_.bind(this.onNavigateEncounters_,this));b.on(d.ACTIONS.ADD_PHOTOS,_.bind(this.showAddPhotosPopup_,this));b.on(d.ACTIONS.DELETE_PHOTO,_.bind(this.onConfirmedDeletePhoto_,this));
b.on(d.ACTIONS.SET_AS_DEFAULT,_.bind(this.onConfirmedSetAsDefault_,this));b.on(d.ACTIONS.ROTATE,_.bind(this.onRotate_,this))},onStart:function(){this.updateParameters({id:a.Session.getInstance().getUserId()});c._super.onStart.apply(this,arguments)},onConfirmedDeletePhoto_:function(a){this.onAlbumAction_(a,"deletePhoto")},onConfirmedSetAsDefault_:function(a){this.onAlbumAction_(a,"setAsDefault")},onRotate_:function(a){this.onAlbumAction_(a,"rotateImageRight")},onAlbumAction_:function(b,c){if(_.isObject(b)&&
_.isString(b.photo)&&_.isString(c)){var d=b.photo;this.getView("profile").update({toggleFullscreen:!0});this.getView("profile").showLoading();this.getModel("albums")[c](d,_.bind(function(b,c){if(!b)if(this.getView("profile").hideLoading(),c&&"ClientImageAction"===c.getClass()&&!0!==c.extract("success"))(new a.Views.Alert).update({type:a.Views.Alert.TYPES.INFO,message:c.extract("errorMessage")});else{var e=a.Session.getInstance();this.getModel("albums").invalidate(e.getUserId());this.getModel("profile").invalidate(e.getUserId())}},
this))}},onDeletePhoto_:function(){this.getView("profile").update({deleteCurrentPhoto:!0})},onSetAsDefault_:function(){this.getView("profile").update({setAsDefault:!0})},showAddPhotosPopup_:function(){b.getInstance().trackPage(b.PAGE.OWN_PROFILE_ADD_PHOTO);var a=this.getController("add-photos-popup-controller");a.once("stop",function(){b.getInstance().trackPage(b.PAGE.OWN_PROFILE)});a.start(this.getParent())},getPageMenuButtons:function(){return[f.SETTINGS,f.MENU,f.MINIMIZE,f.SET_AS_DEFAULT,f.TRASH_CAN,
f.ROTATE]},onPageMenuButtonSelect:function(a){a.button===f.TRASH_CAN&&this.getView("confirm-popup").update({message:_t.gallery_photo_viewer_deleteConfirmMsg});a.button===f.SET_AS_DEFAULT&&this.getView("confirm-set-as-default-popup").update({message:_t.cmd_confirm_profile_photo});a.button===f.ROTATE&&this.getView("profile").update({rotate:!0});c._super.onPageMenuButtonSelect.apply(this,arguments)},onEditFilter_:function(){this.navigate("settings-filter")},onEditLocation_:function(){this.navigate("settings-location")},
onEditProfile_:function(){this.navigate("settings-edit-profile")},onNavigateEncounters_:function(){this.navigate("encounters")},pageReady_:function(){c._super.pageReady_.apply(this,arguments)},onPhotoUploadSuccess_:function(){this.getProfileInfo_(a.Session.getInstance().getUserId())}})})(Badoo,BadooNative);Badoo=Badoo||{};
(function(a){Badoo.Utils.Logger.getLogger("IncompleteProfileAction");var f=a.Proto.Object,g=a.Utils.Analytics,d=a.Controllers.IncompleteProfileAction=a.Controller.extend({init:function(){d._super.init.apply(this,arguments);var b=this.registerView("incomplete-view",new a.Views.IncompleteProfileAction);_.bindAll(this,"onSubmit_");b.on("submit",this.onSubmit_);this.registerController("location-select",new a.Controllers.LocationSelect("location-select"));this.getController("location-select").start(this.getView("incomplete-view").getLocationContainer(),
{maxResults:7,isModal:!0,placeholder:_t.incomplete_profile_location_placeholder})},onStart:function(){var a=this.getParameters();this.getView("incomplete-view").update({basicInfo:a});this.getParameter("location");a.extract("location")&&this.getController("location-select").updateLocation({id:a.extract("location.id"),name:a.extract("location.name")});var c=_.filter(["name","dob","location","gender"],function(c){c=a.extract(c);return!c||"0000-00-00"===c});this.trackMissingFields_(c);g.getInstance().trackPage(g.PAGE.DATA_INCOMPLETE)},
onSubmit_:function(b){var c=this.getView("incomplete-view"),d=this.getController("location-select").getLocation();a.Api.getInstance().request("updateBasicInfo",{locationId:d&&d.id||0,name:b.name,gender:b.gender,dob:b.dob},_.bind(function(b,d){if(b&&f.isProtoObject(b.response)&&"BadooDataError"===b.response.getClass())g.getInstance().sendEvent(g.EVENT.CATEGORY.USER_ACTION,g.EVENT.ACTION.REGISTRATION,g.EVENT.LABEL.INCOMPLETE),this.trackMissingFields_(b.response.getErrorFields()),c.update({error:{fields:b.response.getErrorFields()}});
else{c.dismiss();var h=a.Session.getInstance();h.processLoginResponse(d);h.sessionStartup();g.getInstance().sendEvent(g.EVENT.CATEGORY.USER_ACTION,g.EVENT.ACTION.REGISTRATION,g.EVENT.LABEL.COMPLETE);this.stop()}},this))},trackMissingFields_:function(a){if(a)for(var c=0;c<a.length;c++)g.getInstance().sendEvent(g.EVENT.CATEGORY.ERROR,g.EVENT.ACTION.REGISTRATION,a[c])}})})(Badoo);Badoo=Badoo||{};BadooNative=BadooNative||{};
(function(a,f){var g=a.Views.AddPhotosPopup,d=a.Utils.Auth.FBAuth,b=f.camera,c=a.Views.Alert,h=a.History,e,j,i=a.Controllers.AddPhotosPopup=a.Controller.extend({init:function(){_.bindAll(this);e=a.NativeBridge.getInstance().isNative();j=!e&&$.os.supportsFileInput;this.registerModel("album",new a.Models.Albums("album"));var c=new g("add-photos-popup");this.registerView("add-photos-popup",c);if(e)c.on(g.ACTIONS.CAMERA,_.partial(this.photoUploadNative_,b.PictureSourceType.CAMERA)),c.on(g.ACTIONS.LIBRARY_NATIVE,
_.partial(this.photoUploadNative_,b.PictureSourceType.PHOTOLIBRARY));else if(j)c.on(g.ACTIONS.LIBRARY,this.photoUploadWeb_);c.on(g.ACTIONS.FACEBOOK,this.photoUploadFacebook_);c.on(g.ACTIONS.CANCEL,this.photoUploadCancelled_);c.on("dismissed",this.photoUploadCancelled_)},onStart:function(){var b=a.Session.getInstance(),b={libraryEnabled:j,libraryNativeEnabled:e,cameraEnabled:e,facebookEnabled:!0,sessionId:b.getSessionId(),albumId:"me:"+b.getUserId()},c=this.getParameters();_.isObject(c)&&(b=_.extend(b,
c));this.getView("add-photos-popup").update(b)},onStop:function(){this.getView("add-photos-popup").dismiss(!0)},photoUploadWeb_:function(a){if($.os.supportsFileApi){var b=new FileReader;if(a=a.input.files[0])this.getView("add-photos-popup").showLoading(),b.onload=this.onFileLoaded_,b.onerror=this.onPhotoSendError_,b.readAsDataURL(a);else this.onPhotoSendError_()}else this.getView("add-photos-popup").showLoading(),a.iframe.on("load",this.oniFrameLoaded_),a.form.submit()},oniFrameLoaded_:function(a){a=
a.srcElement;if(!a||!a.contentDocument)this.onPhotoSendError_();else{this.getView("add-photos-popup").hideLoading();$(a).off("load");var a=a.contentDocument.getElementById("json-response"),b=null;try{b=a?JSON.parse(a.value.replace(/(\r\n|\n|\r)/gm,"")):null}catch(c){return this.onPhotoSendError_()}if(b&&b.uploaded)this.onPhotoReceived_("data:image/jpeg;base64,"+b.data);else this.onPhotoSendError_()}},onFileLoaded_:function(a){if(!a.target||!a.target.result)this.onPhotoSendError_();else this.onPhotoReceived_(a.target.result)},
photoUploadNative_:function(a){b.getPicture(this.onNativePhotoReceived_,this.onPhotoPickError_,{sourceType:a});this.getView("add-photos-popup").showLoading()},onPhotoReceived_:function(b){this.getView("add-photos-popup").dismiss();var c=b.substr(0,12);"data:base64,"===c&&(b=b.replace(c,"data:image/jpeg;base64,"));c=_.uniqueId("photo");a.Utils.Cache.getInstance("photo-upload").put(c,b,18E4);h.navigate(a.Router.encodeRoute("photo-edit",{type:"upload",source:c}))},onNativePhotoReceived_:function(a){this.onPhotoReceived_("data:image/jpeg;base64,"+
a)},onPhotoSendError_:function(){(new c).update({type:c.TYPES.ERROR,message:_t.photos_str_upload_failed,onDismiss:_.bind(function(){this.trigger(i.ACTIONS.PHOTO_UPLOAD_FAIL);this.stop()},this)})},onPhotoPickError_:function(a){if("no image selected"!==a)this.onPhotoSendError_()},onPhotoSuccessfulUpload_:function(){this.getModel("album").invalidate(a.Session.getInstance().getUserId());this.trigger(i.ACTIONS.PHOTO_UPLOAD_SUCCESS);this.stop()},photoUploadFacebook_:function(){null===d.getInstance().getAccessToken()?
(d.getInstance().once("login",_.bind(function(a){a.success?h.navigate("fbimport"):this.stop()},this)),d.getInstance().login()):h.navigate("fbimport")},photoUploadCancelled_:function(){this.trigger(i.ACTIONS.PHOTO_UPLOAD_CANCELLED);this.stop()}});i.ACTIONS={PHOTO_UPLOAD_SUCCESS:"PHOTO_UPLOAD_SUCCESS",PHOTO_UPLOAD_FAIL:"PHOTO_UPLOAD_FAIL",PHOTO_UPLOAD_CANCELLED:"PHOTO_UPLOAD_CANCELLED"}})(Badoo,BadooNative);Badoo=Badoo||{};
(function(a){var f=a.Utils.Auth.FBAuth,g=a.Views.PageMenu.Buttons,d=a.Views.FacebookPhotoImport,b=a.Controllers.FacebookPhotoImport=a.Controllers.PageController.extend({token_:null,init:function(){b._super.init.apply(this,arguments);this.registerModel("album",new a.Models.Albums("album"));this.registerModel("facebook-albums",new a.Models.FacebookAlbums("facebook-albums"));this.registerView("facebook-photo-import-view",new a.Views.FacebookPhotoImport);this.getView("facebook-photo-import-view").on(d.ACTIONS.PHOTO_SELECTED,
_.bind(this.onPhotoSelected_,this));this.getView("facebook-photo-import-view").on(d.ACTIONS.ALBUM_SELECTED,_.bind(this.onAlbumSelected_,this))},onStart:function(){b._super.onStart.apply(this,arguments);this.getView("facebook-photo-import-view").appendTo(this.getParent());this.getView("facebook-photo-import-view").showLoading();(this.token_=f.getInstance().getAccessToken())?this.requestFacebookAlbum(this.getParameter("album")):this.waitForFacebookToken(1E3)},waitForFacebookToken:function(b){this.token_?
this.requestFacebookAlbum(this.getParameter("album")):3E3>=b?setTimeout(_.bind(function(){this.token_=f.getInstance().getAccessToken();this.waitForFacebookToken(b+1E3)},this),b):a.History.back()},getHeaderType:function(){return a.Views.Header.DISPLAY_TYPE.HIGHLIGHTED},getTitle:function(){return _t.facebook_photo_import_title},onPageMenuButtonSelect:function(c){switch(c.button){case g.CANCEL:a.History.back()}b._super.onPageMenuButtonSelect.apply(this,arguments)},renderAlbum_:function(b){this.getView("page-menu").update({buttons:[a.Views.PageMenu.Buttons.BACK]});
this.updateView("header",{title:b.data_.name});this.getView("facebook-photo-import-view").update({album:b})},renderAlbums_:function(a){this.getView("page-menu").update({buttons:[g.CANCEL]});this.updateView("header",{title:this.getTitle()});this.getView("facebook-photo-import-view").update({albums:a})},onParametersChange:function(){this.getView("page-menu").enable();this.requestFacebookAlbum(this.getParameter("album"))},onAlbumSelected_:function(a){this.navigate("fbimport",{album:a})},onPhotoSelected_:function(a){this.navigate("photo-edit",
{type:"facebook",source:a})},requestFacebookAlbum:function(a){this.getModel("facebook-albums").get({accessToken:this.token_},_.bind(function(b,e){b||(a?this.renderAlbum_(_.find(e,function(b){return b.data_.aid===a})):this.renderAlbums_(e))},this))}})})(Badoo);Badoo=Badoo||{};
(function(a){var f=a.Views.PageMenu.Buttons,g=a.Views.Alert,d=a.Controllers.PhotoEdit=a.Controllers.PageController.extend({uploadInfo_:null,cache_:a.Utils.Cache.getInstance("photo-upload"),currentPosition_:null,init:function(){d._super.init.apply(this,arguments);this.registerModel("album",new a.Models.Albums("album"));this.registerModel("facebook-albums",new a.Models.FacebookAlbums("facebook-albums"));this.registerView("photo-edit",new a.Views.PhotoEdit);this.getView("photo-edit").on(a.Views.PhotoEdit.ACTIONS.POSITION_CHANGED,
_.bind(this.onPositionChanged_,this))},getTitle:function(){return _t.facebook_photo_import_move},onPositionChanged_:function(a){this.currentPosition_=a},onStart:function(){d._super.onStart.apply(this,arguments);var b={type:this.getParameter("type"),source:this.getParameter("source")};this.currentPosition_={x:"0.00",y:"0.00",scale:"1",width:0};if("upload"===b.type){if(_.isNull(this.cache_.get(b.source))){this.stop();a.History.back();return}b.photo=this.cache_.get(b.source);this.cache_.invalidate(b.source)}this.getView("photo-edit").reset();
this.getView("photo-edit").update({photo:b.photo?b.photo:b.source});this.getView("photo-edit").appendTo(this.getParent());this.uploadInfo_=b},onReady:function(){this.getView("photo-edit").ready()},getHeaderType:function(){return a.Views.Header.DISPLAY_TYPE.SOLID},getPageMenuButtons:function(){return[f.CANCEL,f.SAVE]},onPageMenuButtonSelect:function(b){switch(b.button){case f.CANCEL:a.History.back();break;case f.SAVE:this.doSave_()}d._super.onPageMenuButtonSelect.apply(this,arguments)},doSave_:function(){this.getView("photo-edit").showLoading();
"facebook"===this.uploadInfo_.type?this.saveFromFacebook_():"upload"===this.uploadInfo_.type&&this.saveFromDirectUpload_()},saveFromFacebook_:function(){this.getModel("facebook-albums").set({album:"me:"+a.Session.getInstance().getUserId(),url:this.uploadInfo_.source,x:this.currentPosition_.x,y:this.currentPosition_.y,width:this.currentPosition_.width,scale:this.currentPosition_.scale},_.bind(function(a,c){if(a||!1===c)this.onPhotoSendError_();else if(!0===c)this.onPhotoSendSuccess_()},this))},saveFromDirectUpload_:function(){a.Api.getInstance().request("photoUpload",
{photo:this.uploadInfo_.photo.replace(/^data:image\/[a-zA-Z]+;base64,/,""),album:"me:"+a.Session.getInstance().getUserId(),x:this.currentPosition_.x,y:this.currentPosition_.y,width:this.currentPosition_.width,scale:this.currentPosition_.scale},_.bind(function(a){if(a)this.onPhotoSendError_();else this.onPhotoSendSuccess_()},this))},onPhotoSendSuccess_:function(){(new g).update({type:g.TYPES.INFO,message:_t.wap_photo_uploading});this.getModel("album").invalidate(a.Session.getInstance().getUserId());
this.getView("photo-edit").hideLoading();a.History.back()},onPhotoSendError_:function(){this.getView("photo-edit").hideLoading();(new g).update({type:g.TYPES.ERROR,message:_t.photos_str_upload_failed,onDismiss:_.bind(function(){this.getView("photo-edit").hideLoading()},this)})}})})(Badoo);Badoo=Badoo||{};
(function(a){var f={terms:!0,privacy:!0},g={terms:_t.str_terms_of_service,privacy:_t.str_privacy_policy},d=a.Controllers.LegalDocument=a.Controllers.PageController.extend({document:"",init:function(){d._super.init.apply(this,arguments);_.bindAll(this,"onDocumentReady_","onOpenLink_");this.registerModel("model",new a.Models.LegalDocument);this.registerView("view",new a.Views.LegalDocument);this.getView("view").on("openLink",this.onOpenLink_)},reset:function(){this.getView("view").update({content:""});
this.getView("header").update({title:""})},onStart:function(){d._super.onStart.apply(this,arguments);this.getView("view").appendTo(this.getParent());this.reset();this.displayDocument_()},displayDocument_:function(){this.document=this.getParameter("document");f[this.document]?(this.getView("view").update({loading:!0}),this.getModel("model").get({document:this.document},this.onDocumentReady_)):a.History.back()},onDocumentReady_:function(b,c){b?a.History.back():(this.getView("view").update({content:c.html}),
this.getView("header").update({title:g[this.document]}))},onOpenLink_:function(b){var c=b.indexOf("#");0<c?(b=b.substring(c+1),f[b]?this.navigate("legal",{document:b}):a.History.navigate(b)):window.open(b,"_system")},onParametersChange:function(){this.getView("page-menu").enable();this.displayDocument_()},requiresAuthentication:function(){return!1},getHeaderType:function(){return a.Views.Header.DISPLAY_TYPE.HIGHLIGHTED},getPageMenuButtons:function(){return[a.Views.PageMenu.Buttons.BACK]}})})(Badoo);
Badoo=Badoo||{};
(function(a){var f=a.Views.PageMenu.Buttons,g=a.Views.SignUp,d=a.Utils.Analytics,b=a.config,c=a.Controllers.SignUp=a.Controllers.PageController.extend({init:function(){c._super.init.apply(this,arguments);_.bindAll(this,"handleLocationChange_","handleLocationSelection_","findLocation_","onLogin_","onSignup_","onSignIn_","onViewTerms_","onViewPrivacy_");var b=this.registerView("signUp",new g);b.on(g.EVENTS.SUBMIT,this.onSignup_);b.on(g.EVENTS.VIEW_PRIVACY,this.onViewPrivacy_);b.on(g.EVENTS.VIEW_TERMS,this.onViewTerms_);
b.on(g.EVENTS.SIGN_IN,this.onSignIn_);this.registerController("location_select",new a.Controllers.LocationSelect)},onStart:function(){c._super.onStart.apply(this,arguments);var b=this.getView("signUp").appendTo(this.getParent());this.timing.actionEnd("sign-up/open");this.getController("location_select").start(b.getLocationContainer(),{maxResults:5,isModal:!1,placeholder:_t.incomplete_profile_location_placeholder});b=this.getController("location_select");b.once("active",this.findLocation_);b.on("change",
this.handleLocationChange_);b.on("selected",this.handleLocationSelection_);a.Session.getInstance().on("login",this.onLogin_);d.getInstance().trackPage(d.PAGE.SIGN_UP);this.reset()},onStop:function(){var b=this.getController("location_select");b.off("change",this.handleLocationChange_);b.off("selected",this.handleLocationSelection_);b.off("active",this.findLocation_);a.Session.getInstance().off("login",this.onLogin_)},handleLocationChange_:function(){this.updateView("signUp",{didLocationSearch:!0})},
handleLocationSelection_:function(a){this.updateView("signUp",{location:a})},findLocation_:function(){a.Utils.location.findCurrentLocation(_.bind(function(a){this.updateView("signUp",{location:{id:a.extract("id"),name:a.extract("name")}});this.getController("location_select").updateLocation({id:a.extract("id"),name:a.extract("name")})},this))},getHeaderType:function(){return a.Views.Header.DISPLAY_TYPE.SOLID},getTitle:function(){return _t.signin_new_signup2},getName:function(){return"sign-up"},getPageMenuButtons:function(){return[f.BACK]},
reset:function(){this.getController("location_select").reset();this.updateView("signUp",{reset:!0})},onSignup_:function(b){a.Session.getInstance().registerEmail(b,_.bind(function(b){var c=b.extract("errors");if(c&&0<c.length){var d={};c.forEach(function(a){d[a.extract("fieldName")]=a.extract("error")});this.updateView("signUp",{errors:d})}else this.reset(),a.Session.getInstance().processLoginResponse(b)},this))},onLogin_:function(a){a&&(a.result||"DataIncompleteError"===a.errorCode)&&this.navigate(b.get("default.page"),
null,!0)},requiresAuthentication:function(){return!1},requiresAnonymous:function(){return!0},onViewPrivacy_:function(){window.open("https://hotornot.com/privacy","_system")},onViewTerms_:function(){this.navigate("legal",{document:"terms"})},onSignIn_:function(){this.navigate("sign-in")}})})(Badoo);Badoo=Badoo||{};
(function(a){var f=a.Views.PageMenu.Buttons,g=a.Utils.Analytics,d=a.config,b=a.Controllers.SignIn=a.Controllers.PageController.extend({init:function(){b._super.init.apply(this,arguments);var c=this.registerView("signIn",new a.Views.SignIn);c.on(a.Views.SignIn.ACTIONS.SIGN_IN,_.bind(this.onSignIn_,this));c.on(a.Views.SignIn.ACTIONS.FORGOT_PASSWORD,_.bind(this.onForgotPassword_,this));_.bindAll(this,"onLogin_")},onStart:function(){b._super.onStart.apply(this,arguments);this.getView("signIn").appendTo(this.getParent());
a.Session.getInstance().on("login",this.onLogin_);g.getInstance().trackPage(g.PAGE.SIGN_IN)},onStop:function(){a.Session.getInstance().off("login",this.onLogin_)},getHeaderType:function(){return a.Views.Header.DISPLAY_TYPE.SOLID},getTitle:function(){return _t.signin_existing_signin},getName:function(){return"sign-in"},getPageMenuButtons:function(){return[f.BACK]},reset:function(){this.updateView("signIn",{reset:!0})},onSignIn_:function(b){var d=a.Session.getInstance();d.loginEmail(b.name,b.password,
_.bind(function(a){"DisplayableError"===a.extract("errorCode")?this.updateView("signIn",{errors:{name:a.extract("message")}}):(d.processLoginResponse(a),this.reset())},this))},onLogin_:function(a){a&&(a.result||"DataIncompleteError"===a.errorCode)&&this.navigate(d.get("default.page"),null,!0)},requiresAuthentication:function(){return!1},requiresAnonymous:function(){return!0},onForgotPassword_:function(){this.navigate("forgot-password")}})})(Badoo);Badoo=Badoo||{};
(function(a){var f=a.Views.PageMenu.Buttons,g=a.Views.Settings.EditProfile,d=a.Controllers.PageController.extend({init:function(){d._super.init.apply(this,arguments);this.registerModel("profile-options",new a.Models.ProfileOptions);this.registerModel("profile",new a.Models.Profiles);this.registerView("profile-edit",new a.Views.Settings.EditProfile);this.getView("profile-edit").on(g.ACTIONS.SAVE_PROFILE,_.bind(this.onSaveProfile_,this))},onStart:function(){d._super.onStart.apply(this,arguments);this.getView("profile-edit").appendTo(this.getParent());
this.getModel("profile-options").get({uid:a.Session.getInstance().getUserId()},_.bind(this.onGetProfileOptions_,this))},onGetProfileOptions_:function(b,c){b?a.History.back():this.getView("profile-edit").update({profileOptions:c})},onPageMenuButtonSelect:function(a){a.button===f.SAVE?this.getView("profile-edit").update({save:!0}):d._super.onPageMenuButtonSelect.apply(this,arguments)},getPageMenuButtons:function(){return[f.BACK,f.SAVE]},getTitle:function(){return _t.personal_info_personal_info},getHeaderType:function(){return a.Views.Header.DISPLAY_TYPE.HIGHLIGHTED},
onSaveProfile_:function(b){this.getModel("profile").set(b,_.bind(function(){a.History.back()},this))}});a.Controllers.Settings.registerMenuItem("EditProfile",d)})(Badoo);Badoo=Badoo||{};
(function(a){var f=a.Views.PageMenu.Buttons,g=a.Views.Feedback,d=g.STATES,b=[{id:"bussines",value:_t.feedback_listitem_bussines},{id:"billing",value:_t.feedback_listitem_billing},{id:"error_bug",value:_t.feedback_listitem_error_bug},{id:"ideas",value:_t.feedback_listitem_ideas},{id:"questions",value:_t.feedback_listitem_questions}],c=a.Controllers.Feedback=a.Controllers.PageController.extend({category_:null,categories_:null,init:function(){c._super.init.apply(this,arguments);var b=this.registerView("feedback",
new g("feedback"));b.on(g.ACTIONS.SELECT_CATEGORY,_.bind(this.onSelectCategory_,this));b.on(g.ACTIONS.SEND_FEEDBACK,_.bind(this.onSendFeedback_,this));this.registerView("post-feedback-popup",new a.Views.Alert);this.registerModel("feedback",new a.Models.Feedback)},onStart:function(){c._super.onStart.apply(this,arguments);this.getView("feedback").appendTo(this.getParent());this.getView("feedback").showLoading();this.getCategories_()},getCategories_:function(){this.getModel("feedback").get({},_.bind(this.onCategoriesReceived_,
this))},onCategoriesReceived_:function(a,c){this.getView("feedback").hideLoading();this.categories_=a?b:_.map(c,function(a){return{id:a,value:_t["feedback_listitem_"+a]}});this.updateView("feedback",{categories:this.categories_});this.changeCategory_(this.getParameter("category"))},getPageMenuButtons:function(){return[f.BACK]},getHeaderType:function(){return a.Views.Header.DISPLAY_TYPE.HIGHLIGHTED},getTitle:function(){return _t.profile_settings_feedback},onSelectCategory_:function(a){this.navigate(this.getName(),
{category:a.id},!0)},onSendFeedback_:function(a){this.getView("feedback").showLoading();this.getModel("feedback").set({category:this.category_,message:a.feedback},_.bind(this.onFeedbackSent_,this))},onFeedbackSent_:function(b){this.getView("feedback").hideLoading();this.getView("post-feedback-popup").update({message:b?_t.profile_feedback_noconnection_message:_t.feedback_alert_done,type:a.Views.Alert.TYPES.INFO,onDismiss:b||a.History.back})},onParametersChange:function(a){var b;a.added&&a.added.category||
a.changed&&a.changed.category?b=a.added.category||a.changed.category:a.removed&&a.removed.category&&(b=null);this.changeCategory_(b)},changeCategory_:function(a){this.category_=a;a=_t.profile_settings_feedback;if(this.category_){var b=_.find(this.categories_,_.bind(function(a){return a.id===this.category_},this));_.isObject(b)&&_.isString(b.value)&&(a=b.value)}this.updateView("feedback",{state:null===this.category_?d.LIST:d.FEEDBACK});this.updateView("header",{title:a})}})})(Badoo);Badoo=Badoo||{};
(function(a){var f=a.Views.PageMenu.Buttons,g=a.Controllers.ForgotPassword=a.Controllers.PageController.extend({init:function(){g._super.init.apply(this,arguments);this.registerView("forgot-password",new a.Views.ForgotPassword).on(a.Views.ForgotPassword.ACTIONS.GET_PASSWORD,_.bind(this.onGetPassword_,this));this.registerView("password-sent-message",new a.Views.Alert)},onStart:function(){g._super.onStart.apply(this,arguments);this.getView("forgot-password").appendTo(this.getParent())},getHeaderType:function(){return a.Views.Header.DISPLAY_TYPE.SOLID},
getTitle:function(){return _t.signin_forgot_password_title},getPageMenuButtons:function(){return[f.BACK]},requiresAuthentication:function(){return!1},requiresAnonymous:function(){return!0},onPageMenuButtonSelect:function(a){a.button===f.BACK&&this.getView("forgot-password").update({error:!1,reset:!0});g._super.onPageMenuButtonSelect.apply(this,arguments)},onGetPassword_:function(d){a.Api.getInstance().request("sendPassword",d,_.bind(function(b,c){b||(this.getView("forgot-password").update({error:!c,
reset:c}),!0===c&&this.getView("password-sent-message").update({message:_t.signin_forgot_password_alert_message,type:a.Views.Alert.TYPES.INFO,onDismiss:a.History.back}))},this))}})})(Badoo);Badoo=Badoo||{};
(function(a){var f=a.config,g=a.Controllers.NewPassword=a.Controllers.PageController.extend({init:function(){g._super.init.apply(this,arguments);this.registerView("new-password",new a.Views.NewPassword).on(a.Views.NewPassword.ACTIONS.SET_PASSWORD,_.bind(this.onSetPassword_,this));this.registerView("password-sent-message",new a.Views.Alert);null===this.getParameter("token")&&this.navigate(f.get("default.page"),null,!0)},onStart:function(){g._super.onStart.apply(this,arguments);this.getView("new-password").appendTo(this.getParent())},
getHeaderType:function(){return a.Views.Header.DISPLAY_TYPE.SOLID},getTitle:function(){return _t.profile_settings_account},requiresAuthentication:function(){return!1},onSetPassword_:function(d){a.Api.getInstance().request("changeUserPassword",{newPassword:d.password,token:this.getParameter("token")},_.bind(function(b,c){b||(!0===c.extract("success")?(this.getView("password-sent-message").update({message:_t.reset_password_confirmed,type:a.Views.Alert.TYPES.INFO,onDismiss:_.bind(function(){this.navigate(f.get("default.page"),
null,!0)},this)}),this.getView("new-password").update({reset:!0})):this.getView("new-password").update({error:c.extract("message")}))},this))}})})(Badoo);Badoo=Badoo||{};
(function(a,f){var g=a.Utils.DOM,d=g.createElement,b=g.satisfy,c=a.Controllers.LandingPage.STATES,h=a.View.extend({className:"sprite-base",count_:null,currentPosition_:null,chevronLeft_:null,chevronRight_:null,carousel_:null,events:{"click .chevron":"handleSlide_"},init:function(){this.carousel_=f(d("div",{"class":"sprite-carousel"}));this.registerChildView("dots",new a.Views.Dots);return this},update:function(a){this.count_=a.count;this.reset();this.render();return this},reset:function(){this.currentPosition_=
0;this.carousel_.css("background-position","0% 0%")},render:function(){this.getChildView("dots").update({count:this.count_});this.chevronLeft_=b("div.chevron.left");this.chevronRight_=b("div.chevron.right");this.$el.append(this.carousel_,this.getChildView("dots").el,this.chevronLeft_,this.chevronRight_);return this},handleSlide_:function(a){a.target===this.chevronLeft_?(this.currentPosition_--,this.getChildView("dots").backward()):a.target===this.chevronRight_&&(this.currentPosition_++,this.getChildView("dots").forward());
this.carousel_.css("background-position",100*(this.currentPosition_/(this.count_-1))+"% 0%")}}),e=a.Views.LandingPage=a.Views.ScrollingView.extend({id:"web-landing-page-view",preventTouch:!1,currentState_:null,inviteText_:null,actionText_:null,inviterPhoto_:null,promoImages_:null,events:{"click #facebook-connect-button":"onFacebookConnect_","click .legacy":"onGoToBadoo_","click .privacy-policy":"onPrivacyPolicyClick_","click .terms-of-service":"onTermsOfServiceClick_","click .sign-up":"onSignUpClick_",
"click .app-store":"onAppStoreClick_"},init:function(){e._super.init.call(this);this.registerChildView("sprite-carousel",new h);return this},update:function(a){a=a||{};this.currentState_=a.state;if(this.currentState_===c.AWARDS_LANDING||this.currentState_===c.INVITE_LANDING)this.inviteText_=a.inviteText,this.actionText_=a.actionText,this.inviterPhoto_=a.inviterPhoto,this.promoImages_=a.promoImages;this.render();return e._super.update.apply(this,arguments)},render:function(){var a=this.currentState_===
c.AWARDS_LANDING,b=this.currentState_===c.INVITE_LANDING,d=a&&_.isArray(this.promoImages_)&&_.isString(this.promoImages_[0]);this.$el.empty().html(g.renderTemplate("web-landing",{hasLegacy:this.currentState_===c.LEGACY_LANDING,hasAwards:a,hasInvite:b,inviterPhoto:a||b?this.inviterPhoto_:null,awardImage:d?this.promoImages_[0]:null,promoImages:b?this.promoImages_:[],inviteText:a||b?this.inviteText_:null,actionText:a||b?this.actionText_:null,hasAppStore:f.os.ios||f.os.android,hasCarousel:!a&&!b,facebookButtonText:a?
_t.awards_landing_facebook_connect:null}));!a&&!b&&(a=this.getChildView("sprite-carousel"),a.update({count:4}),a.enable().appendTo(this.$("#carousel-wrapper")));this.refreshScroller();return this},onFacebookConnect_:function(){this.trigger(j.FACEBOOK_CONNECT)},onSignUpClick_:function(a){this.trigger(j.EMAIL_SIGN_UP,{timestamp:a&&a.timeStamp?a.timeStamp:(new Date).getTime()})},onGoToBadoo_:function(){this.trigger(j.GO_TO_BADOO)},onPrivacyPolicyClick_:function(){this.trigger(j.PRIVACY_POLICY)},onTermsOfServiceClick_:function(){this.trigger(j.TERMS_OF_SERVICE)},
onAppStoreClick_:function(){this.trigger(j.GO_TO_APPSTORE)},getType:function(){return a.Controllers.LandingPage.VIEW_TYPES.WEB_LANDING}}),j=e.EVENTS={PRIVACY_POLICY:"PRIVACY_POLICY",TERMS_OF_SERVICE:"TERMS_OF_SERVICE",FACEBOOK_CONNECT:"FACEBOOK_CONNECT",EMAIL_SIGN_UP:"EMAIL_SIGN_UP",GO_TO_BADOO:"GO_TO_BADOO",GO_TO_APPSTORE:"GO_TO_APPSTORE"}})(Badoo,Zepto);Badoo=Badoo||{};
(function(a,f){var g,d=document.createElement("input");d.type="date";d.value=":)";g=(f.os.ios||f.os.chrome)&&"date"===d.type&&":)"!==d.value;var b=function(a){return 10>a?"0"+a:a},c=new Date,h=a.Utils.DOM.createElement,e=function(a){return h("select",{name:a.name},a.options.map(function(a){return h("option",{value:a.value,label:a.label,html:a.label})}))},j=a.Views.DateSelectView=a.View.extend({className:"date-select",MIN_AGE:13,MAX_AGE:99,dateSelect_:null,placeholder_:null,init:function(){if(g){var d=
new Date,j=new Date;d.setFullYear(d.getFullYear()-this.MAX_AGE);j.setFullYear(j.getFullYear()-this.MIN_AGE);this.dateSelect_=f(h("input",{type:"date",min:[d.getFullYear(),b(d.getMonth()),b(d.getDate())].join("-"),max:[j.getFullYear(),b(j.getMonth()),b(j.getDate())].join("-")}))}else{d={name:"day",options:[]};for(j=1;31>=j;j++)d.options.push({value:10>j?"0"+j:j,label:j});for(var d=this.day_=e(d),j={name:"month",options:[]},o=1;12>=o;o++)j.options.push({value:10>o?"0"+o:o,label:a.Utils.Helpers.getTranslatedMonth(o)});
for(var j=this.month_=e(j),p=this.MIN_AGE,n=this.MAX_AGE,o={name:"year",options:[]},p=c.getFullYear()-p,n=c.getFullYear()-n;p>=n;p--)o.options.push({value:p,label:p});this.dateSelect_=f([d,j,this.year_=e(o)])}this.dateSelect_.on("change",this.handleInputChange_).on("blur",this.handleInputChange_);this.render()},destroy:function(){g&&this.dateSelect_.off("change");j._super.destroy.apply(this,arguments)},handleInputChange_:function(a){a.stopPropagation();""!==this.value()?this.dateSelect_.addClass("has-date"):
this.dateSelect_.removeClass("has-date");this.trigger("change")},render:function(){this.$el.append(this.dateSelect_);g&&this.$el.append(this.placeholder_=h("span",{className:"placeholder"}))},value:function(){var a,d,e;g?(a=this.dateSelect_.val().split("-"),!a||!a.length||3!==a.length?(d=c.getFullYear(),e=b(c.getMonth()),a=b(c.getDate())):(d=a[0],e=1===a[1].length?"0"+a[1]:a[1],a=1===a[2].length?"0"+a[2]:a[2])):(d=this.year_.value||c.getFullYear(),e=this.month_.value||b(c.getMonth()),a=this.day_.value||
b(c.getDate()));return d+"-"+e+"-"+a},update:function(a){_.isString(a.placeholder)&&g&&(this.placeholder_.textContent=a.placeholder);if(a.date){var b=a.date.split("-"),c=b[2],d=b[1],b=b[0];g?this.dateSelect_.val(b+"-"+d+"-"+c):(this.day_.value=c,this.month_.value=d,this.year_.value=b);this.dateSelect_.addClass("has-date")}a.reset&&(this.dateSelect_.removeClass("has-date"),g?this.dateSelect_.val(""):(this.day_.value="",this.month_.value="",this.year_.value=""))}})})(Badoo,Zepto);Badoo=Badoo||{};
(function(a){var f=a.Views.PageMenu.Buttons,g=a.Utils.Analytics,d=a.Controllers.PageController.extend({init:function(){d._super.init.apply(this,arguments);this.registerView("filterView",new a.Views.Settings.Filter);this.registerModel("profile",new a.Models.Profiles);this.registerModel("encounters",new a.Models.Encounters)},onStart:function(){d._super.onStart.apply(this,arguments);var b=this.getView("filterView");b.appendTo(this.getParent());a.Api.getInstance().request("getSearchSettings",_.bind(function(c,
d){c||(b.update({genderList:[{id:"MALE",name:_t.wap_reg_imale},{id:"FEMALE",name:_t.wap_reg_ifemale}],selectedGender:d.extract("gender")}),this.getModel("profile").get({id:a.Session.getInstance().getUserId()},function(a,c){var f=c.extract("person.age"),g=18<=f?18:13,o=18<=f?80:17;b.update({ageRange:{max:o,min:g,from:d.extract("fromAge")||g,to:d.extract("toAge")||o,isPositionAllowed:function(a){var b=Math.max(28<f?6:23<f?4:2,0.5*Math.abs(f-a.from));return Math.round(a.from+b)<=a.to}}})}))},this));
g.getInstance().trackPage(g.PAGE.FILTER)},getTitle:function(){return _t.cmd_filter},getPageMenuButtons:function(){return[f.DONE]},getHeaderType:function(){return a.Views.Header.DISPLAY_TYPE.HIGHLIGHTED},onPageMenuButtonSelect:function(b){if(b.button===f.DONE){var c=this.getView("filterView").getData();c&&a.Api.getInstance().request("setSearchSettings",{wish:null,from:c.ageRange.from,to:c.ageRange.to,m:c.gender&&-1!==c.gender.indexOf("MALE"),f:c.gender&&-1!==c.gender.indexOf("FEMALE"),locationId:null},
_.bind(function(b){b||(this.getModel("profile").invalidate(a.Session.getInstance().getUserId()),this.getModel("encounters").invalidate())},this));a.History.back()}else d._super.onPageMenuButtonSelect.apply(this,arguments)}});a.Controllers.Settings.registerMenuItem("Filter",d,{title:_t.cmd_filter,href:"settings-filter"})})(Badoo);Badoo=Badoo||{};
(function(a){var f=a.Utils.DOM.createElement,g=a.Views.Settings.Filter=a.Views.ScrollingView.extend({id:"filter-page",className:"main-page-view settings-page",init:function(){g._super.init.apply(this,arguments);this.registerChildView("gender",new a.Views.ToggleItems);this.registerChildView("age",new a.Views.SliderView).on("change",this.handleAgeChange_);this.registerChildView("settings",new a.Views.List);this.render()},setGendersList:function(a){this.getChildView("gender").update(a)},setSelectedGender:function(a){this.getChildView("gender").update(a,
!0)},setAgeRangeList:function(a){this.getChildView("age").update(a)},setSelectedAgeRange:function(a){this.getChildView("age").update(a,!0)},update:function(a){this.hideLoading();this.refreshScroller();a.genderList&&a.selectedGender&&(this.getChildView("gender").update(a.genderList),this.getChildView("gender").update(a.selectedGender,!0));a.ageRange&&this.getChildView("age").update(a.ageRange)},getData:function(){return{gender:this.getChildView("gender").getSelected(),ageRange:this.getChildView("age").getData()}},
handleAgeChange_:function(a){this.ageRangeText_&&(a&&_.isNumber(a.from)&&_.isNumber(a.to))&&(this.ageRangeText_.innerHTML=_t.filter_age_range_text([a.from,a.to]))},render:function(){this.showLoading();this.getChildView("settings").update([{title:_t.people_filter_with,items:[{content:this.getChildView("gender").el}]},{title:_t.people_filter_age,"class":"age-select",items:[{content:[this.ageRangeText_=f("div",{html:_t.filter_age_range_text([18,20])}),this.getChildView("age").el]}]}]);this.getChildView("settings").appendTo(this.el)}})})(Badoo);
Badoo=Badoo||{};
(function(a){a.Controllers.LocationSelect=a.Controller.extend({searchRequest_:null,maxResults_:null,location_:null,init:function(){_.bindAll(this,"onLocationSearchResult_","onSearch_","updateLocation","triggerUpdate_","triggerActive_");var f=this.registerView("location-select",new a.Views.LocationSelect({placeholder:this.getParameter("placeholder")||"",isModal:this.getParameter("isModal")||!1}));f.on("search",this.onSearch_);f.on("selected",this.updateLocation);f.on("list-updated",this.triggerUpdate_);
f.on("active",this.triggerActive_);this.maxResults_=this.getParameter("maxResults")||10},onSearch_:function(f){this.searchRequest_&&(this.searchRequest_.abort(),this.searchRequest_=null);this.searchRequest_=a.Api.getInstance().request("citySearch",{location:f},this.onLocationSearchResult_)},onLocationSearchResult_:function(f,g){!f&&a.Proto.Object.isProtoObject(g)&&this.getView("location-select").update({cities:_.first(g.extract("cities"),this.maxResults_)})},onStart:function(){this.getParent().append(this.getView("location-select").el)},
getLocation:function(){return this.location_},triggerUpdate_:function(){this.trigger("change")},triggerActive_:function(){this.trigger("active")},reset:function(){this.location_=null;this.getView("location-select").update({reset:!0})},updateLocation:function(a){if(!this.location_||a&&a.id!==this.location_.id)this.location_=a,this.getView("location-select").update({location:a}),this.trigger("selected",a)}})})(Badoo);Badoo=Badoo||{};
(function(a,f){var g=a.Utils.DOM.satisfy,d=a.Utils.DOM.createElement;a.Views.LocationSelect=a.View.extend({className:"location-select",currentState_:null,textbox_:null,lastInputValue_:null,resultsBox_:null,location_:null,cities:[],REQUEST_DELAY:300,events:{"click li":"onLocationListSelect_"},init:function(a){this.onKeyUp_=_.throttle(this.onKeyUp_,this.REQUEST_DELAY);this.textbox_=f(g("input[type=text][name=location][autocorrect=off][autocapitalize=off][placeholder="+(this.options.placeholder||"")+
"]"));this.textbox_.on("keyup",this.onKeyUp_);this.textbox_.on("focus",this.onLocationFocus_);this.textbox_.on("blur",this.onLocationBlur_);this.resultsBox_=f(g("ul")).hide();this.$el.append(this.textbox_,this.resultsBox_);this.currentState_=0;a&&!0===a.isModal&&this.$el.addClass("modal")},update:function(a){a&&(a.reset?(this.location_=null,this.renderInactive()):a.location?(this.location_=a.location,this.renderInactive()):a.cities&&(this.cities_=a.cities,this.renderSearchResults()))},renderInactive:function(){this.location_?
(this.textbox_.val(this.location_.name),this.textbox_.data("id",this.location_.id)):(this.textbox_.val(""),this.textbox_.data("id",null));switch(this.currentState_){case 1:case 2:this.resultsBox_.empty()}this.currentState_=0;this.resultsBox_.hide();this.textbox_.blur()},renderSearchResults:function(){for(var a=document.createDocumentFragment(),c=0,f=this.cities_.length;c<f;c++){var e=this.cities_[c];a.appendChild(d("li",{"data-id":e.extract("id")},e.extract("name")))}this.resultsBox_.empty().append(a).removeClass("loading");
this.currentState_=1;this.trigger("list-updated")},onLocationFocus_:function(){this.textbox_.val("");this.trigger("active")},onLocationBlur_:function(){this.location_&&(this.location_.name&&0<this.location_.name.length)&&this.textbox_.val(this.location_.name)},onLocationListSelect_:function(a){var c=f(a.target),a=c.data("id"),c=c.text();a&&this.trigger("selected",{id:a,name:c})},onKeyUp_:function(){var a=this.textbox_.val();a!==this.lastInputValue_&&(this.textbox_.data("id",""),this.lastInputValue_=
a,""===a||3>a.length?(this.resultsBox_.empty(),this.resultsBox_.removeClass("loading").hide(),this.currentState_=0):(0===this.currentState_&&this.resultsBox_.addClass("loading").show(),this.currentState_=2,this.trigger("search",a)))}})})(Badoo,Zepto);Badoo=Badoo||{};
(function(a){var f=a.Views.PageMenu.Buttons,g=a.Utils.Analytics,d=a.Controllers.PageController.extend({personName_:null,init:function(){d._super.init.apply(this,arguments);this.registerView("basicinfo",new a.Views.Settings.BasicInfo);this.registerModel("profile",new a.Models.Profiles)},onStart:function(){d._super.onStart.apply(this,arguments);this.setHeaderType(a.Views.Header.DISPLAY_TYPE.HIGHLIGHTED);var b=this.getView("basicinfo");b.appendTo(this.getParent());var c=a.Session.getInstance();this.getModel("profile").get({id:c.getUserId(),
visitingSource:"CLIENT_SOURCE_ENCOUNTERS"},_.bind(function(a,c){a||(this.personName_=c.extract("person.name"),b.setName(this.personName_),b.setDob(c.extract("person.dob")),b.setGender("MALE"===c.extract("person.gender")?_t.profile_basicinfo_gender_male:_t.profile_basicinfo_gender_female))},this));g.getInstance().trackPage(g.PAGE.SETTINGS_BASIC)},getTitle:function(){return _t.title_basic_info},getName:function(){return"settings-page settings-basic-info"},getPageMenuButtons:function(){return[f.BACK,
f.SAVE]},onPageMenuButtonSelect:function(b){a.History.back();if(b.button===f.SAVE){var c=this.getView("basicinfo").getName();a.Api.getInstance().request("saveBasicInfo",{name:c,gender:null,dob:null},{handleOffline:!0,ignorePrevious:!0},_.bind(function(b){b||(this.getModel("profile").invalidate(a.Session.getInstance().getUserId()),this.getView("basicinfo").setName(c))},this))}d._super.onPageMenuButtonSelect.apply(this,arguments)}});a.Controllers.Settings.registerMenuItem("BasicInfo",d,{title:_t.title_basic_info,
href:"settings-basic-info"})})(Badoo);Badoo=Badoo||{};
(function(a){var f=a.Utils.DOM.satisfy,g=a.Utils.DOM.createElement,d=a.Views.Settings.BasicInfo=a.Views.ScrollingView.extend({nameInput_:null,genderView_:null,dobView_:null,className:"settings-page basic-info",init:function(){d._super.init.apply(this,arguments);this.registerChildView("settings",new a.Views.List);this.dobView_=f("span.disabled");this.render()},setName:function(a){this.nameInput_.value=a},setDob:function(b){this.dobView_.textContent=a.Utils.Helpers.getFormattedDate(b)},setGender:function(a){this.genderView_.textContent=
a},getName:function(){return this.nameInput_.value},render:function(){this.getChildView("settings").update([{"class":"form",items:[{content:[g("label",{"for":"basicinfo-name",text:_t.lbl_name}),this.nameInput_=f("input#basicinfo-name[name=name][type=text]")]},{content:[g("label",{text:_t.lbl_birthday}),this.dobView_]},{content:[g("label",{text:_t.signin_new_gender}),this.genderView_=f("span.disabled")]}]}]);this.getChildView("settings").appendTo(this.el)}})})(Badoo);Badoo=Badoo||{};
(function(a){var f=a.Views.PageMenu.Buttons,g=a.Utils.Analytics,d=a.Controllers.PageController.extend({personName_:null,profile_:null,facebook_:null,init:function(){d._super.init.apply(this,arguments);this.bindHandlers_();this.registerView("account",new a.Views.Settings.Account);var b=this.getView("account");b.on("signout",_.bind(this.onSignout_,this));b.on("delete-account",_.bind(this.onDeleteAccount_,this));b.on("get-password",_.bind(this.getPassword_,this));this.registerView("deleted-account-info",
new a.Views.Alert);this.registerModel("profile",new a.Models.Profiles)},bindHandlers_:function(){this.handleProfileUpdate_=_.bind(this.handleProfileUpdate_,this);this.handleFacebookLoggedIn_=_.bind(this.handleFacebookLoggedIn_,this)},onStart:function(){d._super.onStart.apply(this,arguments);this.getView("account").appendTo(this.getParent());var b=a.Session.getInstance();this.getModel("profile").invalidate(b.getUserId());this.getModel("profile").get({id:b.getUserId(),visitingSource:"CLIENT_SOURCE_UNSPECIFIED"},
this.handleProfileUpdate_);a.Utils.Auth.FBAuth.getInstance().getLoginStatus(this.handleFacebookLoggedIn_);g.getInstance().trackPage(g.PAGE.SETTINGS_ACCOUNT)},handleProfileUpdate_:function(b,c){g.getInstance().trackPage(g.PAGE.SETTINGS_ACCOUNT);b?a.History.back():(this.profile_=c,this.handleProfileCollection_())},handleFacebookLoggedIn_:function(a){this.facebook_=a;this.handleProfileCollection_()},handleProfileCollection_:function(){var a=this.profile_;a&&this.getView("account").update({name:a.extract("person.name"),
isAccountConfirmed:a.extract("profile.accountConfirmed")||_.isUndefined(a.extract("profile.email")),contact:a.extract("profile.email")||a.extract("profile.phone")||"",facebookStatus:this.facebook_&&this.facebook_.status})},getHeaderType:function(){return a.Views.Header.DISPLAY_TYPE.HIGHLIGHTED},getPassword_:function(b){a.Api.getInstance().request("sendPassword",b,_.bind(function(a,b){a||this.updateView("account",{passwordSent:!0===b})},this))},getTitle:function(){return _t.profile_settings_account},
getName:function(){return"settings-page settings-account"},getPageMenuButtons:function(){return[f.BACK]},onSignout_:function(){a.Session.getInstance().logout()},onDeleteAccount_:function(){this.navigate("settings-confirm-delete")}});a.Controllers.Settings.registerMenuItem("Account",d,{title:_t.profile_settings_account,href:"settings-account"})})(Badoo);Badoo=Badoo||{};
(function(a){var f=a.Utils.DOM.satisfy,g=a.Utils.DOM.createElement,d=a.Views.Settings.Account=a.View.extend({className:"settings-page account",nameLabel_:null,deleteInfo_:null,contactInput_:null,emailError_:null,popupView_:null,signOut_:null,facebookMessage_:null,preventTouch:!0,events:{"click .log_out":"confirmSignout_","click button.delete_account":"deleteAccount_","click .get-password":"getPassword_"},init:function(){d._super.init.apply(this,arguments);this.registerChildView("account-info",new a.Views.List);
this.registerChildView("confirm-account",new a.Views.List);var b=g("div",{className:"button-wrapper"});b.appendChild(g("button",{className:"delete_account secondary-button",text:_t.settings_delete_account}));this.deleteInfo_=g("div",{"class":"delete_account"},[b,g("span",{className:"subtext",text:_t.settings_delete_account_description})]);this.facebookMessage_=g("div",{"class":"subtext hidden"},_t.profile_account_message_facebook);this.registerChildView("confirm",new a.Views.ConfirmPopup);this.getChildView("confirm").on(a.Views.ConfirmPopup.ACTIONS.YES,
this.onPopupYes_);this.render()},onPopupYes_:function(){this.trigger("signout")},confirmSignout_:function(){this.getChildView("confirm").update({message:_t.settings_confirm_signout})},getPassword_:function(){0<this.contactInput_.value.length&&this.trigger("get-password",{contact:this.contactInput_.value})},deleteAccount_:function(){this.trigger("delete-account")},showConfirmAccountView_:function(a){this.getChildView("confirm-account").update([{"class":"form",items:[{"class":"email",content:[g("label",
{"for":"account-email",text:_t.signin_existing_email}),this.contactInput_=g("input",{id:"account-email",name:"email",type:"email",value:a,placeholder:_t.signin_new_enter_valid_address}),this.emailError_=g("span",{className:"error hidden",text:_t.profile_password_invalidEmail})]},{content:g("button",{"class":"simple get-password"},_t.profile_settings_password)}]}]);this.$el.append(this.getChildView("confirm-account").getElement())},update:function(b){$(this.emailError_).addClass("hidden");this.hideLoading();
b.name&&(this.nameLabel_.textContent=b.name);!1===b.isAccountConfirmed&&_.isString(b.contact)?($(this.signOut_).hide(),this.showConfirmAccountView_(b.contact)):!0===b.isAccountConfirmed&&($(this.signOut_).show(),this.getChildView("confirm-account").remove());!0===b.passwordSent?(this.popupView_||(this.popupView_=new a.Views.Alert),this.popupView_.update({type:a.Views.Alert.TYPES.INFO,message:_t.profile_password_confirm_msg([this.contactInput_.value])})):!1===b.passwordSent&&$(this.emailError_).removeClass("hidden");
"connected"===b.facebookStatus&&$(this.facebookMessage_).removeClass("hidden")},render:function(){this.showLoading();this.getChildView("account-info").update([{items:[{content:this.nameLabel_=f("label.button.simple.disabled")},{content:this.signOut_=g("button",{"class":"simple log_out"},_t.profile_account_signout)}]}]);this.getChildView("account-info").getElement().append(this.facebookMessage_);this.$el.append(this.getChildView("account-info").getElement(),this.deleteInfo_)}})})(Badoo);
Badoo=Badoo||{};
(function(a){var f=a.Views.PageMenu.Buttons,g=a.Utils.Analytics,d=["notify","email"],b=[{name:"matches",displayName:_t.profile_notifications_connections},{name:"messages",displayName:_t.profile_notifications_messages}],c=a.Controllers.PageController.extend({init:function(){c._super.init.apply(this,arguments);this.registerView("notifications",new a.Views.Settings.Notifications({types:d,fields:b}))},onStart:function(){c._super.onStart.apply(this,arguments);this.setHeaderType(a.Views.Header.DISPLAY_TYPE.HIGHLIGHTED);this.getView("notifications").appendTo(this.getParent());
a.Api.getInstance().request("getAppSettings",_.bind(function(a,b){a||this.updateView("notifications",{matches:{notify:b.extract("notifyMutual"),email:b.extract("emailMatches")},messages:{notify:b.extract("notifyMessages"),email:b.extract("emailMessages")}})},this));g.getInstance().trackPage(g.PAGE.SETTINGS_NOTIFICATIONS)},getTitle:function(){return _t.profile_settings_notifications},getName:function(){return"settings-page settings-notifications"},getPageMenuButtons:function(){return[f.BACK,f.SAVE]},
onPageMenuButtonSelect:function(b){a.History.back();b.button===f.SAVE&&a.Api.getInstance().request("setNotificationSettings",this.getView("notifications").getData(),_.bind(function(){},this));c._super.onPageMenuButtonSelect.apply(this,arguments)}});a.Controllers.Settings.registerMenuItem("Notifications",c,{title:_t.profile_settings_notifications,href:"settings-notifications"})})(Badoo);Badoo=Badoo||{};
(function(a){var f=a.Utils.DOM.createElement,g=a.Views.Settings.Notifications=a.Views.ScrollingView.extend({className:"settings-page notifications",types_:null,fields_:null,preventTouch:!0,init:function(d){g._super.init.call(this);this.registerChildView("settings",new a.Views.List);d&&(this.types_=d.types,this.fields_=d.fields);this.render()},update:function(a){if(!_.isObject(a))return this;for(var b in a)for(var c in a[b])_.has(this.childViews_,"field:"+b)&&this.childViews_["field:"+b].update(c,
a[b][c]);return this},getListViewData_:function(){return[{title:"","class":"form",items:this.fields_.map(function(d){var b=this.registerChildView("field:"+d.name,new a.Views.ToggleItems);b.update({options:{hasIcons:!0}});b.update(this.types_.map(function(a){return{id:a,name:a}}));return{content:[f("label",null,d.displayName),b.el]}},this)}]},getData:function(){var a={},b;for(b in this.childViews_)if(0===b.indexOf("field:")){var c=this.childViews_[b].getData();b=b.replace("field:","");for(var f in c)a[f+
b.charAt(0).toUpperCase()+b.substr(1)]=c[f]}return a},render:function(){this.getChildView("settings").update(this.getListViewData_());this.getChildView("settings").appendTo(this.el)}})})(Badoo);Badoo=Badoo||{};
(function(a){var f=a.Views.PageMenu.Buttons,g=a.Utils.Analytics,d=a.Controllers.PageController.extend({init:function(){d._super.init.apply(this,arguments);_.bindAll(this,"notifyView_");this.registerView("locationView",new a.Views.Settings.Location);this.registerModel("profile",new a.Models.Profiles);this.registerModel("encounters",new a.Models.Encounters);this.registerController("location-select",new a.Controllers.LocationSelect("location-select"));this.getController("location-select").on("change",
this.notifyView_)},onStart:function(){d._super.onStart.apply(this,arguments);a.Api.getInstance().request("getSearchSettings",_.bind(function(a,c){this.getController("location-select").updateLocation({id:c.extract("locationId"),name:c.extract("locationName")})},this));this.getController("location-select").start(this.getView("locationView").getLocationContainer(),{maxResults:7,placeholder:_t.incomplete_profile_location_placeholder});this.getView("locationView").appendTo(this.getParent());g.getInstance().trackPage(g.PAGE.LOCATION_EDIT)},
onStop:function(){this.getController("location-select").stop()},getTitle:function(){return _t.incomplete_profile_location},getHeaderType:function(){return a.Views.Header.DISPLAY_TYPE.HIGHLIGHTED},getPageMenuButtons:function(){return[f.BACK,f.SAVE]},notifyView_:function(){this.updateView("locationView")},onPageMenuButtonSelect:function(b){a.History.back();if(b.button===f.SAVE){var c=this.getController("location-select").getLocation();null!==c.id&&a.Api.getInstance().request("setLocation",{locationId:c.id},
_.bind(function(b){b||(this.getModel("profile").invalidate(a.Session.getInstance().getUserId()),this.getModel("encounters").invalidate())},this))}d._super.onPageMenuButtonSelect.apply(this,arguments)}});a.Controllers.Settings.registerMenuItem("Location",d,!1)})(Badoo);Badoo=Badoo||{};
(function(a){var f=a.Views.Settings.Location=a.Views.ScrollingView.extend({id:"location-edit-page",className:"settings-page",locationContainer_:null,init:function(){f._super.init.apply(this,arguments);this.locationContainer_=$("<div/>");this.render()},getLocationContainer:function(){return this.locationContainer_},update:function(){this.refreshScroller()},render:function(){this.$el.append(this.locationContainer_)}})})(Badoo);Badoo=Badoo||{};
(function(a){var f=a.Views.PageMenu.Buttons,g=a.Utils.Analytics,d=a.Controllers.PageController.extend({init:function(){d._super.init.apply(this,arguments);this.registerView("about",new a.Views.Settings.About)},onStart:function(){d._super.onStart.apply(this,arguments);this.getView("about").update().appendTo(this.getParent());g.getInstance().trackPage(g.PAGE.SETTINGS_ABOUT)},getHeaderType:function(){return a.Views.Header.DISPLAY_TYPE.HIGHLIGHTED},getTitle:function(){return _t.profile_settings_about},
getName:function(){return"settings-page settings-about"},getPageMenuButtons:function(){return[f.BACK]}});a.Controllers.Settings.registerMenuItem("About",d,{title:_t.profile_settings_about,href:"settings-about"})})(Badoo);Badoo=Badoo||{};
(function(a){var f=a.Utils.DOM,g=5,d=a.Views.Settings.About=a.Views.ScrollingView.extend({data_:null,className:"settings-page about main-page-view",init:function(){d._super.init.apply(this,arguments);this.update()},events:{"click .info":"update"},update:function(){var b={},c=window._badoo_webapp_version;a.NativeBridge.getInstance().isNative()&&(c=BadooNative.wrapper.getVersion()+" / "+c);b.version=_t.WindowsPhone_Settings_About_Version([c]);if("debug"===window._badoo_webapp_desc||0>=--g)b.build=window._badoo_webapp_build,
b.hostname=Badoo.config.get("api.baseHostname");_.isEqual(b,this.data_)||(this.data_=b,this.render());return this},render:function(){this.$el.empty().append(f.renderTemplate("about-settings",this.data_))}})})(Badoo);Badoo=Badoo||{};
(function(a){var f=a.Views.PageMenu.Buttons,g=a.Utils.Analytics,d=a.Controllers.PageController.extend({personName_:null,init:function(){d._super.init.apply(this,arguments);this.registerView("confirm-delete",new a.Views.Settings.ConfirmDelete);this.getView("confirm-delete").on("delete",_.bind(this.onConfirmDelete_,this));this.registerView("post-deletion-message",new a.Views.Alert)},onStart:function(){d._super.onStart.apply(this,arguments);this.getView("confirm-delete").appendTo(this.getParent());g.getInstance().trackPage(g.PAGE.SETTINGS_CONFIRM_DELETE);
a.Api.getInstance().request("getDeleteAccountInfo",_.bind(function(a,c){a?this.getView("confirm-delete").update({delete_options:null}):this.getView("confirm-delete").update({delete_options:c.extract("deleteAccountReasons_").map(function(a){return{id:a.extract("reasonCode"),name:a.extract("text")}})})},this));this.trigger("ready")},getTitle:function(){return _t.profile_settings_account},getHeaderType:function(){return a.Views.Header.DISPLAY_TYPE.HIGHLIGHTED},getPageMenuButtons:function(){return[f.BACK]},
onConfirmDelete_:function(b){a.Api.getInstance().request("serverDeleteAccount",{reason_code:b.reason_code,text:b.text},_.bind(function(b){b?a.History.back():this.getView("post-deletion-message").update({message:_t.settings_account_deleted_description,type:a.Views.Alert.TYPES.INFO,onDismiss:function(){a.Session.getInstance().logout(!0)}})},this))}});a.Controllers.Settings.registerMenuItem("ConfirmDelete",d)})(Badoo);Badoo=Badoo||{};
(function(a){var f=a.Utils.DOM.createElement,g=a.Views.Settings.ConfirmDelete=a.Views.ScrollingView.extend({className:"settings-page confirm-delete main-page-view",deleteOptions_:null,listView_:null,textElement_:null,deleteButton_:null,events:{"click button.delete_account":"confirmDelete_"},init:function(){g._super.init.apply(this,arguments);this.deleteOptions_=(new a.Views.ToggleItems({isBlock:!0,isRadio:!0})).enable();this.deleteOptions_.on("toggle",this.onToggle_);this.listView_=(new a.Views.List).enable();
this.textElement_=f("textarea",{placeholder:_t.cmd_add_comments||"Add comments",rows:5});this.deleteButton_=$(f("button",{className:"secondary-button disabled",text:_t.cmd_confirm_delete||"Confirm Delete"}));this.render()},confirmDelete_:function(){0<this.deleteOptions_.getSelected().length&&this.trigger("delete",{reason_code:this.deleteOptions_.getSelected()[0],text:this.textElement_.value})},update:function(a){a.delete_options&&this.deleteOptions_.update(a.delete_options);this.refreshScroller();
this.hideLoading()},onToggle_:function(){0<this.deleteOptions_.getSelected().length?this.deleteButton_.removeClass("disabled"):this.deleteButton_.addClass("disabled")},render:function(){this.showLoading();this.listView_.update({title:_t.account_delete_account_reason||"Sorry to see you go, please tell us your reason for leaving.",items:[{content:this.deleteOptions_.el}]});this.$el.append(this.listView_.el,this.textElement_,f("div",{className:"button-wrapper"},this.deleteButton_))}})})(Badoo);
Badoo=Badoo||{};
(function(a){var f=a.Views.PhoneVerification,g={ENTER_NUMBER:_t.verification_mobile_title,ENTER_PIN:_t.verification_sms_pincode_placeholder},d=a.Views.PhoneVerification.STATES,b=a.Controllers.PhoneVerification=a.Controllers.PageController.extend({init:function(){b._super.init.apply(this,arguments);var c=this.registerView("phone-verification",new f("phone-verification"));c.on(f.ACTIONS.SUBMIT_NUMBER,_.bind(this.onSubmitPhoneNumber_,this));c.on(f.ACTIONS.SUBMIT_PIN,_.bind(this.onSubmitPin_,this));c.on(f.ACTIONS.RE_ENTER_NUMBER,
_.bind(this.onReEnterNumber_,this));this.registerView("post-verification-message",new a.Views.Alert);this.registerModel("verification",new a.Models.Verification("phone-verification"));this.registerModel("profile",new a.Models.Profiles)},onStart:function(){b._super.onStart.apply(this,arguments);this.getView("phone-verification").appendTo(this.getParent());this.getModel("verification").get({screen:"CLIENT_SOURCE_SERVER_NOTIFICATION",uid:""},_.bind(this.onUserVerificationData_,this))},onReEnterNumber_:function(){this.changeState_(d.ENTER_NUMBER)},
onUserVerificationData_:function(a,b){if(b.isPhoneVerified())this.onConfirmPhoneState_();else{var e=null===b.getPhoneNumber()?d.ENTER_NUMBER:d.ENTER_PIN;this.updateView("header",{title:g[e]});this.getView("phone-verification").update({phoneNumber:b.getPhoneNumber(),state:e});this.changeState_(e)}},onSubmitPhoneNumber_:function(a){this.getModel("verification").set({type:"VERIFY_SOURCE_PHONE_NUMBER",token:a.token,pin:""},_.bind(this.onUserVerify_,this))},onSubmitPin_:function(a){this.getModel("verification").set({type:"VERIFY_SOURCE_PHONE_NUMBER",
token:"",pin:a.pin+""},_.bind(this.onUserVerify_,this))},onConfirmPhoneState_:function(){var b=a.Session.getInstance();this.getModel("profile").get({id:b.getUserId(),visitingSource:"CLIENT_SOURCE_UNSPECIFIED"},_.bind(function(a,d){a||0===d.extract("person.previewImageId.length")&&b.requiresPhotoUpload(!0);b.sessionStartup();this.stop()},this))},onUserVerify_:function(b,f){if(f.extract("verifiedSource")&&f.extract("verifiedSource").isPhoneVerified()){var e=f.extract("infoText");if(null!==e)this.getView("post-verification-message").update({message:e,
type:a.Views.Alert.TYPES.INFO,onDismiss:_.bind(this.onConfirmPhoneState_,this)});else this.onConfirmPhoneState_()}else if(e=f.getPhoneError(),null!==e)this.getView("phone-verification").update({error:e});else{var g=f.extract("verifiedSource")&&f.extract("verifiedSource").getPhoneNumber();this.getView("phone-verification").update({error:e,phoneNumber:g});this.changeState_(d.ENTER_PIN)}},getHeaderType:function(){return a.Views.Header.DISPLAY_TYPE.SOLID},getTitle:function(){return _t.verification_mobile_title},
changeState_:function(a){this.updateView("header",{title:g[a]});this.getView("phone-verification").update({state:a})}})})(Badoo);Badoo=Badoo||{};(function(a){a.Utils.Dependencies.register("stage2")})(Badoo);Badoo=Badoo||{};
(function(a,f){var g=a.Utils.Timing.getInstance();g.startupEvent("execute-js-end").startupEvent("initialization-start");a.Utils.Logger.getLogger("init");var d=a.NativeBridge.getInstance();a.Utils.Cache.init();a.Session.getInstance().init();if(!window.jstestdriver&&!window.nativetest){a.Utils.Auth.FBAuth.getInstance().init();a.Router.register({"encounters/:id":a.Controllers.Encounters,"matches/:filter":a.Controllers.Matches,"landing/:forward/:badooContinue/:inviteCode":a.Controllers.LandingPage,"profile/:id":a.Controllers.Profile,
"own-profile":a.Controllers.OwnProfile,"chat/:id/:name":a.Controllers.Chat,settings:a.Controllers.Settings,"settings-basic-info":a.Controllers.Settings.BasicInfo,"settings-account":a.Controllers.Settings.Account,"settings-confirm-delete":a.Controllers.Settings.ConfirmDelete,"settings-notifications":a.Controllers.Settings.Notifications,"settings-about":a.Controllers.Settings.About,"settings-filter":a.Controllers.Settings.Filter,"settings-location":a.Controllers.Settings.Location,"settings-edit-profile":a.Controllers.Settings.EditProfile,
"settings-feedback/:category":a.Controllers.Feedback,"fbimport/:album":a.Controllers.FacebookPhotoImport,"photo-edit/:type/:source":a.Controllers.PhotoEdit,"sign-up":a.Controllers.SignUp,"sign-in":a.Controllers.SignIn,"forgot-password":a.Controllers.ForgotPassword,"new-password/:token":a.Controllers.NewPassword,"legal/:document":a.Controllers.LegalDocument});var b=function(){a.Controllers.App.getInstance().start(f(document.body));g.startupEvent("initialization-end")};d.isNative()?(d.init(),BadooNative.wrapper.on("native-loaded",
function(c){c&&(BadooNative.events.init(),a.GlobalEvents.once("splash-screen-removed",_.bind(BadooNative.wrapper.hideSplashScreen,BadooNative.wrapper)),a.config.get("cittercism.enabled")&&a.Utils.crittercism.init(BadooNative.wrapper.isIos()?a.config.get("crittercism.ios"):a.config.get("crittercism.android")),a.Utils.Analytics.getInstance().init().initTracker(a.config.get("analytics.google.defaultTracker")),f(document).ready(b))})):(a.config.get("crittercism.enabled")&&a.Utils.crittercism.init(a.config.get("crittercism.web")),
a.Utils.Analytics.getInstance().init().initTracker(a.config.get("analytics.google.defaultTracker")),f(document).ready(b))}})(Badoo,Zepto);